<!doctype html><html class=no-js lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://www.instancio.org/user-guide/ rel=canonical><link href=../getting-started/ rel=prev><link href=../building/ rel=next><link href=../assets/favicon.ico rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.5.47" name=generator><title>User Guide - Instancio</title><link href=../assets/stylesheets/main.6f8fc17f.min.css rel=stylesheet><link href=../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-MYZQVSS3LL" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-MYZQVSS3LL`)</script><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta content="Instancio is a test data generation library for Java. Its goals are to automate data setup, make tests more concise, and reduce test maintenance effort." name=description><body data-md-color-accent=deep-orange data-md-color-primary=green data-md-color-scheme=default dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#introduction> Skip to content </a></div><div data-md-component=announce></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a class="md-header__button md-logo" aria-label=Instancio data-md-component=logo href=.. title=Instancio> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Instancio </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> User Guide </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to dark mode" class=md-option data-md-color-accent=deep-orange data-md-color-media data-md-color-primary=green data-md-color-scheme=default id=__palette_0 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input aria-label="Switch to light mode" class=md-option data-md-color-accent=deep-orange data-md-color-media data-md-color-primary=green data-md-color-scheme=slate id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label=Search class=md-search__options><button class="md-search__icon md-icon" aria-label=Clear tabindex=-1 title=Clear type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/instancio/instancio> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>instancio</div> </a></div></nav><nav aria-label=Tabs class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a class=md-tabs__link href=..> Home </a><li class=md-tabs__item><a class=md-tabs__link href=../getting-started/> Getting Started </a><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=./> User Guide </a><li class=md-tabs__item><a class=md-tabs__link href=../building/> Building </a><li class=md-tabs__item><a class=md-tabs__link href=../articles/> Articles </a></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a class="md-nav__button md-logo" aria-label=Instancio data-md-component=logo href=.. title=Instancio> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Instancio</label><div class=md-nav__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/instancio/instancio> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>instancio</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=..> <span class=md-ellipsis> Home </span> </a><li class=md-nav__item><a class=md-nav__link href=../getting-started/> <span class=md-ellipsis> Getting Started </span> </a><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span></label> <a class="md-nav__link md-nav__link--active" href=./> <span class=md-ellipsis> User Guide </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#introduction> <span class=md-ellipsis> Introduction </span> </a> <nav aria-label=Introduction class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#overview> <span class=md-ellipsis> Overview </span> </a><li class=md-nav__item><a class=md-nav__link href=#project-goals> <span class=md-ellipsis> Project Goals </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#instancio-basics> <span class=md-ellipsis> Instancio Basics </span> </a> <nav aria-label="Instancio Basics" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#creating-objects> <span class=md-ellipsis> Creating Objects </span> </a> <nav aria-label="Creating Objects" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#creating-collections> <span class=md-ellipsis> Creating collections </span> </a><li class=md-nav__item><a class=md-nav__link href=#creating-record-and-sealed-classes> <span class=md-ellipsis> Creating record and sealed Classes </span> </a><li class=md-nav__item><a class=md-nav__link href=#creating-a-stream-of-objects> <span class=md-ellipsis> Creating a Stream of Objects </span> </a><li class=md-nav__item><a class=md-nav__link href=#creating-blank-objects> <span class=md-ellipsis> Creating Blank Objects </span> </a><li class=md-nav__item><a class=md-nav__link href=#creating-simple-values> <span class=md-ellipsis> Creating Simple Values </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#populating-existing-objects> <span class=md-ellipsis> Populating Existing Objects </span> </a> <nav aria-label="Populating Existing Objects" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#fill-types> <span class=md-ellipsis> Fill Types </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#selectors> <span class=md-ellipsis> Selectors </span> </a> <nav aria-label=Selectors class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#selector-precedence> <span class=md-ellipsis> Selector Precedence </span> </a><li class=md-nav__item><a class=md-nav__link href=#selector-scopes> <span class=md-ellipsis> Selector Scopes </span> </a><li class=md-nav__item><a class=md-nav__link href=#selector-depth> <span class=md-ellipsis> Selector Depth </span> </a><li class=md-nav__item><a class=md-nav__link href=#selector-strictness> <span class=md-ellipsis> Selector Strictness </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#customising-objects> <span class=md-ellipsis> Customising Objects </span> </a> <nav aria-label="Customising Objects" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#using-generate> <span class=md-ellipsis> Using generate() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-set> <span class=md-ellipsis> Using set() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-supply> <span class=md-ellipsis> Using supply() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-assign> <span class=md-ellipsis> Using assign() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-oncomplete> <span class=md-ellipsis> Using onComplete() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-filter> <span class=md-ellipsis> Using filter() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-withunique> <span class=md-ellipsis> Using withUnique() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-setblank> <span class=md-ellipsis> Using setBlank() </span> </a><li class=md-nav__item><a class=md-nav__link href=#using-ignore> <span class=md-ellipsis> Using ignore() </span> </a><li class=md-nav__item><a class=md-nav__link href=#nullable-values> <span class=md-ellipsis> Nullable Values </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#subtype-mapping> <span class=md-ellipsis> Subtype Mapping </span> </a> <nav aria-label="Subtype Mapping" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#specifying-subtypes> <span class=md-ellipsis> Specifying Subtypes </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#using-models> <span class=md-ellipsis> Using Models </span> </a> <nav aria-label="Using Models" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#using-setmodel> <span class=md-ellipsis> Using setModel() </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#custom-generators> <span class=md-ellipsis> Custom Generators </span> </a><li class=md-nav__item><a class=md-nav__link href=#assignment-settings> <span class=md-ellipsis> Assignment Settings </span> </a> <nav aria-label="Assignment Settings" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#unmatched-setters> <span class=md-ellipsis> Unmatched Setters </span> </a><li class=md-nav__item><a class=md-nav__link href=#initialised-fields> <span class=md-ellipsis> Initialised Fields </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#maximum-depth-setting> <span class=md-ellipsis> Maximum Depth Setting </span> </a> <nav aria-label="Maximum Depth Setting" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#modifying-maximum-depth> <span class=md-ellipsis> Modifying Maximum Depth </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#cyclic-objects> <span class=md-ellipsis> Cyclic Objects </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#cartesian-product> <span class=md-ellipsis> Cartesian Product </span> </a> <nav aria-label="Cartesian Product" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#limitations> <span class=md-ellipsis> Limitations </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#bean-validation> <span class=md-ellipsis> Bean Validation </span> </a> <nav aria-label="Bean Validation" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#supported-annotations> <span class=md-ellipsis> Supported Annotations </span> </a> <nav aria-label="Supported Annotations" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#jakarta-or-javax> <span class=md-ellipsis> Jakarta or Javax </span> </a><li class=md-nav__item><a class=md-nav__link href=#hibernate> <span class=md-ellipsis> Hibernate </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=#jpa> <span class=md-ellipsis> JPA </span> </a> <nav aria-label=JPA class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#supported-attributes> <span class=md-ellipsis> Supported Attributes </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#data-feeds> <span class=md-ellipsis> Data Feeds </span> </a> <nav aria-label="Data Feeds" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#using-applyfeed> <span class=md-ellipsis> Using applyFeed() </span> </a><li class=md-nav__item><a class=md-nav__link href=#custom-feeds> <span class=md-ellipsis> Custom Feeds </span> </a><li class=md-nav__item><a class=md-nav__link href=#feed-specs> <span class=md-ellipsis> Feed Specs </span> </a> <nav aria-label="Feed Specs" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#using-feed-specs> <span class=md-ellipsis> Using Feed Specs </span> </a><li class=md-nav__item><a class=md-nav__link href=#aliasspec> <span class=md-ellipsis> @AliasSpec </span> </a><li class=md-nav__item><a class=md-nav__link href=#templatespec> <span class=md-ellipsis> @TemplateSpec </span> </a><li class=md-nav__item><a class=md-nav__link href=#generatedspec> <span class=md-ellipsis> @GeneratedSpec </span> </a><li class=md-nav__item><a class=md-nav__link href=#functionspec> <span class=md-ellipsis> @FunctionSpec </span> </a><li class=md-nav__item><a class=md-nav__link href=#withstringmapper> <span class=md-ellipsis> @WithStringMapper </span> </a><li class=md-nav__item><a class=md-nav__link href=#withpostprocessor> <span class=md-ellipsis> @WithPostProcessor </span> </a><li class=md-nav__item><a class=md-nav__link href=#nullablespec> <span class=md-ellipsis> @NullableSpec </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#feed-configuration> <span class=md-ellipsis> Feed Configuration </span> </a> <nav aria-label="Feed Configuration" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#feed-data-source> <span class=md-ellipsis> Feed Data Source </span> </a><li class=md-nav__item><a class=md-nav__link href=#feed-data-access> <span class=md-ellipsis> Feed Data Access </span> </a><li class=md-nav__item><a class=md-nav__link href=#feed-data-end> <span class=md-ellipsis> Feed Data End </span> </a><li class=md-nav__item><a class=md-nav__link href=#feed-data-format> <span class=md-ellipsis> Feed Data Format </span> </a><li class=md-nav__item><a class=md-nav__link href=#feed-tags> <span class=md-ellipsis> Feed Tags </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=#configuration> <span class=md-ellipsis> Configuration </span> </a> <nav aria-label=Configuration class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#overriding-settings-programmatically> <span class=md-ellipsis> Overriding Settings Programmatically </span> </a><li class=md-nav__item><a class=md-nav__link href=#overriding-settings-using-a-properties-file> <span class=md-ellipsis> Overriding Settings Using a Properties File </span> </a><li class=md-nav__item><a class=md-nav__link href=#settings-precedence> <span class=md-ellipsis> Settings Precedence </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#instancio-service-provider-interface> <span class=md-ellipsis> Instancio Service Provider Interface </span> </a> <nav aria-label="Instancio Service Provider Interface" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#generatorprovider> <span class=md-ellipsis> GeneratorProvider </span> </a> <nav aria-label=GeneratorProvider class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#use-case> <span class=md-ellipsis> Use Case </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#annotationprocessor> <span class=md-ellipsis> AnnotationProcessor </span> </a> <nav aria-label=AnnotationProcessor class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#use-case_1> <span class=md-ellipsis> Use Case </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#settermethodresolver> <span class=md-ellipsis> SetterMethodResolver </span> </a> <nav aria-label=SetterMethodResolver class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#use-case_2> <span class=md-ellipsis> Use Case </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#typeresolver> <span class=md-ellipsis> TypeResolver </span> </a> <nav aria-label=TypeResolver class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#use-case_3> <span class=md-ellipsis> Use Case </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#typeinstantiator> <span class=md-ellipsis> TypeInstantiator </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#troubleshooting> <span class=md-ellipsis> Troubleshooting </span> </a> <nav aria-label=Troubleshooting class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#debugging> <span class=md-ellipsis> Debugging </span> </a><li class=md-nav__item><a class=md-nav__link href=#error-handling> <span class=md-ellipsis> Error Handling </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#seed> <span class=md-ellipsis> Seed </span> </a> <nav aria-label=Seed class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#specifying-seed-value> <span class=md-ellipsis> Specifying Seed Value </span> </a> <nav aria-label="Specifying Seed Value" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#withsettings-seed> <span class=md-ellipsis> @WithSettings seed </span> </a><li class=md-nav__item><a class=md-nav__link href=#global-seed> <span class=md-ellipsis> Global Seed </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#getting-the-seed-value> <span class=md-ellipsis> Getting the Seed Value </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#junit-jupiter-integration> <span class=md-ellipsis> JUnit Jupiter Integration </span> </a> <nav aria-label="JUnit Jupiter Integration" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#given-injection> <span class=md-ellipsis> @Given Injection </span> </a> <nav aria-label="@Given Injection" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#using-custom-givenprovider> <span class=md-ellipsis> Using Custom GivenProvider </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#parameterized-tests-with-instanciosource> <span class=md-ellipsis> Parameterized Tests with @InstancioSource </span> </a><li class=md-nav__item><a class=md-nav__link href=#settings-injection> <span class=md-ellipsis> Settings Injection </span> </a><li class=md-nav__item><a class=md-nav__link href=#reproducing-failed-tests> <span class=md-ellipsis> Reproducing Failed Tests </span> </a> <nav aria-label="Reproducing Failed Tests" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#data-guarantees> <span class=md-ellipsis> Data Guarantees </span> </a><li class=md-nav__item><a class=md-nav__link href=#seed-lifecycle-in-a-junit-jupiter-test> <span class=md-ellipsis> Seed Lifecycle in a JUnit Jupiter Test </span> </a><li class=md-nav__item><a class=md-nav__link href=#test-failure-reporting> <span class=md-ellipsis> Test Failure Reporting </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=#appendix> <span class=md-ellipsis> Appendix </span> </a> <nav aria-label=Appendix class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#default-string-conversion> <span class=md-ellipsis> Default String Conversion </span> </a><li class=md-nav__item><a class=md-nav__link href=#built-in-generators> <span class=md-ellipsis> Built-in Generators </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=../building/> <span class=md-ellipsis> Building </span> </a><li class=md-nav__item><a class=md-nav__link href=../articles/> <span class=md-ellipsis> Articles </span> </a></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h2 id=introduction>Introduction<a title="Permanent link" class=headerlink href=#introduction>¶</a></h2><h3 id=overview>Overview<a title="Permanent link" class=headerlink href=#overview>¶</a></h3><p>Instancio is a Java library for generating test objects. Its main goal is to reduce manual data setup in unit tests. Its API was designed to be as non-intrusive and as concise as possible, while providing enough flexibility to customise generated objects. Instancio requires no changes to production code, and it can be used out-of-the-box with zero configuration.<h3 id=project-goals>Project Goals<a title="Permanent link" class=headerlink href=#project-goals>¶</a></h3><p>There are several existing libraries for generating realistic test data, such as addresses, first and last names, and so on. While Instancio also supports this use case, this is not its goal. The idea behind the project is that most unit tests do not care what the actual values are. They just require the <em>presence of a value</em>. Therefore, the main goal of Instancio is simply to generate fully populated objects with random data, including arrays, collections, nested collections, generic types, and so on. And it aims to do so with as little code as possible to keep the tests concise.<p>Another goal of Instancio is to make the tests more dynamic. Since each test run is against random values, the tests become alive. They cover a wider range of inputs, which might help uncover bugs that may have gone unnoticed with static data. In many cases, the random nature of the data also removes the need for parameterising test methods.<p>Finally, Instancio aims to provide reproducible data. It uses a consistent seed value for each object graph it generates. Therefore, if a test fails against a given set of inputs, Instancio supports re-generating the same data set in order to reproduce the failed test.<h1 id=instancio-basics>Instancio Basics<a title="Permanent link" class=headerlink href=#instancio-basics>¶</a></h1><h2 id=creating-objects>Creating Objects<a title="Permanent link" class=headerlink href=#creating-objects>¶</a></h2><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Instancio.html target=_blank>Instancio</a> class is the entry point to the API. It provides the following shorthand methods for creating objects. These can be used when defaults suffice and generated values do not need to be customised.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Shorthand methods</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>)</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>)</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Model</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>model</span><span class=p>)</span>
</code></pre></div></table></div><p>The following builder methods allow chaining additional method calls in order to customise generated values, ignore certain fields, provide custom settings, and so on.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Builder API</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span>
<span class=normal><a href=#__codelineno-1-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Model</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>model</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><p>The three arguments accepted by these methods can be used for different purposes.<div class="admonition attention"><p><lnum>1</lnum> Creates an instance by specifying a class; this method should suffice in most cases.<br> <lnum>2</lnum> This method is for creating instances of generic types by supplying a type token.<br> <lnum>3</lnum> Creates an instance using an Instancio <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Model.html target=_blank>Model</a>, which acts as a template for creating objects (see <a href=#using-models>Using Models</a>).</div><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Examples of create() methods</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span>
<span class=normal><a href=#__codelineno-2-14>14</a></span>
<span class=normal><a href=#__codelineno-2-15>15</a></span>
<span class=normal><a href=#__codelineno-2-16>16</a></span>
<span class=normal><a href=#__codelineno-2-17>17</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=c1>// Create by specifying the class</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a>
<a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=c1>// Using type tokens</span>
<a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=n>Pair</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=o>></span><span class=w> </span><span class=n>pair</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o><</span><span class=n>Pair</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=o>>></span><span class=p>()</span><span class=w> </span><span class=p>{});</span>
<a id=__codelineno-2-6 name=__codelineno-2-6></a>
<a id=__codelineno-2-7 name=__codelineno-2-7></a><span class=n>Map</span><span class=o><</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>>></span><span class=w> </span><span class=n>map</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o><</span><span class=n>Map</span><span class=o><</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>>>></span><span class=p>()</span><span class=w> </span><span class=p>{});</span>
<a id=__codelineno-2-8 name=__codelineno-2-8></a>
<a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=c1>// Create from a model of person with the age field ignored</span>
<a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=n>Model</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>personModel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAge</span><span class=p>))</span>
<a id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
<a id=__codelineno-2-13 name=__codelineno-2-13></a>
<a id=__codelineno-2-14 name=__codelineno-2-14></a><span class=c1>// Create a person from the model, and additionally ignore the address field</span>
<a id=__codelineno-2-15 name=__codelineno-2-15></a><span class=n>Person</span><span class=w> </span><span class=n>personWithoutAgeAndAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>personModel</span><span class=p>)</span>
<a id=__codelineno-2-16 name=__codelineno-2-16></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAddress</span><span class=p>))</span>
<a id=__codelineno-2-17 name=__codelineno-2-17></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>It should be noted that generic types can also be created using <code>Instancio.of(Class)</code> and specifying the type parameters as arguments to the <code>withTypeParameters()</code> method:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=n>Pair</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=o>></span><span class=w> </span><span class=n>pair</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pair</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>    </span><span class=p>.</span><span class=na>withTypeParameters</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>However, this approach has a couple of drawbacks: it does not support nested generics, and its usage will produce an "unchecked assignment" warning.<h3 id=creating-collections>Creating collections<a title="Permanent link" class=headerlink href=#creating-collections>¶</a></h3><p>Collections can be created using one of the following methods. These methods create a collection of random size, between 2 and 6 elements, inclusive:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Collections API: using Class</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span>
<span class=normal><a href=#__codelineno-4-2>2</a></span>
<span class=normal><a href=#__codelineno-4-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>createList</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>)</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>createSet</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>)</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>createMap</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>K</span><span class=o>></span><span class=w> </span><span class=n>keyType</span><span class=p>,</span><span class=w> </span><span class=n>Class</span><span class=o><</span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=n>valueType</span><span class=p>)</span>
</code></pre></div></table></div><p>In addition, there is a builder API for creating a collection of a specified size. The builder API also supports customising properties of collection elements.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Collections builder API: using Class</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span>
<span class=normal><a href=#__codelineno-5-2>2</a></span>
<span class=normal><a href=#__codelineno-5-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofSet</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-5-3 name=__codelineno-5-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofMap</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>K</span><span class=o>></span><span class=w> </span><span class=n>keyType</span><span class=p>,</span><span class=w> </span><span class=n>Class</span><span class=o><</span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=n>valueType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><p>If the element is a generic type, the following methods can be used instead:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Collections builder API: using TypeToken</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span>
<span class=normal><a href=#__codelineno-6-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofSet</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofMap</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>K</span><span class=o>></span><span class=w> </span><span class=n>keyType</span><span class=p>,</span><span class=w> </span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=n>valueType</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><p>In addition, <code>ofList()</code> and <code>ofSet()</code> can be used to create collections from models:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Collections builder API: using Model</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span>
<span class=normal><a href=#__codelineno-7-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Model</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementModel</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofSet</span><span class=p>(</span><span class=n>Model</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>elementModel</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Examples</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span>
<span class=normal><a href=#__codelineno-8-16>16</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>size</span><span class=p>(</span><span class=mi>10</span><span class=p>).</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=n>List</span><span class=o><</span><span class=n>Pair</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=o>>></span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o><</span><span class=n>Pair</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=o>>></span><span class=p>()</span><span class=w> </span><span class=p>{}).</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=n>Map</span><span class=o><</span><span class=n>UUID</span><span class=p>,</span><span class=w> </span><span class=n>Address</span><span class=o>></span><span class=w> </span><span class=n>map</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofMap</span><span class=p>(</span><span class=n>UUID</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>size</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>),</span><span class=w> </span><span class=s>"Vancouver"</span><span class=p>)</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a>
<a id=__codelineno-8-11 name=__codelineno-8-11></a><span class=c1>// Create from a model</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=n>Model</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>personModel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAge</span><span class=p>))</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
<a id=__codelineno-8-15 name=__codelineno-8-15></a>
<a id=__codelineno-8-16 name=__codelineno-8-16></a><span class=n>Set</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>set</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofSet</span><span class=p>(</span><span class=n>personModel</span><span class=p>).</span><span class=na>size</span><span class=p>(</span><span class=mi>5</span><span class=p>).</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Specifying the collection size is optional. If no size is specified, a collection of random size (between 2 and 6 inclusive) will be generated.<h3 id=creating-record-and-sealed-classes>Creating <code>record</code> and <code>sealed</code> Classes<a title="Permanent link" class=headerlink href=#creating-record-and-sealed-classes>¶</a></h3><p>Instancio version <code>1.5.0</code> introduced support for creating<ul><li><code>record</code> classes when run on Java 16+, and<li><code>sealed</code> classes when run on Java 17+.</ul><p>This uses the same API as described above for creating regular classes.<h3 id=creating-a-stream-of-objects>Creating a Stream of Objects<a title="Permanent link" class=headerlink href=#creating-a-stream-of-objects>¶</a></h3><p>Instancio also provides methods for creating a <code>Stream</code> of objects. The <code>stream()</code> methods return an infinite stream of distinct fully-populated instances. Similarly to the <code>create()</code> methods, these have a shorthand form if no customisations are needed:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Shorthand methods</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>stream</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>)</span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>stream</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>)</span>
</code></pre></div></table></div><p>as well as the builder API that allows customising generated values:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Stream Builder API</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>).</span><span class=na>stream</span><span class=p>()</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>).</span><span class=na>stream</span><span class=p>()</span>
</code></pre></div></table></div><p>The following are a couple of examples of using streams. Note the calls to <code>limit()</code>, which are required to avoid an infinite loop.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Examples of stream() methods</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span>
<span class=normal><a href=#__codelineno-11-3>3</a></span>
<span class=normal><a href=#__codelineno-11-4>4</a></span>
<span class=normal><a href=#__codelineno-11-5>5</a></span>
<span class=normal><a href=#__codelineno-11-6>6</a></span>
<span class=normal><a href=#__codelineno-11-7>7</a></span>
<span class=normal><a href=#__codelineno-11-8>8</a></span>
<span class=normal><a href=#__codelineno-11-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>personList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>stream</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=w>    </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span>
<a id=__codelineno-11-4 name=__codelineno-11-4></a>
<a id=__codelineno-11-5 name=__codelineno-11-5></a><span class=n>Map</span><span class=o><</span><span class=n>UUID</span><span class=p>,</span><span class=w> </span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>personMap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=p>()</span><span class=w> </span><span class=p>{})</span>
<a id=__codelineno-11-6 name=__codelineno-11-6></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAge</span><span class=p>),</span><span class=w> </span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAddress</span><span class=p>)))</span>
<a id=__codelineno-11-7 name=__codelineno-11-7></a><span class=w>    </span><span class=p>.</span><span class=na>stream</span><span class=p>()</span>
<a id=__codelineno-11-8 name=__codelineno-11-8></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span><a id=__codelineno-11-9 name=__codelineno-11-9></a><span class=w>    </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toMap</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getUuid</span><span class=p>,</span><span class=w> </span><span class=n>Function</span><span class=p>.</span><span class=na>identity</span><span class=p>()));</span>
</code></pre></div></table></div><div class="admonition warning"><p class=admonition-title>Since returned streams are infinite, <code>limit()</code> <em>must</em> be called to avoid an infinite loop.</div><h3 id=creating-blank-objects>Creating Blank Objects<a title="Permanent link" class=headerlink href=#creating-blank-objects>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.7.0</code></div><p>In addition to creating fully-populated objects, Instancio provides an API for creating blank objects using the following methods:<div class=highlight><span class=filename>Shorthand method</span><pre><span></span><code><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>createBlank</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>Builder API</span><pre><span></span><code><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofBlank</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div><p>Blank objects have value fields (such as strings, numbers, dates) set to <code>null</code> and nested POJO references initialised to blank POJOs. The following is a simple example that assumes a <code>Person</code> class with a <code>name</code> and <code>address</code> fields:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Examples of creating blank objects</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1> 1</a></span>
<span class=normal><a href=#__codelineno-14-2> 2</a></span>
<span class=normal><a href=#__codelineno-14-3> 3</a></span>
<span class=normal><a href=#__codelineno-14-4> 4</a></span>
<span class=normal><a href=#__codelineno-14-5> 5</a></span>
<span class=normal><a href=#__codelineno-14-6> 6</a></span>
<span class=normal><a href=#__codelineno-14-7> 7</a></span>
<span class=normal><a href=#__codelineno-14-8> 8</a></span>
<span class=normal><a href=#__codelineno-14-9> 9</a></span>
<span class=normal><a href=#__codelineno-14-10>10</a></span>
<span class=normal><a href=#__codelineno-14-11>11</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createBlank</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-14-2 name=__codelineno-14-2></a>
<a id=__codelineno-14-3 name=__codelineno-14-3></a><span class=c1>// Output:</span>
<a id=__codelineno-14-4 name=__codelineno-14-4></a><span class=c1>// Person[name=null, address=Address[street=null, city=null, country=null]]</span>
<a id=__codelineno-14-5 name=__codelineno-14-5></a>
<a id=__codelineno-14-6 name=__codelineno-14-6></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofBlank</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-14-7 name=__codelineno-14-7></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=s>"Canada"</span><span class=p>)</span>
<a id=__codelineno-14-8 name=__codelineno-14-8></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-14-9 name=__codelineno-14-9></a>
<a id=__codelineno-14-10 name=__codelineno-14-10></a><span class=c1>// Output:</span>
<a id=__codelineno-14-11 name=__codelineno-14-11></a><span class=c1>// Person[name=null, address=Address[street=null, city=null, country=Canada]]</span>
</code></pre></div></table></div><p>See the documentation for <a href=#using-setblank><code>setBlank(TargetSelector)</code></a> method for more details on blank objects.<h3 id=creating-simple-values>Creating Simple Values<a title="Permanent link" class=headerlink href=#creating-simple-values>¶</a></h3><p>Instancio offers the <code>Instancio.gen()</code> method to generate simple value types like strings, numbers, and dates. This method serves as the entry point for accessing built-in generators. All generators available through <code>Instancio.gen()</code> implement the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/ValueSpec.html target=_blank>ValueSpec</a> interface, which provides the following methods:<table><thead><tr><th>Method<th>Description<tbody><tr><td><code>get()</code><td>generates a single value<tr><td><code>list(int size)</code><td>generates a list of values of given size<tr><td><code>stream()</code><td>generates an infinite stream of values (requires calling <code>limit()</code>)<tr><td><code>map(Function)</code><td>returns the value after applying the function<tr><td><code>nullable()</code><td>indicates that a <code>null</code> may be generated</table><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Usage examples</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1>1</a></span>
<span class=normal><a href=#__codelineno-15-2>2</a></span>
<span class=normal><a href=#__codelineno-15-3>3</a></span>
<span class=normal><a href=#__codelineno-15-4>4</a></span>
<span class=normal><a href=#__codelineno-15-5>5</a></span>
<span class=normal><a href=#__codelineno-15-6>6</a></span>
<span class=normal><a href=#__codelineno-15-7>7</a></span>
<span class=normal><a href=#__codelineno-15-8>8</a></span>
<span class=normal><a href=#__codelineno-15-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1></a><span class=n>URL</span><span class=w> </span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>gen</span><span class=p>().</span><span class=na>net</span><span class=p>().</span><span class=na>url</span><span class=p>().</span><span class=na>get</span><span class=p>();</span>
<a id=__codelineno-15-2 name=__codelineno-15-2></a>
<a id=__codelineno-15-3 name=__codelineno-15-3></a><span class=n>URI</span><span class=w> </span><span class=n>uri</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>gen</span><span class=p>().</span><span class=na>net</span><span class=p>().</span><span class=na>uri</span><span class=p>().</span><span class=na>nullable</span><span class=p>().</span><span class=na>get</span><span class=p>();</span>
<a id=__codelineno-15-4 name=__codelineno-15-4></a>
<a id=__codelineno-15-5 name=__codelineno-15-5></a><span class=n>String</span><span class=w> </span><span class=n>randomChoice</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>gen</span><span class=p>().</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"foo"</span><span class=p>,</span><span class=w> </span><span class=s>"bar"</span><span class=p>,</span><span class=w> </span><span class=s>"baz"</span><span class=p>).</span><span class=na>get</span><span class=p>();</span>
<a id=__codelineno-15-6 name=__codelineno-15-6></a>
<a id=__codelineno-15-7 name=__codelineno-15-7></a><span class=n>List</span><span class=o><</span><span class=n>LocalDate</span><span class=o>></span><span class=w> </span><span class=n>dates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>gen</span><span class=p>().</span><span class=na>temporal</span><span class=p>().</span><span class=na>localDate</span><span class=p>().</span><span class=na>future</span><span class=p>().</span><span class=na>list</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<a id=__codelineno-15-8 name=__codelineno-15-8></a>
<a id=__codelineno-15-9 name=__codelineno-15-9></a><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>uuids</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>gen</span><span class=p>().</span><span class=na>text</span><span class=p>().</span><span class=na>uuid</span><span class=p>().</span><span class=na>upperCase</span><span class=p>().</span><span class=na>withoutDashes</span><span class=p>().</span><span class=na>list</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</code></pre></div></table></div><div class="admonition info"><p class=admonition-title>See <a href=#built-in-generators>Built-in Generators</a> for a list of available generators</div><h2 id=populating-existing-objects>Populating Existing Objects<a title="Permanent link" class=headerlink href=#populating-existing-objects>¶</a></h2><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 5.3.0</code></div><p>Instancio allows populating existing object instances with randomly generated values using the following method:<div class=highlight><span class=filename>Shorthand method</span><pre><span></span><code><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>fill</span><span class=p>(</span><span class=n>Object</span><span class=p>)</span>
</code></pre></div><p>This is a <code>void</code> method that modifies the provided object instance. Additionally, the following method offers a builder API for customising how the object is populated:<div class=highlight><span class=filename>Builder API</span><pre><span></span><code><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofObject</span><span class=p>(</span><span class=n>Object</span><span class=p>).</span><span class=na>fill</span><span class=p>()</span>
</code></pre></div><p>By default, only fields that are <code>null</code> or primitive fields with default values are populated. Existing non-null fields and primitive fields with non-default values remain unchanged.<p>Consider the following example class (getters and setters omitted for brevity):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-18-1>1</a></span>
<span class=normal><a href=#__codelineno-18-2>2</a></span>
<span class=normal><a href=#__codelineno-18-3>3</a></span>
<span class=normal><a href=#__codelineno-18-4>4</a></span>
<span class=normal><a href=#__codelineno-18-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-18-2 name=__codelineno-18-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a id=__codelineno-18-3 name=__codelineno-18-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>email</span><span class=p>;</span>
<a id=__codelineno-18-4 name=__codelineno-18-4></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>dateOfBirth</span><span class=p>;</span>
<a id=__codelineno-18-5 name=__codelineno-18-5></a><span class=p>}</span>
</code></pre></div></table></div><p>Suppose we have a <code>Person</code> instance with some fields already initialized. The remaining fields can be populated as follows:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1>1</a></span>
<span class=normal><a href=#__codelineno-19-2>2</a></span>
<span class=normal><a href=#__codelineno-19-3>3</a></span>
<span class=normal><a href=#__codelineno-19-4>4</a></span>
<span class=normal><a href=#__codelineno-19-5>5</a></span>
<span class=normal><a href=#__codelineno-19-6>6</a></span>
<span class=normal><a href=#__codelineno-19-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Person</span><span class=p>();</span>
<a id=__codelineno-19-2 name=__codelineno-19-2></a><span class=n>person</span><span class=p>.</span><span class=na>setDateOfBirth</span><span class=p>(</span><span class=n>LocalDate</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=mi>1980</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>31</span><span class=p>));</span>
<a id=__codelineno-19-3 name=__codelineno-19-3></a>
<a id=__codelineno-19-4 name=__codelineno-19-4></a><span class=hll><span class=n>Instancio</span><span class=p>.</span><span class=na>fill</span><span class=p>(</span><span class=n>person</span><span class=p>);</span>
</span><a id=__codelineno-19-5 name=__codelineno-19-5></a>
<a id=__codelineno-19-6 name=__codelineno-19-6></a><span class=c1>// Sample output:</span>
<a id=__codelineno-19-7 name=__codelineno-19-7></a><span class=hll><span class=c1>// Person[name=VCNSOU email=ONVERFS, dateOfBirth=1980-12-31]</span>
</span></code></pre></div></table></div><div class="admonition attention"><p><lnum>4,7</lnum> The <code>fill()</code> method fills the object with random data while preserving the initialized <code>dateOfBirth</code> field.<br></div><p>Similarly, you can use the builder API to customise the generated data:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1>1</a></span>
<span class=normal><a href=#__codelineno-20-2>2</a></span>
<span class=normal><a href=#__codelineno-20-3>3</a></span>
<span class=normal><a href=#__codelineno-20-4>4</a></span>
<span class=normal><a href=#__codelineno-20-5>5</a></span>
<span class=normal><a href=#__codelineno-20-6>6</a></span>
<span class=normal><a href=#__codelineno-20-7>7</a></span>
<span class=normal><a href=#__codelineno-20-8>8</a></span>
<span class=normal><a href=#__codelineno-20-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Person</span><span class=p>();</span>
<a id=__codelineno-20-2 name=__codelineno-20-2></a><span class=n>person</span><span class=p>.</span><span class=na>setDateOfBirth</span><span class=p>(</span><span class=n>LocalDate</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=mi>1980</span><span class=p>,</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=mi>31</span><span class=p>));</span>
<a id=__codelineno-20-3 name=__codelineno-20-3></a>
<a id=__codelineno-20-4 name=__codelineno-20-4></a><span class=hll><span class=n>Instancio</span><span class=p>.</span><span class=na>ofObject</span><span class=p>(</span><span class=n>person</span><span class=p>)</span>
</span><a id=__codelineno-20-5 name=__codelineno-20-5></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getEmail</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>net</span><span class=p>().</span><span class=na>email</span><span class=p>())</span>
</span><a id=__codelineno-20-6 name=__codelineno-20-6></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>fill</span><span class=p>();</span>
</span><a id=__codelineno-20-7 name=__codelineno-20-7></a>
<a id=__codelineno-20-8 name=__codelineno-20-8></a><span class=c1>// Sample output:</span>
<a id=__codelineno-20-9 name=__codelineno-20-9></a><span class=c1>// Person[name=VCNSOU, email=fphna@mph.org, dateOfBirth=1980-12-31]</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>4</lnum> Use the builder API for populating objects.<br> <lnum>5</lnum> Customise the <code>email</code> field.<br> <lnum>6</lnum> Invoke the <code>fill()</code> to fill the object with data.<br></div><p>The object being populated must meet the following requirements:<ul><li>It must not be a parameterized type, except for <code>java.util.Collection</code> or <code>java.util.Map</code>.<li>Collections and maps must not be empty.</ul><p>While this method can populate fields within elements of a collection, it does <strong>not</strong>:<ul><li>Add new elements to the collection.<li>Replace <code>null</code> elements with non-null values.</ul><p>As a result, initialised collections retain their original size unless explicitly replaced with a new collection instance using a selector.<h3 id=fill-types>Fill Types<a title="Permanent link" class=headerlink href=#fill-types>¶</a></h3><p>Instancio supports three fill types, represented by the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/FillType.html target=_blank>FillType</a> enum:<ul><li><p><code>APPLY_SELECTORS</code></p> <p>Populates the object only based on specified selectors. This ensures that only the fields explicitly targeted by selectors are modified. Other fields remain unchanged.</p><li><p><code>POPULATE_NULLS</code></p> <p>Populates all <code>null</code> fields with random values and applies any specified selectors. This includes the behaviour of <code>APPLY_SELECTORS</code> and adds population of <code>null</code> fields</p><li><p><code>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</code> (default behaviour)</p> <p>Populates both <code>null</code> fields and primitive fields containing default values. This combines the behaviour of <code>POPULATE_NULLS</code> with additional handling for default primitive values.</p></ul><p>The default fill type can be customised in the following ways:<ul><li>By using the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioObjectApi.html#withFillType(org.instancio.settings.FillType) target=_blank>withFillType(FillType)</a> method.<li>Via <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a>, using the <code>Keys.FILL_TYPE</code> key.</ul><h2 id=selectors>Selectors<a title="Permanent link" class=headerlink href=#selectors>¶</a></h2><p>Selectors are used to target fields and classes, for example in order to customise generated values. Instancio supports different types of selectors, all of which implement the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/TargetSelector.html target=_blank>TargetSelector</a> interface. These types are:<ul><li><a href=#regular-selectors>regular selectors</a><li><a href=#method-reference-selector>method reference selector</a><li><a href=#predicate-selectors>predicate selectors</a><li><a href=#convenience-selectors>convenience selectors</a><li><a href=#setter-selectors>setter selectors</a></ul><div class="admonition info"><p class=admonition-title>All selectors can be created using static methods from the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Select.html target=_blank>Select</a> class.<p>The following examples assume <code>import org.instancio.Select</code></div><h4 id=regular-selectors>Regular selectors<a title="Permanent link" class=headerlink href=#regular-selectors>¶</a></h4><p>Regular selectors are for precise matching: they can only match a single field or a single type.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-21-1>1</a></span>
<span class=normal><a href=#__codelineno-21-2>2</a></span>
<span class=normal><a href=#__codelineno-21-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>fieldName</span><span class=p>)</span>
<a id=__codelineno-21-2 name=__codelineno-21-2></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>declaringClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>fieldName</span><span class=p>)</span>
<a id=__codelineno-21-3 name=__codelineno-21-3></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>type</span><span class=p>)</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> Selects the field by name, declared in the class being created.<br> <lnum>2</lnum> Selects the field by name, declared in the specified class.<br> <lnum>3</lnum> Selects the specified class, including fields and collection elements of this type.<br></div><div class=highlight><span class=filename>Examples</span><pre><span></span><code><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"name"</span><span class=p>)</span><span class=w> </span><span class=c1>// Person.name</span>
<a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Set</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</code></pre></div><p><code>Select.field()</code> is matched based on the exact field name. If a field with the specified name does not exist, an error will be thrown. <code>Select.all()</code> is matched using <code>Class</code> equality, therefore matching does not include subtypes.<h4 id=method-reference-selector>Method reference selector<a title="Permanent link" class=headerlink href=#method-reference-selector>¶</a></h4><p>This selector uses method references to match fields.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-23-1>1</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>GetMethodSelector</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>R</span><span class=o>></span><span class=w> </span><span class=n>methodReference</span><span class=p>)</span>
</code></pre></div></table></div><div class=highlight><span class=filename>Example</span><pre><span></span><code><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getName</span><span class=p>)</span>
</code></pre></div><p>Internally, method reference is converted to a regular field selector, equivalent to <code>Select.field(Class&LT?> declaringClass, String fieldName)</code>. This is done by mapping the method name to the corresponding field name. The mapping logic supports the following naming conventions:<ul><li>Java beans - where getters are prefixed with <code>get</code> and, in case of booleans, <code>is</code>.<li>Java record - where method names match field names exactly.</ul><p>For example, all the following combinations of field and method names are supported:<table><thead><tr><th>Method name<th>Field name<th>Example<tbody><tr><td><code>getName()</code><td><code>name</code><td><code>Select.field(Person::getName)</code> -> <code>Select.field(Person.class, "name")</code><tr><td><code>name()</code><td><code>name</code><td><code>Select.field(Person::name)</code> -> <code>Select.field(Person.class, "name")</code><tr><td><code>isActive()</code><td><code>active</code><td><code>Select.field(Person::isActive)</code> -> <code>Select.field(Person.class, "active")</code><tr><td><code>isActive()</code><td><code>isActive</code><td><code>Select.field(Person::isActive)</code> -> <code>Select.field(Person.class, "isActive")</code></table><p>For methods that follow other naming conventions, or situations where no method is available, regular field selectors can be used instead.<div class="admonition info"><p class=admonition-title>Regular selector definition<p>From here on, the definition of <em>regular selectors</em> also includes method reference selectors.</div><h5 id=kotlin-method-reference-selector>Kotlin method reference selector<a title="Permanent link" class=headerlink href=#kotlin-method-reference-selector>¶</a></h5><p>Since Instancio does not include Kotlin dependencies, the method reference selector described above is only supported for Java classes. If you use Kotlin, a similar selector can be implemented as a simple utility class shown below. This sample assumes that the property has a non-null backing <code>javaField</code>:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Sample implementation method reference selector for Kotlin</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-25-1> 1</a></span>
<span class=normal><a href=#__codelineno-25-2> 2</a></span>
<span class=normal><a href=#__codelineno-25-3> 3</a></span>
<span class=normal><a href=#__codelineno-25-4> 4</a></span>
<span class=normal><a href=#__codelineno-25-5> 5</a></span>
<span class=normal><a href=#__codelineno-25-6> 6</a></span>
<span class=normal><a href=#__codelineno-25-7> 7</a></span>
<span class=normal><a href=#__codelineno-25-8> 8</a></span>
<span class=normal><a href=#__codelineno-25-9> 9</a></span>
<span class=normal><a href=#__codelineno-25-10>10</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1></a><span class=kd>class</span><span class=w> </span><span class=nc>KSelect</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-25-2 name=__codelineno-25-2></a><span class=w>    </span><span class=kd>companion</span><span class=w> </span><span class=kd>object</span><span class=w> </span><span class=err>{</span>
<a id=__codelineno-25-3 name=__codelineno-25-3></a><span class=w>        </span><span class=kd>fun</span><span class=w> </span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=nf>field</span><span class=p>(</span><span class=n>property</span><span class=p>:</span><span class=w> </span><span class=n>KProperty1</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>></span><span class=p>):</span><span class=w> </span><span class=n>TargetSelector</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-25-4 name=__codelineno-25-4></a><span class=w>            </span><span class=kd>val</span><span class=w> </span><span class=nv>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>property</span><span class=p>.</span><span class=na>javaField</span><span class=o>!!</span>
<a id=__codelineno-25-5 name=__codelineno-25-5></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>field</span><span class=p>.</span><span class=na>declaringClass</span><span class=p>,</span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=na>name</span><span class=p>)</span>
<a id=__codelineno-25-6 name=__codelineno-25-6></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-25-7 name=__codelineno-25-7></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-25-8 name=__codelineno-25-8></a><span class=p>}</span>
<a id=__codelineno-25-9 name=__codelineno-25-9></a>
<a id=__codelineno-25-10 name=__codelineno-25-10></a><span class=c1>// Usage: KSelect.field(SamplePojo::value)</span>
</code></pre></div></table></div><h4 id=predicate-selectors>Predicate selectors<a title="Permanent link" class=headerlink href=#predicate-selectors>¶</a></h4><p>Predicate selectors allow for greater flexibility in matching fields and classes. These use a plural naming convention: <code>fields()</code> and <code>types()</code>.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-26-1>1</a></span>
<span class=normal><a href=#__codelineno-26-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Field</span><span class=o>></span><span class=w> </span><span class=n>fieldPredicate</span><span class=p>)</span>
<a id=__codelineno-26-2 name=__codelineno-26-2></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Class</span><span class=o>&LT?>></span><span class=w> </span><span class=n>classPredicate</span><span class=p>)</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> Selects all fields matching the predicate.<br> <lnum>2</lnum> Selects all types matching the predicate.<br></div><div class=highlight><span class=filename>Examples</span><pre><span></span><code><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>field</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=na>getName</span><span class=p>().</span><span class=na>contains</span><span class=p>(</span><span class=s>"date"</span><span class=p>))</span>
<a href=#__codelineno-27-2 id=__codelineno-27-2 name=__codelineno-27-2></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>klass</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>Collection</span><span class=p>.</span><span class=na>class</span><span class=p>.</span><span class=na>isAssignableFrom</span><span class=p>(</span><span class=n>klass</span><span class=p>))</span>
</code></pre></div><p>Unlike regular selectors, these can match multiple fields or types. For example, they can be used to match all fields declared by a class, or all classes within a package. They can also be used to match a certain type, including its subtypes.<h4 id=convenience-selectors>Convenience selectors<a title="Permanent link" class=headerlink href=#convenience-selectors>¶</a></h4><p>Convenience selectors provide syntactic sugar built on top of regular and predicate selectors.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-28-1>1</a></span>
<span class=normal><a href=#__codelineno-28-2>2</a></span>
<span class=normal><a href=#__codelineno-28-3>3</a></span>
<span class=normal><a href=#__codelineno-28-4>4</a></span>
<span class=normal><a href=#__codelineno-28-5>5</a></span>
<span class=normal><a href=#__codelineno-28-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>GroupableSelector</span><span class=p>...</span><span class=w> </span><span class=n>selectors</span><span class=p>)</span>
<a id=__codelineno-28-2 name=__codelineno-28-2></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>()</span>
<a id=__codelineno-28-3 name=__codelineno-28-3></a><span class=n>Select</span><span class=p>.</span><span class=na>allInts</span><span class=p>()</span>
<a id=__codelineno-28-4 name=__codelineno-28-4></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>()</span>
<a id=__codelineno-28-5 name=__codelineno-28-5></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>()</span>
<a id=__codelineno-28-6 name=__codelineno-28-6></a><span class=n>Select</span><span class=p>.</span><span class=na>root</span><span class=p>()</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> For combining multiple selectors.<br> <lnum>2</lnum> Equivalent to <code>Select.all(String.class)</code>.<br> <lnum>3</lnum> Equivalent to <code>Select.all(Select.all(int.class), Select.all(Integer.class))</code>.<br> <lnum>4</lnum> Builder for constructing <code>Predicate&LTField></code> selectors.<br> <lnum>5</lnum> Builder for constructing <code>Predicate&LTClass&LT?>></code> selectors.<br> <lnum>6</lnum> Selects the root, that is, the object being created.<br></div><div class="admonition info"><p class=admonition-title>The <code>Select.allXxx()</code> methods such as <code>Select.allInts()</code>, are available for all core types.</div><ul><li><strong><code>Select.all(GroupableSelector... selectors)</code></strong></ul><p>This method can be used for grouping multiple selectors, allowing for more concise code as shown below.<div class=highlight><pre><span></span><code><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span>
<a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a><span class=w>    </span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>),</span>
<a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a><span class=w>    </span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"postalCode"</span><span class=p>),</span>
<a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a><span class=w>    </span><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</code></pre></div><ul><li><strong><code>Select.fields()</code></strong> and <strong><code>Select.types()</code></strong></ul><p>These selectors provide a builder API for constructing predicate selectors. For example, the following selector matches <code>Long</code> fields annotated with <code>@Id</code><div class=highlight><pre><span></span><code><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>ofType</span><span class=p>(</span><span class=n>Long</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>annotated</span><span class=p>(</span><span class=n>Id</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</code></pre></div><p>which is equivalent to using the following predicate:<div class=highlight><pre><span></span><code><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>f</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=na>getType</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Long</span><span class=p>.</span><span class=na>class</span><span class=w> </span><span class=o>&&</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=na>getDeclaredAnnotation</span><span class=p>(</span><span class=n>Id</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span>
</code></pre></div><ul><li><strong><code>Select.root()</code></strong></ul><p>This method selects the root object. The following snippet creates nested lists, where the outer list and inner lists have different sizes:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-32-1>1</a></span>
<span class=normal><a href=#__codelineno-32-2>2</a></span>
<span class=normal><a href=#__codelineno-32-3>3</a></span>
<span class=normal><a href=#__codelineno-32-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1></a><span class=n>List</span><span class=o><</span><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>>></span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o><</span><span class=n>List</span><span class=o><</span><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>>>></span><span class=p>()</span><span class=w> </span><span class=p>{})</span>
<a id=__codelineno-32-2 name=__codelineno-32-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>root</span><span class=p>(),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>().</span><span class=na>size</span><span class=p>(</span><span class=n>outerListSize</span><span class=p>))</span>
</span><a id=__codelineno-32-3 name=__codelineno-32-3></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>List</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>().</span><span class=na>size</span><span class=p>(</span><span class=n>innerListSize</span><span class=p>))</span>
<a id=__codelineno-32-4 name=__codelineno-32-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>In this case, <code>Select.all(List.class)</code> matches all lists except the outer list, because <code>Select.root()</code> selector has higher precedence than other selectors.<h4 id=setter-selectors>Setter selectors<a title="Permanent link" class=headerlink href=#setter-selectors>¶</a></h4><div class="admonition info"><p class=admonition-title>Setter selectors are available since version <code>4.0.0</code></div><p>Setter selectors allow targeting setter methods. These selectors can only be used if <a href=#assignment-settings>Method Assignment</a> is enabled.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-33-1>1</a></span>
<span class=normal><a href=#__codelineno-33-2>2</a></span>
<span class=normal><a href=#__codelineno-33-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>methodName</span><span class=p>)</span>
<a id=__codelineno-33-2 name=__codelineno-33-2></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>declaringClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>methodName</span><span class=p>)</span>
<a id=__codelineno-33-3 name=__codelineno-33-3></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>declaringClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>methodName</span><span class=p>,</span><span class=w> </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>parameterType</span><span class=p>)</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> Selects the setter by name, declared in the class being created.<br> <lnum>2</lnum> Selects the setter by name, declared in the specified class.<br> <lnum>3</lnum> Selects the setter by name and parameter type, declared in the specified class (for overloaded methods).<br></div><div class="admonition warning"><p class=admonition-title>Parameter type must be specified for overloaded methods.<p>Omitting the parameter type will lead to undefined behaviour.</div><div class=highlight><span class=filename>Examples</span><pre><span></span><code><a href=#__codelineno-34-1 id=__codelineno-34-1 name=__codelineno-34-1></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"setName"</span><span class=p>)</span>
<a href=#__codelineno-34-2 id=__codelineno-34-2 name=__codelineno-34-2></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"setValue"</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=c1>// Pojo.setValue(String)</span>
<a href=#__codelineno-34-3 id=__codelineno-34-3 name=__codelineno-34-3></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"setValue"</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>   </span><span class=c1>// Pojo.setValue(Long)</span>
</code></pre></div><p>In addition, a setter can be selected using the method reference selector:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-35-1>1</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>SetMethodSelector</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>U</span><span class=o>></span><span class=w> </span><span class=n>methodReference</span><span class=p>)</span>
</code></pre></div></table></div><div class=highlight><span class=filename>Example</span><pre><span></span><code><a href=#__codelineno-36-1 id=__codelineno-36-1 name=__codelineno-36-1></a><span class=n>Select</span><span class=p>.</span><span class=na>setter</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>setName</span><span class=p>)</span>
</code></pre></div><h3 id=selector-precedence>Selector Precedence<a title="Permanent link" class=headerlink href=#selector-precedence>¶</a></h3><p>Selector precedence rules apply when multiple selectors match a field or class:<ul><li>Regular selectors have higher precedence than predicate selectors.<li>Field selectors have higher precedence than type selectors.</ul><p>Consider the following example:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-37-1>1</a></span>
<span class=normal><a href=#__codelineno-37-2>2</a></span>
<span class=normal><a href=#__codelineno-37-3>3</a></span>
<span class=normal><a href=#__codelineno-37-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1></a><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-37-2 name=__codelineno-37-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>(),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-37-3 name=__codelineno-37-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
<a id=__codelineno-37-4 name=__codelineno-37-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This will produce an address object with all strings set to "foo". However, since field selectors have higher precedence, the city will be set to "bar".<p>In the following example, the city will also be set to "bar" because the predicate <code>Select.fields()</code> selector has lower precedence than the regular <code>Select.field()</code> selector:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-38-1>1</a></span>
<span class=normal><a href=#__codelineno-38-2>2</a></span>
<span class=normal><a href=#__codelineno-38-3>3</a></span>
<span class=normal><a href=#__codelineno-38-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1></a><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-38-2 name=__codelineno-38-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-38-3 name=__codelineno-38-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
<a id=__codelineno-38-4 name=__codelineno-38-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=multiple-matching-selectors>Multiple matching selectors<a title="Permanent link" class=headerlink href=#multiple-matching-selectors>¶</a></h4><p>When more than one selector matches a given target, then the last selector wins. This rule applies to both, regular and predicate selectors.<p>In the case of regular selectors, if the two are identical, the last selector simply replaces the first (internally, regular selectors are stored as <code>Map</code> keys).<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-39-1>1</a></span>
<span class=normal><a href=#__codelineno-39-2>2</a></span>
<span class=normal><a href=#__codelineno-39-3>3</a></span>
<span class=normal><a href=#__codelineno-39-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1></a><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-39-2 name=__codelineno-39-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-39-3 name=__codelineno-39-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span><span class=w> </span><span class=c1>// wins!</span>
<a id=__codelineno-39-4 name=__codelineno-39-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Predicate selectors, on the other hand, are stored as a <code>List</code> and evaluated sequentially starting from the last entry.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-40-1>1</a></span>
<span class=normal><a href=#__codelineno-40-2>2</a></span>
<span class=normal><a href=#__codelineno-40-3>3</a></span>
<span class=normal><a href=#__codelineno-40-4>4</a></span>
<span class=normal><a href=#__codelineno-40-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1></a><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-40-2 name=__codelineno-40-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-40-3 name=__codelineno-40-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"city"</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span><span class=w> </span><span class=c1>// wins!</span>
<a id=__codelineno-40-4 name=__codelineno-40-4></a><span class=w>    </span><span class=p>.</span><span class=na>lenient</span><span class=p>()</span>
<a id=__codelineno-40-5 name=__codelineno-40-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>In this particular example, the first entry remains unused, which would cause an unused selector error. Therefore <code>lenient()</code> mode must be enabled to prevent the error (see <a href=#selector-strictness>Selector Strictness</a>).<h3 id=selector-scopes>Selector Scopes<a title="Permanent link" class=headerlink href=#selector-scopes>¶</a></h3><p>Selectors provide the <code>within(Scope... scopes)</code> method for fine-tuning the targets selectors should be applied to. Instancio supports two types of scope:<ul><li>Class-level scope: narrows down a selector to the specified class.<li>Field-level scope: narrows down a selector to the specified field of the target class.<li>Predicate scope: narrows down a selector using a field or class predicate.</ul><p>To illustrate how scopes work we will assume the following structure for the <code>Person</code> class (getters and setters omitted).<div class=highlight><pre><span></span><code><a href=#__codelineno-41-1 id=__codelineno-41-1 name=__codelineno-41-1></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-41-2 id=__codelineno-41-2 name=__codelineno-41-2></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a href=#__codelineno-41-3 id=__codelineno-41-3 name=__codelineno-41-3></a><span class=w>    </span><span class=n>Address</span><span class=w> </span><span class=n>homeAddress</span><span class=p>;</span>
<a href=#__codelineno-41-4 id=__codelineno-41-4 name=__codelineno-41-4></a><span class=w>    </span><span class=n>Address</span><span class=w> </span><span class=n>workAddress</span><span class=p>;</span>
<a href=#__codelineno-41-5 id=__codelineno-41-5 name=__codelineno-41-5></a><span class=p>}</span>
<a href=#__codelineno-41-6 id=__codelineno-41-6 name=__codelineno-41-6></a>
<a href=#__codelineno-41-7 id=__codelineno-41-7 name=__codelineno-41-7></a><span class=kd>class</span> <span class=nc>Address</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-41-8 id=__codelineno-41-8 name=__codelineno-41-8></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>street</span><span class=p>;</span>
<a href=#__codelineno-41-9 id=__codelineno-41-9 name=__codelineno-41-9></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>city</span><span class=p>;</span>
<a href=#__codelineno-41-10 id=__codelineno-41-10 name=__codelineno-41-10></a><span class=w>    </span><span class=n>List</span><span class=o><</span><span class=n>Phone</span><span class=o>></span><span class=w> </span><span class=n>phoneNumbers</span><span class=p>;</span>
<a href=#__codelineno-41-11 id=__codelineno-41-11 name=__codelineno-41-11></a><span class=p>}</span>
<a href=#__codelineno-41-12 id=__codelineno-41-12 name=__codelineno-41-12></a>
<a href=#__codelineno-41-13 id=__codelineno-41-13 name=__codelineno-41-13></a><span class=kd>class</span> <span class=nc>Phone</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-41-14 id=__codelineno-41-14 name=__codelineno-41-14></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>areaCode</span><span class=p>;</span>
<a href=#__codelineno-41-15 id=__codelineno-41-15 name=__codelineno-41-15></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>;</span>
<a href=#__codelineno-41-16 id=__codelineno-41-16 name=__codelineno-41-16></a><span class=p>}</span>
</code></pre></div><p>Note that the <code>Person</code> class has two <code>Address</code> fields. Selecting <code>field(Address::getCity)</code> would target both addresses, <code>homeAddress</code> and <code>workAddress</code>. Without scopes, it would not be possible to set the two cities to different values. Using scopes solves this problem:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Creating scope using toScope() method</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-42-1>1</a></span>
<span class=normal><a href=#__codelineno-42-2>2</a></span>
<span class=normal><a href=#__codelineno-42-3>3</a></span>
<span class=normal><a href=#__codelineno-42-4>4</a></span>
<span class=normal><a href=#__codelineno-42-5>5</a></span>
<span class=normal><a href=#__codelineno-42-6>6</a></span>
<span class=normal><a href=#__codelineno-42-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1></a><span class=n>Scope</span><span class=w> </span><span class=n>homeAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getHomeAddress</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
<a id=__codelineno-42-2 name=__codelineno-42-2></a><span class=n>Scope</span><span class=w> </span><span class=n>workAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getWorkAddress</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
<a id=__codelineno-42-3 name=__codelineno-42-3></a>
<a id=__codelineno-42-4 name=__codelineno-42-4></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-42-5 name=__codelineno-42-5></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>homeAddress</span><span class=p>),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-42-6 name=__codelineno-42-6></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>workAddress</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
<a id=__codelineno-42-7 name=__codelineno-42-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>For more complex class structures, multiple scopes can be specified using <code>within(Scope...)</code> method. When specifying multiple scopes, the order is important: from outermost to innermost scope. Additional examples are provided below.<h4 id=creating-scopes>Creating scopes<a title="Permanent link" class=headerlink href=#creating-scopes>¶</a></h4><p>Scopes can be created using:<ul><li><code>Select.scope()</code> static methods in the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Select.html target=_blank>Select</a> class<li><code>Selector.toScope()</code> method provided by regular selectors<li><code>PredicateSelector.toScope()</code> method provided by predicate selectors</ul><p>The first approach requires specifying the target class and, for field-level scopes, the name of the field:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-43-1>1</a></span>
<span class=normal><a href=#__codelineno-43-2>2</a></span>
<span class=normal><a href=#__codelineno-43-3>3</a></span>
<span class=normal><a href=#__codelineno-43-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>targetClass</span><span class=p>)</span>
<a id=__codelineno-43-2 name=__codelineno-43-2></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>targetClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>field</span><span class=p>)</span>
<a id=__codelineno-43-3 name=__codelineno-43-3></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>GetMethodSelector</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>R</span><span class=o>></span><span class=w> </span><span class=n>methodReference</span><span class=p>)</span>
<a id=__codelineno-43-4 name=__codelineno-43-4></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>PredicateSelector</span><span class=w> </span><span class=n>selector</span><span class=p>)</span>
</code></pre></div></table></div><div class=highlight><span class=filename>Examples</span><pre><span></span><code><a href=#__codelineno-44-1 id=__codelineno-44-1 name=__codelineno-44-1></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a href=#__codelineno-44-2 id=__codelineno-44-2 name=__codelineno-44-2></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"homeAddress"</span><span class=p>);</span>
<a href=#__codelineno-44-3 id=__codelineno-44-3 name=__codelineno-44-3></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getHomeAddress</span><span class=p>);</span>
<a href=#__codelineno-44-4 id=__codelineno-44-4 name=__codelineno-44-4></a><span class=n>Select</span><span class=p>.</span><span class=na>scope</span><span class=p>(</span><span class=n>type</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</code></pre></div><p>The second approach is to create scopes from selectors using the <code>toScope()</code> method.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-45-1>1</a></span>
<span class=normal><a href=#__codelineno-45-2>2</a></span>
<span class=normal><a href=#__codelineno-45-3>3</a></span>
<span class=normal><a href=#__codelineno-45-4>4</a></span>
<span class=normal><a href=#__codelineno-45-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>targetClass</span><span class=p>).</span><span class=na>toScope</span><span class=p>()</span>
<a id=__codelineno-45-2 name=__codelineno-45-2></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>targetClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>field</span><span class=p>).</span><span class=na>toScope</span><span class=p>()</span>
<a id=__codelineno-45-3 name=__codelineno-45-3></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>GetMethodSelector</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>R</span><span class=o>></span><span class=w> </span><span class=n>methodReference</span><span class=p>).</span><span class=na>toScope</span><span class=p>()</span>
<a id=__codelineno-45-4 name=__codelineno-45-4></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Field</span><span class=o>></span><span class=w> </span><span class=n>predicate</span><span class=p>).</span><span class=na>toScope</span><span class=p>()</span>
<a id=__codelineno-45-5 name=__codelineno-45-5></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Class</span><span class=o>></span><span class=w> </span><span class=n>predicate</span><span class=p>).</span><span class=na>toScope</span><span class=p>()</span>
</code></pre></div></table></div><div class=highlight><span class=filename>Examples</span><pre><span></span><code><a href=#__codelineno-46-1 id=__codelineno-46-1 name=__codelineno-46-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
<a href=#__codelineno-46-2 id=__codelineno-46-2 name=__codelineno-46-2></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"homeAddress"</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
<a href=#__codelineno-46-3 id=__codelineno-46-3 name=__codelineno-46-3></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getHomeAddress</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
<a href=#__codelineno-46-4 id=__codelineno-46-4 name=__codelineno-46-4></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>field</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=na>getName</span><span class=p>().</span><span class=na>equals</span><span class=p>(</span><span class=s>"id"</span><span class=p>)).</span><span class=na>toScope</span><span class=p>();</span>
<a href=#__codelineno-46-5 id=__codelineno-46-5 name=__codelineno-46-5></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>type</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>toScope</span><span class=p>();</span>
</code></pre></div><h4 id=examples-of-using-scopes>Examples of using scopes<a title="Permanent link" class=headerlink href=#examples-of-using-scopes>¶</a></h4><p>To start off, without using scopes we can set all strings to the same value. For example, the following snippet will set each string field of each class to "foo".<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Set all strings to "Foo"</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-47-1>1</a></span>
<span class=normal><a href=#__codelineno-47-2>2</a></span>
<span class=normal><a href=#__codelineno-47-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-47-2 name=__codelineno-47-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>(),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-47-3 name=__codelineno-47-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Using <code>within()</code> we can narrow down the scope of the <code>allStrings()</code> selector as shown in the following examples. For brevity, <code>Instancio.of(Person.class)</code> is omitted.<div class=highlight><span class=filename>Set all strings in all Address instances; this includes Phone instances as they are contained within addresses</span><pre><span></span><code><a href=#__codelineno-48-1 id=__codelineno-48-1 name=__codelineno-48-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</code></pre></div><div class=highlight><span class=filename>Set all strings contained within lists (matches all Phone instances in our example)</span><pre><span></span><code><a href=#__codelineno-49-1 id=__codelineno-49-1 name=__codelineno-49-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>List</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</code></pre></div><div class=highlight><span class=filename>Set all strings in Person.homeAddress address object</span><pre><span></span><code><a href=#__codelineno-50-1 id=__codelineno-50-1 name=__codelineno-50-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"homeAddress"</span><span class=p>))</span>
</code></pre></div><p>Using <code>within()</code> also allows specifying multiple scopes. Scopes must be specified top-down, starting from the outermost to the innermost.<div class=highlight><span class=filename>Set all strings of all Phone instances contained within Person.workAddress field</span><pre><span></span><code><a href=#__codelineno-51-1 id=__codelineno-51-1 name=__codelineno-51-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getWorkAddress</span><span class=p>),</span><span class=w> </span><span class=n>scope</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</code></pre></div><p>The <code>Person.workAddress</code> object contains a list of phones, therefore <code>Person.workAddress</code> is the outermost scope and is specified first. <code>Phone</code> class is the innermost scope and is specified last.<p>The final examples illustrate the creation of scope objects from regular selectors. The following examples are equivalent to each other:<div class=highlight><span class=filename>Equivalent ways of creating scopes based on field</span><pre><span></span><code><a href=#__codelineno-52-1 id=__codelineno-52-1 name=__codelineno-52-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"homeAddress"</span><span class=p>))</span>
<a href=#__codelineno-52-2 id=__codelineno-52-2 name=__codelineno-52-2></a>
<a href=#__codelineno-52-3 id=__codelineno-52-3 name=__codelineno-52-3></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getHomeAddress</span><span class=p>))</span>
<a href=#__codelineno-52-4 id=__codelineno-52-4 name=__codelineno-52-4></a>
<a href=#__codelineno-52-5 id=__codelineno-52-5 name=__codelineno-52-5></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"homeAddress"</span><span class=p>).</span><span class=na>toScope</span><span class=p>())</span>
<a href=#__codelineno-52-6 id=__codelineno-52-6 name=__codelineno-52-6></a>
<a href=#__codelineno-52-7 id=__codelineno-52-7 name=__codelineno-52-7></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getHomeAddress</span><span class=p>).</span><span class=na>toScope</span><span class=p>())</span>
</code></pre></div><div class=highlight><span class=filename>Equivalent ways of creating scopes based on class</span><pre><span></span><code><a href=#__codelineno-53-1 id=__codelineno-53-1 name=__codelineno-53-1></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a href=#__codelineno-53-2 id=__codelineno-53-2 name=__codelineno-53-2></a>
<a href=#__codelineno-53-3 id=__codelineno-53-3 name=__codelineno-53-3></a><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>toScope</span><span class=p>())</span>
</code></pre></div><h3 id=selector-depth>Selector Depth<a title="Permanent link" class=headerlink href=#selector-depth>¶</a></h3><p>Regular and predicate selectors can also be narrowed down by specifying target's depth. Both selector types allow specifying depth as an integer value:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-54-1>1</a></span>
<span class=normal><a href=#__codelineno-54-2>2</a></span>
<span class=normal><a href=#__codelineno-54-3>3</a></span>
<span class=normal><a href=#__codelineno-54-4>4</a></span>
<span class=normal><a href=#__codelineno-54-5>5</a></span>
<span class=normal><a href=#__codelineno-54-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>targetClass</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>depth</span><span class=p>)</span>
<a id=__codelineno-54-2 name=__codelineno-54-2></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>targetClass</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>field</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>depth</span><span class=p>)</span>
<a id=__codelineno-54-3 name=__codelineno-54-3></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>GetMethodSelector</span><span class=o><</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>R</span><span class=o>></span><span class=w> </span><span class=n>methodReference</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>depth</span><span class=p>)</span>
<a id=__codelineno-54-4 name=__codelineno-54-4></a>
<a id=__codelineno-54-5 name=__codelineno-54-5></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Field</span><span class=o>></span><span class=w> </span><span class=n>fieldPredicate</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>depth</span><span class=p>)</span>
<a id=__codelineno-54-6 name=__codelineno-54-6></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Class</span><span class=o>></span><span class=w> </span><span class=n>typePredicate</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>depth</span><span class=p>)</span>
</code></pre></div></table></div><p>In addition, predicate selectors also support specifying depth as a predicate:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-55-1>1</a></span>
<span class=normal><a href=#__codelineno-55-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1></a><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Field</span><span class=o>></span><span class=w> </span><span class=n>fieldPredicate</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>depthPredicate</span><span class=p>)</span>
<a id=__codelineno-55-2 name=__codelineno-55-2></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Class</span><span class=o>></span><span class=w> </span><span class=n>typePredicate</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=n>Predicate</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>depthPredicate</span><span class=p>)</span>
</code></pre></div></table></div><p>We will use the following class structure for the examples:<div class=highlight><pre><span></span><code><a href=#__codelineno-56-1 id=__codelineno-56-1 name=__codelineno-56-1></a><span class=n>Depth</span><span class=w>       </span><span class=n>Class</span>
<a href=#__codelineno-56-2 id=__codelineno-56-2 name=__codelineno-56-2></a><span class=o>----------------------</span>
<a href=#__codelineno-56-3 id=__codelineno-56-3 name=__codelineno-56-3></a><span class=w>  </span><span class=mi>0</span><span class=w>         </span><span class=n>Root</span>
<a href=#__codelineno-56-4 id=__codelineno-56-4 name=__codelineno-56-4></a><span class=w>            </span><span class=o>/</span><span class=w>  </span><span class=err>\</span>
<a href=#__codelineno-56-5 id=__codelineno-56-5 name=__codelineno-56-5></a><span class=w>  </span><span class=mi>1</span><span class=w>        </span><span class=n>A</span><span class=w>    </span><span class=n>B</span>
<a href=#__codelineno-56-6 id=__codelineno-56-6 name=__codelineno-56-6></a><span class=w>              </span><span class=o>/</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>\</span>
<a href=#__codelineno-56-7 id=__codelineno-56-7 name=__codelineno-56-7></a><span class=w>  </span><span class=mi>2</span><span class=w>          </span><span class=n>A</span><span class=w>  </span><span class=n>A</span><span class=w>  </span><span class=n>C</span>
<a href=#__codelineno-56-8 id=__codelineno-56-8 name=__codelineno-56-8></a><span class=w>                  </span><span class=o>/</span><span class=w> </span><span class=err>\</span>
<a href=#__codelineno-56-9 id=__codelineno-56-9 name=__codelineno-56-9></a><span class=w>  </span><span class=mi>3</span><span class=w>              </span><span class=n>A</span><span class=w>   </span><span class=n>D</span>
<a href=#__codelineno-56-10 id=__codelineno-56-10 name=__codelineno-56-10></a><span class=w>                      </span><span class=err>\</span>
<a href=#__codelineno-56-11 id=__codelineno-56-11 name=__codelineno-56-11></a><span class=w>  </span><span class=mi>4</span><span class=w>                    </span><span class=n>A</span>
</code></pre></div><p>where the classes are defined as:<div class=highlight><pre><span></span><code><a href=#__codelineno-57-1 id=__codelineno-57-1 name=__codelineno-57-1></a><span class=kd>record</span> <span class=nc>Root</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>B</span><span class=w> </span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-57-2 id=__codelineno-57-2 name=__codelineno-57-2></a><span class=kd>record</span> <span class=nc>A</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-57-3 id=__codelineno-57-3 name=__codelineno-57-3></a><span class=kd>record</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a1</span><span class=p>,</span><span class=w> </span><span class=n>A</span><span class=w> </span><span class=n>a2</span><span class=p>,</span><span class=w> </span><span class=n>C</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-57-4 id=__codelineno-57-4 name=__codelineno-57-4></a><span class=kd>record</span> <span class=nc>C</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>D</span><span class=w> </span><span class=n>d</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-57-5 id=__codelineno-57-5 name=__codelineno-57-5></a><span class=kd>record</span> <span class=nc>D</span><span class=p>(</span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div><p>In the first few examples, we will target class <code>A</code> at different levels:<div class=highlight><span class=filename>Select the <code>A</code> at depth 1</span><pre><span></span><code><a href=#__codelineno-58-1 id=__codelineno-58-1 name=__codelineno-58-1></a><span class=n>Root</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Root</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-58-2 id=__codelineno-58-2 name=__codelineno-58-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>A</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>A</span><span class=p>(</span><span class=s>"Hello!"</span><span class=p>))</span>
<a href=#__codelineno-58-3 id=__codelineno-58-3 name=__codelineno-58-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a href=#__codelineno-58-4 id=__codelineno-58-4 name=__codelineno-58-4></a>
<a href=#__codelineno-58-5 id=__codelineno-58-5 name=__codelineno-58-5></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"Hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"BRHD"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"AVBMJRP"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"PZK"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"AQVXCT"</span><span class=o>]]]]]</span>
</code></pre></div><p>Similar to the above, but omitting <code>Instancio.of()</code> for brevity:<div class=highlight><span class=filename>Select the two <code>A</code> nodes at depth 2</span><pre><span></span><code><a href=#__codelineno-59-1 id=__codelineno-59-1 name=__codelineno-59-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>A</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<a href=#__codelineno-59-2 id=__codelineno-59-2 name=__codelineno-59-2></a>
<a href=#__codelineno-59-3 id=__codelineno-59-3 name=__codelineno-59-3></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"FNPI"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"Hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"Hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"IDLOM"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"QXPW"</span><span class=o>]]]]]</span>
</code></pre></div><div class=highlight><span class=filename>Select the <code>A</code> nodes at depths 3 and 4 (and beyond, if any)</span><pre><span></span><code><a href=#__codelineno-60-1 id=__codelineno-60-1 name=__codelineno-60-1></a><span class=n>Select</span><span class=p>.</span><span class=na>types</span><span class=p>().</span><span class=na>of</span><span class=p>(</span><span class=n>A</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=n>depth</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>depth</span><span class=w> </span><span class=o>></span><span class=w> </span><span class=mi>2</span><span class=p>)</span>
<a href=#__codelineno-60-2 id=__codelineno-60-2 name=__codelineno-60-2></a>
<a href=#__codelineno-60-3 id=__codelineno-60-3 name=__codelineno-60-3></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"MWAASZU"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"ODSRTG"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"TDG"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]]]]]</span>
</code></pre></div><div class=highlight><span class=filename>Select all (four) <code>A</code> nodes reachable from <code>B</code></span><pre><span></span><code><a href=#__codelineno-61-1 id=__codelineno-61-1 name=__codelineno-61-1></a><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>A</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>B</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a href=#__codelineno-61-2 id=__codelineno-61-2 name=__codelineno-61-2></a>
<a href=#__codelineno-61-3 id=__codelineno-61-3 name=__codelineno-61-3></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"GNDUXU"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]]]]]</span>
</code></pre></div><p>The next example is targeting <code>allStrings()</code>, therefore the value is being set to <code>"Hello!"</code> instead of <code>new A("Hello!")</code>. This snippet targets all strings that are reachable from class <code>A</code>, but only if class <code>A</code> is at depth <code>3</code> or greater.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Select all Strings reachable from <code>A</code> nodes at depth 3 or greater</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-62-1>1</a></span>
<span class=normal><a href=#__codelineno-62-2>2</a></span>
<span class=normal><a href=#__codelineno-62-3>3</a></span>
<span class=normal><a href=#__codelineno-62-4>4</a></span>
<span class=normal><a href=#__codelineno-62-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1></a><span class=n>Root</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Root</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-62-2 name=__codelineno-62-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>allStrings</span><span class=p>().</span><span class=na>within</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>A</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>atDepth</span><span class=p>(</span><span class=mi>3</span><span class=p>).</span><span class=na>toScope</span><span class=p>()),</span><span class=w> </span><span class=s>"Hello!"</span><span class=p>)</span>
</span><a id=__codelineno-62-3 name=__codelineno-62-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-62-4 name=__codelineno-62-4></a>
<a id=__codelineno-62-5 name=__codelineno-62-5></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"SERWVQV"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"PTF"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"CHZP"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]]]]]</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> When a selector <code>atDepth(N)</code> is converted to <code>toScope()</code>, the selection matches any target at depth <code>N</code> or greater.</div><p>The final example is targeting the field <code>A.value</code> but only within the <code>a1</code> field of class <code>B</code>:<div class=highlight><span class=filename>Select <code>A.value</code> of the <code>a1</code> field</span><pre><span></span><code><a href=#__codelineno-63-1 id=__codelineno-63-1 name=__codelineno-63-1></a><span class=n>Select</span><span class=p>.</span><span class=na>field</span><span class=p>(</span><span class=n>A</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>B</span><span class=p>::</span><span class=n>a1</span><span class=p>).</span><span class=na>toScope</span><span class=p>())</span>
<a href=#__codelineno-63-2 id=__codelineno-63-2 name=__codelineno-63-2></a>
<a href=#__codelineno-63-3 id=__codelineno-63-3 name=__codelineno-63-3></a><span class=o>=></span><span class=w> </span><span class=n>Root</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"DBOS"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>=</span><span class=n>B</span><span class=o>[</span><span class=n>a1</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"hello!"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>a2</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"KFBWJL"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=o>=</span><span class=n>C</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"VLTNXF"</span><span class=o>]</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=o>=</span><span class=n>D</span><span class=o>[</span><span class=n>a</span><span class=o>=</span><span class=n>A</span><span class=o>[</span><span class=n>value</span><span class=o>=</span><span class=s>"CDV"</span><span class=o>]]]]]</span>
</code></pre></div><h3 id=selector-strictness>Selector Strictness<a title="Permanent link" class=headerlink href=#selector-strictness>¶</a></h3><h4 id=strict-mode>Strict Mode<a title="Permanent link" class=headerlink href=#strict-mode>¶</a></h4><p>Instancio supports two modes: strict and lenient, an idea inspired by Mockito's highly useful strict stubbing feature.<p>In strict mode, unused selectors will trigger an error. In lenient mode, unused selectors are simply ignored. By default, Instancio runs in strict mode. This is done for the following reasons:<ul><li>to eliminate errors in data setup<li>to simplify fixing tests after refactoring<li>to keep test code clean and maintainable</ul><h5 id=eliminate-errors-in-data-setup>Eliminate errors in data setup<a title="Permanent link" class=headerlink href=#eliminate-errors-in-data-setup>¶</a></h5><p>An unused selector could indicate an error in the data setup. As an example, consider populating the following POJO:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-64-1>1</a></span>
<span class=normal><a href=#__codelineno-64-2>2</a></span>
<span class=normal><a href=#__codelineno-64-3>3</a></span>
<span class=normal><a href=#__codelineno-64-4>4</a></span>
<span class=normal><a href=#__codelineno-64-5>5</a></span>
<span class=normal><a href=#__codelineno-64-6>6</a></span>
<span class=normal><a href=#__codelineno-64-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1></a><span class=kd>class</span> <span class=nc>SamplePojo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-64-2 name=__codelineno-64-2></a><span class=hll><span class=w>    </span><span class=n>SortedSet</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>values</span><span class=p>;</span>
</span><a id=__codelineno-64-3 name=__codelineno-64-3></a><span class=p>}</span>
<a id=__codelineno-64-4 name=__codelineno-64-4></a>
<a id=__codelineno-64-5 name=__codelineno-64-5></a><span class=n>SamplePojo</span><span class=w> </span><span class=n>pojo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>SamplePojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-64-6 name=__codelineno-64-6></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>all</span><span class=p>(</span><span class=n>Set</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>().</span><span class=na>size</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
</span><a id=__codelineno-64-7 name=__codelineno-64-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>At first glance, we might expect a <code>Set</code> of size 10 to be generated. However, since the field is declared as a <code>SortedSet</code> and the class selector targets <code>Set</code>, the <code>generate()</code> method will not be applied.<p>Since <code>Select.all(Set.class)</code> did not match any target, Instancio produces an error:<div class=highlight><pre><span></span><code><a href=#__codelineno-65-1 id=__codelineno-65-1 name=__codelineno-65-1></a>org.instancio.exception.UnusedSelectorException:
<a href=#__codelineno-65-2 id=__codelineno-65-2 name=__codelineno-65-2></a>
<a href=#__codelineno-65-3 id=__codelineno-65-3 name=__codelineno-65-3></a> -> Unused selectors in generate(), set(), or supply():
<a href=#__codelineno-65-4 id=__codelineno-65-4 name=__codelineno-65-4></a> 1: all(Set)
</code></pre></div><p>Without being aware of this detail, it is easy to make this kind of error and face unexpected results even with a simple class like the above. It gets trickier when generating more complex classes. Strict mode helps reduce this type of error.<h5 id=simplify-fixing-tests-after-refactoring>Simplify fixing tests after refactoring<a title="Permanent link" class=headerlink href=#simplify-fixing-tests-after-refactoring>¶</a></h5><p>Refactoring always causes tests to break to some degree. As classes and fields get reorganised and renamed, tests need to be updated to reflect the changes. Assuming there are existing tests utilising Instancio, running tests in strict mode will quickly highlight any problems in data setup caused by refactoring.<h5 id=keep-test-code-clean-and-maintainable>Keep test code clean and maintainable<a title="Permanent link" class=headerlink href=#keep-test-code-clean-and-maintainable>¶</a></h5><p>Last but not least, it is important to keep tests clean and maintainable. Test code should be treated with as much care as production code. Keeping the tests clean and concise makes them easier to maintain.<h4 id=lenient-mode>Lenient Mode<a title="Permanent link" class=headerlink href=#lenient-mode>¶</a></h4><p>While strict mode is highly recommended, Instancio provides a few options to disable checking for unused selectors. The following are the possible options, with the least recommended last:<ol><li>At selector level, by marking an individual selector as lenient<li>At object level, by treating all selectors as lenient<li>Via <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a><li>Globally via <code>instancio.properties</code></ol><p>The first option is shown below, where the selector is marked as <code>lenient()</code>:<div class=highlight><span class=filename>Marking an individual selector as lenient</span><pre><span></span><code><a href=#__codelineno-66-1 id=__codelineno-66-1 name=__codelineno-66-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-66-2 id=__codelineno-66-2 name=__codelineno-66-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"someFieldThatMayNotExist"</span><span class=p>).</span><span class=na>lenient</span><span class=p>(),</span><span class=w> </span><span class=s>"some value"</span><span class=p>)</span>
<a href=#__codelineno-66-3 id=__codelineno-66-3 name=__codelineno-66-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><p>The second option is to enable lenient mode for all selectors:<div class=highlight><span class=filename>Setting lenient mode using the builder API</span><pre><span></span><code><a href=#__codelineno-67-1 id=__codelineno-67-1 name=__codelineno-67-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-67-2 id=__codelineno-67-2 name=__codelineno-67-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"someFieldThatMayNotExist"</span><span class=p>),</span><span class=w> </span><span class=s>"some value"</span><span class=p>)</span>
<a href=#__codelineno-67-3 id=__codelineno-67-3 name=__codelineno-67-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Select</span><span class=p>.</span><span class=na>fields</span><span class=p>().</span><span class=na>named</span><span class=p>(</span><span class=s>"anotherFieldThatMayNotExist"</span><span class=p>),</span><span class=w> </span><span class=s>"another value"</span><span class=p>)</span>
<a href=#__codelineno-67-4 id=__codelineno-67-4 name=__codelineno-67-4></a><span class=w>    </span><span class=p>.</span><span class=na>lenient</span><span class=p>()</span>
<a href=#__codelineno-67-5 id=__codelineno-67-5 name=__codelineno-67-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><p>Alternatively, lenient mode can be enabled using <code>Settings</code>:<div class=highlight><span class=filename>Setting lenient mode using <code>Settings</code></span><pre><span></span><code><a href=#__codelineno-68-1 id=__codelineno-68-1 name=__codelineno-68-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a href=#__codelineno-68-2 id=__codelineno-68-2 name=__codelineno-68-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>MODE</span><span class=p>,</span><span class=w> </span><span class=n>Mode</span><span class=p>.</span><span class=na>LENIENT</span><span class=p>);</span>
<a href=#__codelineno-68-3 id=__codelineno-68-3 name=__codelineno-68-3></a>
<a href=#__codelineno-68-4 id=__codelineno-68-4 name=__codelineno-68-4></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-68-5 id=__codelineno-68-5 name=__codelineno-68-5></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a href=#__codelineno-68-6 id=__codelineno-68-6 name=__codelineno-68-6></a><span class=w>    </span><span class=c1>// snip... same selectors as above</span>
<a href=#__codelineno-68-7 id=__codelineno-68-7 name=__codelineno-68-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><p>Lastly, lenient mode can also be enabled globally using <a href=#overriding-settings-using-a-properties-file><code>instancio.properties</code></a>. This is the least recommended option.<div class=highlight><span class=filename>Setting lenient mode using <code>instancio.properties</code></span><pre><span></span><code><a href=#__codelineno-69-1 id=__codelineno-69-1 name=__codelineno-69-1></a><span class=n>mode</span><span class=o>=</span><span class=n>LENIENT</span>
</code></pre></div><h2 id=customising-objects>Customising Objects<a title="Permanent link" class=headerlink href=#customising-objects>¶</a></h2><p>Properties of an object created by Instancio can be customised using<ul><li><a href=#using-generate><code>generate()</code></a><li><a href=#using-set><code>set()</code></a><li><a href=#using-supply><code>supply()</code></a></ul><p>methods defined in the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html target=_blank>InstancioApi</a> class.<div class="admonition info"><p class=admonition-title>For brevity, the following examples assume a static import for selectors <code>import static org.instancio.Select.*</code></div><h3 id=using-generate>Using <code>generate()</code><a title="Permanent link" class=headerlink href=#using-generate>¶</a></h3><p>The <code>generate()</code> method provides access to built-in generators for core types from the JDK, such as strings, numeric types, dates, arrays, collections, and so on. It allows modifying generation parameters for these types in order to fine-tune the data. The usage is shown in the following example, where the <code>gen</code> parameter (of type <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generators/Generators.html target=_blank>Generators</a>) exposes the available generators to simplify their discovery using IDE auto-completion.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example of using generate()</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-70-1>1</a></span>
<span class=normal><a href=#__codelineno-70-2>2</a></span>
<span class=normal><a href=#__codelineno-70-3>3</a></span>
<span class=normal><a href=#__codelineno-70-4>4</a></span>
<span class=normal><a href=#__codelineno-70-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-70-2 name=__codelineno-70-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"age"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>ints</span><span class=p>().</span><span class=na>range</span><span class=p>(</span><span class=mi>18</span><span class=p>,</span><span class=w> </span><span class=mi>65</span><span class=p>))</span>
<a id=__codelineno-70-3 name=__codelineno-70-3></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"pets"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>array</span><span class=p>().</span><span class=na>length</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<a id=__codelineno-70-4 name=__codelineno-70-4></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"number"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>text</span><span class=p>().</span><span class=na>pattern</span><span class=p>(</span><span class=s>"#d#d#d-#d#d-#d#d"</span><span class=p>))</span>
<a id=__codelineno-70-5 name=__codelineno-70-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Below is another example of customising a <code>Person</code>. For instance, if the <code>Person</code> class has a field <code>List&LTPhone></code>, by default Instancio would use <code>ArrayList</code> as the implementation. Using the collection generator, this can be overridden by specifying the type explicitly:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: customising a collection</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-71-1>1</a></span>
<span class=normal><a href=#__codelineno-71-2>2</a></span>
<span class=normal><a href=#__codelineno-71-3>3</a></span>
<span class=normal><a href=#__codelineno-71-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-71-2 name=__codelineno-71-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"phoneNumbers"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>().</span><span class=na>minSize</span><span class=p>(</span><span class=mi>3</span><span class=p>).</span><span class=na>subtype</span><span class=p>(</span><span class=n>LinkedList</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-71-3 name=__codelineno-71-3></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"countryCode"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"+33"</span><span class=p>,</span><span class=w> </span><span class=s>"+39"</span><span class=p>,</span><span class=w> </span><span class=s>"+44"</span><span class=p>,</span><span class=w> </span><span class=s>"+49"</span><span class=p>))</span>
<a id=__codelineno-71-4 name=__codelineno-71-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Each generator provides methods applicable to the type it generates, for example:<ul><li><code>gen.string().minLength(3).allowEmpty().nullable()</code><li><code>gen.map().size(5).nullableValues().subtype(TreeMap.class)</code><li><code>gen.temporal().localDate().future()</code><li><code>gen.longs().min(Long.MIN_VALUE)</code><li><code>gen.enumOf(MyEnum.class).excluding(MyEnum.FOO, MyEnum.BAR)</code></ul><div class="admonition info"><p class=admonition-title>See <a href=#built-in-generators>Built-in Generators</a> for a list of available generators</div><p>In addition, most generators can also map values to a different type. For example, the following returns generated values as Strings:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-72-1>1</a></span>
<span class=normal><a href=#__codelineno-72-2>2</a></span>
<span class=normal><a href=#__codelineno-72-3>3</a></span>
<span class=normal><a href=#__codelineno-72-4>4</a></span>
<span class=normal><a href=#__codelineno-72-5>5</a></span>
<span class=normal><a href=#__codelineno-72-6>6</a></span>
<span class=normal><a href=#__codelineno-72-7>7</a></span>
<span class=normal><a href=#__codelineno-72-8>8</a></span>
<span class=normal><a href=#__codelineno-72-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1></a><span class=kd>class</span> <span class=nc>Foo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-72-2 name=__codelineno-72-2></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>dateString</span><span class=p>;</span>
<a id=__codelineno-72-3 name=__codelineno-72-3></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>enumString</span><span class=p>;</span>
<a id=__codelineno-72-4 name=__codelineno-72-4></a><span class=p>}</span>
<a id=__codelineno-72-5 name=__codelineno-72-5></a>
<a id=__codelineno-72-6 name=__codelineno-72-6></a><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-72-7 name=__codelineno-72-7></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"dateString"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>temporal</span><span class=p>().</span><span class=na>localDate</span><span class=p>().</span><span class=na>past</span><span class=p>().</span><span class=na>asString</span><span class=p>())</span>
<a id=__codelineno-72-8 name=__codelineno-72-8></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"enumString"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>enumOf</span><span class=p>(</span><span class=n>MyEnum</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>as</span><span class=p>(</span><span class=n>e</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=na>name</span><span class=p>().</span><span class=na>toUpperCase</span><span class=p>()))</span>
<a id=__codelineno-72-9 name=__codelineno-72-9></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h3 id=using-set>Using <code>set()</code><a title="Permanent link" class=headerlink href=#using-set>¶</a></h3><p>The <code>set()</code> method can be used for setting a static value to selected targets, just like a regular setter method:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-73-1>1</a></span>
<span class=normal><a href=#__codelineno-73-2>2</a></span>
<span class=normal><a href=#__codelineno-73-3>3</a></span>
<span class=normal><a href=#__codelineno-73-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-73-2 name=__codelineno-73-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>::</span><span class=n>getCountryCode</span><span class=p>),</span><span class=w> </span><span class=s>"+1"</span><span class=p>)</span>
<a id=__codelineno-73-3 name=__codelineno-73-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span>
<a id=__codelineno-73-4 name=__codelineno-73-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>However, unlike a regular set method that can only be invoked on a single object, the above will set <code>countryCode</code> to "+1" on <em>all</em> generated instances of <code>Phone</code> class. Assuming the <code>Person</code> class contains a <code>List&LTPhone></code>, they will all have the specified country code. Similarly, all <code>LocalDateTime</code> values will be set to the same instance of <code>now()</code>.<h3 id=using-supply>Using <code>supply()</code><a title="Permanent link" class=headerlink href=#using-supply>¶</a></h3><p>The <code>supply()</code> method has two variants:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-74-1>1</a></span>
<span class=normal><a href=#__codelineno-74-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1></a><span class=n>supply</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>selector</span><span class=p>,</span><span class=w> </span><span class=n>Supplier</span><span class=o><</span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>)</span>
<a id=__codelineno-74-2 name=__codelineno-74-2></a><span class=n>supply</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>selector</span><span class=p>,</span><span class=w> </span><span class=n>Generator</span><span class=o><</span><span class=n>V</span><span class=o>></span><span class=w> </span><span class=n>generator</span><span class=p>)</span>
</code></pre></div></table></div><p>The first accepts a <code>java.util.function.Supplier</code> and is for supplying <em>non-random</em> values. The second accepts an Instancio <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/Generator.html target=_blank>Generator</a> (a functional interface) and can be used for supplying <em>random</em> values.<h4 id=using-supply-to-provide-non-random-values>Using supply() to provide <em>non-random</em> values<a title="Permanent link" class=headerlink href=#using-supply-to-provide-non-random-values>¶</a></h4><p>The following is another example of setting all <code>LocalDateTime</code> instances to <code>now()</code>.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-75-1>1</a></span>
<span class=normal><a href=#__codelineno-75-2>2</a></span>
<span class=normal><a href=#__codelineno-75-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-75-2 name=__codelineno-75-2></a><span class=w>    </span><span class=p>.</span><span class=na>supply</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span>
<a id=__codelineno-75-3 name=__codelineno-75-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Unlike the earlier example using <code>set()</code>, this will assign a new instance for each <code>LocalDateTime</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-76-1>1</a></span>
<span class=normal><a href=#__codelineno-76-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1></a><span class=n>set</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span><span class=w>        </span><span class=c1>// reuse the same instance for all dates</span>
<a id=__codelineno-76-2 name=__codelineno-76-2></a><span class=n>supply</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDatime</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span><span class=w> </span><span class=c1>// create a new instance for each date</span>
</code></pre></div></table></div><h4 id=using-supply-to-provide-random-values>Using supply() to provide <em>random</em> values<a title="Permanent link" class=headerlink href=#using-supply-to-provide-random-values>¶</a></h4><p>The second variant of the <code>supply()</code> method can be used for supplying random values and objects. This method takes a <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/Generator.html target=_blank>Generator</a> as an argument, which is a functional interface with the following signature:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-77-1>1</a></span>
<span class=normal><a href=#__codelineno-77-2>2</a></span>
<span class=normal><a href=#__codelineno-77-3>3</a></span>
<span class=normal><a href=#__codelineno-77-4>4</a></span>
<span class=normal><a href=#__codelineno-77-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1></a><span class=kn>import</span><span class=w> </span><span class=nn>org.instancio.Random</span><span class=p>;</span>
<a id=__codelineno-77-2 name=__codelineno-77-2></a>
<a id=__codelineno-77-3 name=__codelineno-77-3></a><span class=kd>interface</span> <span class=nc>Generator</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-77-4 name=__codelineno-77-4></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>);</span>
<a id=__codelineno-77-5 name=__codelineno-77-5></a><span class=p>}</span>
</code></pre></div></table></div><p>Using the provided <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Random.html target=_blank>Random</a> instance ensures that generated objects are reproducible. Since <code>Generator</code> is a functional interface it can be specified as a lambda expression:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-78-1>1</a></span>
<span class=normal><a href=#__codelineno-78-2>2</a></span>
<span class=normal><a href=#__codelineno-78-3>3</a></span>
<span class=normal><a href=#__codelineno-78-4>4</a></span>
<span class=normal><a href=#__codelineno-78-5>5</a></span>
<span class=normal><a href=#__codelineno-78-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-78-2 name=__codelineno-78-2></a><span class=w>        </span><span class=p>.</span><span class=na>supply</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>random</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>Phone</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span>
<a id=__codelineno-78-3 name=__codelineno-78-3></a><span class=w>                </span><span class=p>.</span><span class=na>countryCode</span><span class=p>(</span><span class=n>random</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"+1"</span><span class=p>,</span><span class=w> </span><span class=s>"+52"</span><span class=p>))</span>
<a id=__codelineno-78-4 name=__codelineno-78-4></a><span class=w>                </span><span class=p>.</span><span class=na>number</span><span class=p>(</span><span class=n>random</span><span class=p>.</span><span class=na>digits</span><span class=p>(</span><span class=mi>7</span><span class=p>))</span>
<a id=__codelineno-78-5 name=__codelineno-78-5></a><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>())</span>
<a id=__codelineno-78-6 name=__codelineno-78-6></a><span class=w>        </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Generators can be used for generating simple value types as well as building complex objects. They are described in more detail in the <a href=#custom-generators>Custom Generators</a> section.<hr><h4 id=summary-of-methods-for-customising-objects>Summary of methods for customising objects<a title="Permanent link" class=headerlink href=#summary-of-methods-for-customising-objects>¶</a></h4><p><strong>Methods</strong> <code>set(TargetSelector, Object)</code> and <code>supply(TargetSelector, Supplier)</code> are for supplying objects <em>as is</em>. The provided objects are treated as read-only by the engine. The behaviour of these methods cannot be customised.<ul><li>matching selectors will not be applied<li>the engine will not modify or populate any fields of the supplied object<li>callbacks are <em>not</em> invoked on objects provided by these methods</ul><p><strong>Method</strong> <code>supply(TargetSelector, Generator)</code> is for creating objects using custom <code>Generator</code> implementations. This method offers configurable behaviour via the <code>AfterGenerate</code> hint. By default, the hint is set to <code>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</code>, which implies:<ul><li>matching selectors will be applied<li>the engine will populate <code>null</code> fields and primitive fields containing default values</ul><p>The default value of the <code>AfterGenerate</code> hint can be overridden using <code>instancio.properties</code> and <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a>.<div class="admonition info"><p class=admonition-title>Info<p>Callbacks are always invoked on objects created by generators regardless of <code>AfterGenerate</code> value.</div><p><strong>Method</strong> <code>generate(TargetSelector, GeneratorSpecProvider)</code> is for customising objects created by internal generators. Such objects include value types (numbers, strings, dates) and data structures (collections, arrays).<ul><li>matching selectors are <strong>always</strong> applied<li>matching callbacks are <strong>always</strong> invoked</ul><p>By default, the engine generates non-null values, unless specified otherwise.<h3 id=using-assign>Using <code>assign()</code><a title="Permanent link" class=headerlink href=#using-assign>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 3.0.0</code></div><p>The assignment API allows customising an object by passing in one or more <code>Assignment</code> objects as a vararg:<div class=highlight><pre><span></span><code><a href=#__codelineno-79-1 id=__codelineno-79-1 name=__codelineno-79-1></a><span class=n>InstancioApi</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=nf>assign</span><span class=p>(</span><span class=n>Assignment</span><span class=p>...</span><span class=w> </span><span class=n>assignments</span><span class=p>);</span>
</code></pre></div><p>Assignments can be created using static methods provided by the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Assign.html target=_blank>Assign</a> class. It provides three entry-point methods for creating an assignment:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-80-1>1</a></span>
<span class=normal><a href=#__codelineno-80-2>2</a></span>
<span class=normal><a href=#__codelineno-80-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1></a><span class=n>Assign</span><span class=p>.</span><span class=na>given</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>origin</span><span class=p>)</span>
<a id=__codelineno-80-2 name=__codelineno-80-2></a><span class=n>Assign</span><span class=p>.</span><span class=na>given</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>origin</span><span class=p>,</span><span class=w> </span><span class=n>TargetSelector</span><span class=w> </span><span class=n>destination</span><span class=p>)</span>
<a id=__codelineno-80-3 name=__codelineno-80-3></a><span class=n>Assign</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>target</span><span class=p>)</span>
</code></pre></div></table></div><p>Each <code>Assignment</code> may have:<ul><li>an origin selector - the source of the assignment; must match exactly one value<li>destination selector(s) whose target(s) will be assigned a given value<li><code>Generator</code> for generating the value to assign<li><code>Predicate</code> that must be satisfied by the origin for the assignment to be applied<li><code>Function</code> for mapping the value before assigning to destination targets</ul><p>The three types of expressions can be used for different use-cases described in the following sections.<h4 id=assignvalueoftarget><code>Assign.valueOf(target)</code><a title="Permanent link" class=headerlink href=#assignvalueoftarget>¶</a></h4><p>This builder provides two options:<ul><li>Assign value directly <strong>to</strong> the <code>target</code><li>Assign value <strong>of</strong> the <code>target</code> to another selector</ul><p>The first option is to assign a value directly to the <code>target</code> selector using <code>set()</code>, <code>supply()</code>, or <code>generate()</code> methods as shown in the following example:<div class=highlight><pre><span></span><code><a href=#__codelineno-81-1 id=__codelineno-81-1 name=__codelineno-81-1></a><span class=n>Assignment</span><span class=o>[]</span><span class=w> </span><span class=n>assignments</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-81-2 id=__codelineno-81-2 name=__codelineno-81-2></a><span class=w>    </span><span class=n>Assign</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getName</span><span class=p>).</span><span class=na>set</span><span class=p>(</span><span class=s>"Bob"</span><span class=p>),</span>
<a href=#__codelineno-81-3 id=__codelineno-81-3 name=__codelineno-81-3></a><span class=w>    </span><span class=n>Assign</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAge</span><span class=p>).</span><span class=na>generate</span><span class=p>(</span><span class=n>gen</span><span class=o>-></span><span class=n>gen</span><span class=p>.</span><span class=na>ints</span><span class=p>().</span><span class=na>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>100</span><span class=p>))</span>
<a href=#__codelineno-81-4 id=__codelineno-81-4 name=__codelineno-81-4></a><span class=p>};</span>
<a href=#__codelineno-81-5 id=__codelineno-81-5 name=__codelineno-81-5></a>
<a href=#__codelineno-81-6 id=__codelineno-81-6 name=__codelineno-81-6></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-81-7 id=__codelineno-81-7 name=__codelineno-81-7></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>assignments</span><span class=p>)</span>
<a href=#__codelineno-81-8 id=__codelineno-81-8 name=__codelineno-81-8></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><p>The second option is to set the value of the <code>target</code> to another selector. For example, the following snippet assigns the value of <code>Person.firstName</code> to <code>Person.preferredName</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-82-1>1</a></span>
<span class=normal><a href=#__codelineno-82-2>2</a></span>
<span class=normal><a href=#__codelineno-82-3>3</a></span>
<span class=normal><a href=#__codelineno-82-4>4</a></span>
<span class=normal><a href=#__codelineno-82-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1></a><span class=n>Assignment</span><span class=w> </span><span class=n>preferredName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Assign</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>).</span><span class=na>to</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPreferredName</span><span class=p>);</span>
<a id=__codelineno-82-2 name=__codelineno-82-2></a>
<a id=__codelineno-82-3 name=__codelineno-82-3></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-82-4 name=__codelineno-82-4></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>preferredName</span><span class=p>)</span>
<a id=__codelineno-82-5 name=__codelineno-82-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This method supports an optional predicate to specify when the assignment should be applied. In the following example, the preferred name is set to the first name only if the first name starts with "A". Otherwise, the preferred name will be set to a random value.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-83-1>1</a></span>
<span class=normal><a href=#__codelineno-83-2>2</a></span>
<span class=normal><a href=#__codelineno-83-3>3</a></span>
<span class=normal><a href=#__codelineno-83-4>4</a></span>
<span class=normal><a href=#__codelineno-83-5>5</a></span>
<span class=normal><a href=#__codelineno-83-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-83-2 name=__codelineno-83-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"Alice"</span><span class=p>,</span><span class=w> </span><span class=s>"Alex"</span><span class=p>,</span><span class=w> </span><span class=s>"Robert"</span><span class=p>))</span>
<a id=__codelineno-83-3 name=__codelineno-83-3></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>valueOf</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>)</span>
<a id=__codelineno-83-4 name=__codelineno-83-4></a><span class=w>            </span><span class=p>.</span><span class=na>to</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPreferredName</span><span class=p>)</span>
<a id=__codelineno-83-5 name=__codelineno-83-5></a><span class=w>            </span><span class=p>.</span><span class=na>when</span><span class=p>((</span><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>firstName</span><span class=p>.</span><span class=na>startsWith</span><span class=p>(</span><span class=s>"A"</span><span class=p>)))</span>
<a id=__codelineno-83-6 name=__codelineno-83-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><p>In addition, the expression allows specifying a <code>Function</code> for transforming the result. For example, the following snippet sets the preferred name to the same value as the first name, unless the first name is <em>Robert</em>, in which case the preferred name will be set to <em>Bob</em>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-84-1>1</a></span>
<span class=normal><a href=#__codelineno-84-2>2</a></span>
<span class=normal><a href=#__codelineno-84-3>3</a></span>
<span class=normal><a href=#__codelineno-84-4>4</a></span>
<span class=normal><a href=#__codelineno-84-5>5</a></span>
<span class=normal><a href=#__codelineno-84-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-84-2 name=__codelineno-84-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"Alice"</span><span class=p>,</span><span class=w> </span><span class=s>"Alex"</span><span class=p>,</span><span class=w> </span><span class=s>"Robert"</span><span class=p>))</span>
<a id=__codelineno-84-3 name=__codelineno-84-3></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>valueOf</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>)</span>
<a id=__codelineno-84-4 name=__codelineno-84-4></a><span class=w>            </span><span class=p>.</span><span class=na>to</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPreferredName</span><span class=p>)</span>
<a id=__codelineno-84-5 name=__codelineno-84-5></a><span class=w>            </span><span class=p>.</span><span class=na>as</span><span class=p>((</span><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=s>"Robert"</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>firstName</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s>"Bob"</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>firstName</span><span class=p>))</span>
<a id=__codelineno-84-6 name=__codelineno-84-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><h4 id=assigngivenorigin><code>Assign.given(origin)</code><a title="Permanent link" class=headerlink href=#assigngivenorigin>¶</a></h4><p>This expression allows setting different destination selectors with different values based on a given origin and predicate. The following snippet sets cancellation-related order data when the generated order status is <code>CANCELLED</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-85-1>1</a></span>
<span class=normal><a href=#__codelineno-85-2>2</a></span>
<span class=normal><a href=#__codelineno-85-3>3</a></span>
<span class=normal><a href=#__codelineno-85-4>4</a></span>
<span class=normal><a href=#__codelineno-85-5>5</a></span>
<span class=normal><a href=#__codelineno-85-6>6</a></span>
<span class=normal><a href=#__codelineno-85-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1></a><span class=n>List</span><span class=o><</span><span class=n>Order</span><span class=o>></span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Order</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-85-2 name=__codelineno-85-2></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>Assign</span><span class=p>.</span><span class=na>given</span><span class=p>(</span><span class=n>Order</span><span class=p>::</span><span class=n>getStatus</span><span class=p>)</span>
<a id=__codelineno-85-3 name=__codelineno-85-3></a><span class=w>        </span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=n>OrderStatus</span><span class=p>.</span><span class=na>CANCELLED</span><span class=p>)</span>
<a id=__codelineno-85-4 name=__codelineno-85-4></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Order</span><span class=p>::</span><span class=n>getCancellationReason</span><span class=p>),</span><span class=w> </span><span class=s>"Shipping delays"</span><span class=p>)</span>
<a id=__codelineno-85-5 name=__codelineno-85-5></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Order</span><span class=p>::</span><span class=n>isRefundIssued</span><span class=p>),</span><span class=w> </span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-85-6 name=__codelineno-85-6></a><span class=w>        </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Order</span><span class=p>::</span><span class=n>getCancellationDate</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>temporal</span><span class=p>().</span><span class=na>instant</span><span class=p>().</span><span class=na>past</span><span class=p>()))</span>
<a id=__codelineno-85-7 name=__codelineno-85-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=assigngivenorigin-destination><code>Assign.given(origin, destination)</code><a title="Permanent link" class=headerlink href=#assigngivenorigin-destination>¶</a></h4><p>This expression allows mapping predicates to different values for a given pair of origin and destination selectors:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-86-1>1</a></span>
<span class=normal><a href=#__codelineno-86-2>2</a></span>
<span class=normal><a href=#__codelineno-86-3>3</a></span>
<span class=normal><a href=#__codelineno-86-4>4</a></span>
<span class=normal><a href=#__codelineno-86-5>5</a></span>
<span class=normal><a href=#__codelineno-86-6>6</a></span>
<span class=normal><a href=#__codelineno-86-7>7</a></span>
<span class=normal><a href=#__codelineno-86-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-86-2 name=__codelineno-86-2></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>Assign</span><span class=p>.</span><span class=na>given</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>::</span><span class=n>getCountryCode</span><span class=p>))</span>
<a id=__codelineno-86-3 name=__codelineno-86-3></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>isIn</span><span class=p>(</span><span class=s>"Canada"</span><span class=p>,</span><span class=w> </span><span class=s>"USA"</span><span class=p>),</span><span class=w> </span><span class=s>"+1"</span><span class=p>)</span>
<a id=__codelineno-86-4 name=__codelineno-86-4></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"Italy"</span><span class=p>),</span><span class=w> </span><span class=s>"+39"</span><span class=p>)</span>
<a id=__codelineno-86-5 name=__codelineno-86-5></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"Poland"</span><span class=p>),</span><span class=w> </span><span class=s>"+48"</span><span class=p>)</span>
<a id=__codelineno-86-6 name=__codelineno-86-6></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"Germany"</span><span class=p>),</span><span class=w> </span><span class=s>"+49"</span><span class=p>)</span>
<a id=__codelineno-86-7 name=__codelineno-86-7></a><span class=w>        </span><span class=p>.</span><span class=na>elseGenerate</span><span class=p>(</span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>ints</span><span class=p>().</span><span class=na>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>999</span><span class=p>).</span><span class=na>as</span><span class=p>(</span><span class=n>code</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=s>"+"</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>code</span><span class=p>)))</span>
<a id=__codelineno-86-8 name=__codelineno-86-8></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/When.html target=_blank>When</a> class provides convenience methods for creating predicates. In addition to <code>set(predicate, value)</code> method shown above, this API also supports <code>supply()</code> and <code>generate()</code>, as well as the following optional methods to specify an <code>else</code> action if none of the predicates match:<ul><li><code>elseSet()</code><li><code>elseSupply()</code><li><code>elseGenerate()</code></ul><h4 id=assignment-restrictions>Assignment Restrictions<a title="Permanent link" class=headerlink href=#assignment-restrictions>¶</a></h4><h5 id=origin-selector-restrictions>Origin selector restrictions<a title="Permanent link" class=headerlink href=#origin-selector-restrictions>¶</a></h5><p>When using assignments, the origin selector must match a single target. For this reason, the origin does not support selector groups and primitive/wrapper selectors, such as <code>allInts()</code>.<p>For example, <code>Assign.given(allStrings())</code> is acceptable for the following class because there is only one string that matches the selector:<div class=highlight><pre><span></span><code><a href=#__codelineno-87-1 id=__codelineno-87-1 name=__codelineno-87-1></a><span class=kd>record</span> <span class=nc>MyRecord</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div><p>but not for the following classes because <code>allStrings()</code> would match more than one string value:<div class=highlight><pre><span></span><code><a href=#__codelineno-88-1 id=__codelineno-88-1 name=__codelineno-88-1></a><span class=kd>record</span> <span class=nc>MyRecord</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>string1</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>string2</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-88-2 id=__codelineno-88-2 name=__codelineno-88-2></a>
<a href=#__codelineno-88-3 id=__codelineno-88-3 name=__codelineno-88-3></a><span class=kd>record</span> <span class=nc>MyRecord</span><span class=p>(</span><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div><p>Convenience primitive/wrapper selectors, such as <code>allInts()</code>, are not accepted by assignments as they are a shorthand for <code>Select.all(all(int.class). all(Integer.class))</code>. Assignment expressions must specify either the primitive, or the wrapper type explicitly: <code>Assign.given(all(Integer.class))</code>.<h5 id=collection-restrictions>Collection restrictions<a title="Permanent link" class=headerlink href=#collection-restrictions>¶</a></h5><p>Assignments have an additional restriction when used with collections. If the origin selector of an assignment targets a collection element, then destination selector(s) must be within the collection. Assuming we have the following data model:<div class=highlight><pre><span></span><code><a href=#__codelineno-89-1 id=__codelineno-89-1 name=__codelineno-89-1></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-89-2 id=__codelineno-89-2 name=__codelineno-89-2></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a href=#__codelineno-89-3 id=__codelineno-89-3 name=__codelineno-89-3></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>countryOfCitizenship</span><span class=p>;</span>
<a href=#__codelineno-89-4 id=__codelineno-89-4 name=__codelineno-89-4></a><span class=w>    </span><span class=n>List</span><span class=o><</span><span class=n>Address</span><span class=o>></span><span class=w> </span><span class=n>addresses</span><span class=p>;</span>
<a href=#__codelineno-89-5 id=__codelineno-89-5 name=__codelineno-89-5></a><span class=p>}</span>
<a href=#__codelineno-89-6 id=__codelineno-89-6 name=__codelineno-89-6></a>
<a href=#__codelineno-89-7 id=__codelineno-89-7 name=__codelineno-89-7></a><span class=kd>class</span> <span class=nc>Address</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-89-8 id=__codelineno-89-8 name=__codelineno-89-8></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>street</span><span class=p>;</span>
<a href=#__codelineno-89-9 id=__codelineno-89-9 name=__codelineno-89-9></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>city</span><span class=p>;</span>
<a href=#__codelineno-89-10 id=__codelineno-89-10 name=__codelineno-89-10></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>country</span><span class=p>;</span>
<a href=#__codelineno-89-11 id=__codelineno-89-11 name=__codelineno-89-11></a><span class=p>}</span>
</code></pre></div><p>It is possible to create an assignment based on address <code>city</code> and fields <code>country</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-90-1>1</a></span>
<span class=normal><a href=#__codelineno-90-2>2</a></span>
<span class=normal><a href=#__codelineno-90-3>3</a></span>
<span class=normal><a href=#__codelineno-90-4>4</a></span>
<span class=normal><a href=#__codelineno-90-5>5</a></span>
<span class=normal><a href=#__codelineno-90-6>6</a></span>
<span class=normal><a href=#__codelineno-90-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-90-2 name=__codelineno-90-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"France"</span><span class=p>,</span><span class=w> </span><span class=s>"Italy"</span><span class=p>,</span><span class=w> </span><span class=s>"Spain"</span><span class=p>))</span>
<a id=__codelineno-90-3 name=__codelineno-90-3></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>given</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>))</span>
<a id=__codelineno-90-4 name=__codelineno-90-4></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"France"</span><span class=p>),</span><span class=w> </span><span class=s>"Paris"</span><span class=p>)</span>
<a id=__codelineno-90-5 name=__codelineno-90-5></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"Italy"</span><span class=p>),</span><span class=w> </span><span class=s>"Rome"</span><span class=p>)</span>
<a id=__codelineno-90-6 name=__codelineno-90-6></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>When</span><span class=p>.</span><span class=na>is</span><span class=p>(</span><span class=s>"Spain"</span><span class=p>),</span><span class=w> </span><span class=s>"Madrid"</span><span class=p>))</span>
<a id=__codelineno-90-7 name=__codelineno-90-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Since <code>Address</code> is a collection element, the assignment is scoped to each <code>Address</code> instance. The following usage, on the other hand, is <strong>invalid</strong>:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Invalid usage</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-91-1>1</a></span>
<span class=normal><a href=#__codelineno-91-2>2</a></span>
<span class=normal><a href=#__codelineno-91-3>3</a></span>
<span class=normal><a href=#__codelineno-91-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-91-2 name=__codelineno-91-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>oneOf</span><span class=p>(</span><span class=s>"France"</span><span class=p>,</span><span class=w> </span><span class=s>"Italy"</span><span class=p>,</span><span class=w> </span><span class=s>"Spain"</span><span class=p>))</span>
<a id=__codelineno-91-3 name=__codelineno-91-3></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>valueOf</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>).</span><span class=na>to</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getCountryOfCitizenship</span><span class=p>))</span>
<a id=__codelineno-91-4 name=__codelineno-91-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This is because <code>Address</code> is a collection element, therefore, <code>valueOf(Address::getCountry)</code> matches multiple values. For this reason, no guarantee is made as to the value that will be assigned to <code>Person.countryOfCitizenship</code> field.<h3 id=using-oncomplete>Using <code>onComplete()</code><a title="Permanent link" class=headerlink href=#using-oncomplete>¶</a></h3><p>Another option for customising generated data is using the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/OnCompleteCallback.html target=_blank>OnCompleteCallback</a>, a functional interface with the following signature:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-92-1>1</a></span>
<span class=normal><a href=#__codelineno-92-2>2</a></span>
<span class=normal><a href=#__codelineno-92-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1></a><span class=kd>interface</span> <span class=nc>OnCompleteCallback</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-92-2 name=__codelineno-92-2></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>onComplete</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=n>object</span><span class=p>);</span>
<a id=__codelineno-92-3 name=__codelineno-92-3></a><span class=p>}</span>
</code></pre></div></table></div><p>The <code>OnCompleteCallback</code> is invoked <em>after</em> the generated object has been fully populated. Callbacks can be triggered only for objects:<ul><li>created internally by the engine<li>created by custom generators</ul><p>Callbacks are <em>never</em> invoked on objects provided using:<ul><li><code>supply(TargetSelector, Supplier)</code><li><code>set(TargetSelector, Object)</code></ul><p>The following example demonstrates how an <code>Address</code> object can be modified using a callback. If a <code>Person</code> has a <code>List&LTAddress></code>, the callback will be invoked for every instance of the <code>Address</code> class that was generated.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: modifying an object via a callback</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-93-1>1</a></span>
<span class=normal><a href=#__codelineno-93-2>2</a></span>
<span class=normal><a href=#__codelineno-93-3>3</a></span>
<span class=normal><a href=#__codelineno-93-4>4</a></span>
<span class=normal><a href=#__codelineno-93-5>5</a></span>
<span class=normal><a href=#__codelineno-93-6>6</a></span>
<span class=normal><a href=#__codelineno-93-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-93-2 name=__codelineno-93-2></a><span class=w>    </span><span class=p>.</span><span class=na>onComplete</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-93-3 name=__codelineno-93-3></a><span class=w>        </span><span class=n>address</span><span class=p>.</span><span class=na>setCity</span><span class=p>(</span><span class=s>"Vancouver"</span><span class=p>);</span>
<a id=__codelineno-93-4 name=__codelineno-93-4></a><span class=w>        </span><span class=n>address</span><span class=p>.</span><span class=na>setProvince</span><span class=p>(</span><span class=s>"BC"</span><span class=p>);</span>
<a id=__codelineno-93-5 name=__codelineno-93-5></a><span class=w>        </span><span class=n>address</span><span class=p>.</span><span class=na>setCountry</span><span class=p>(</span><span class=s>"Canada"</span><span class=p>);</span>
<a id=__codelineno-93-6 name=__codelineno-93-6></a><span class=w>    </span><span class=p>})</span>
<a id=__codelineno-93-7 name=__codelineno-93-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>If the object is mutable, callbacks allow modifying multiple fields at once. However, callbacks cannot be used to modify immutable types.<p>Another property of callbacks is that they are only invoked on non-null objects. In the following example, all address instances are nullable. Therefore, a generated address instance may either be <code>null</code> or a fully-populated object. However, if a <code>null</code> was generated, the callback will not be invoked.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Callbacks are only called on non-null values</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-94-1>1</a></span>
<span class=normal><a href=#__codelineno-94-2>2</a></span>
<span class=normal><a href=#__codelineno-94-3>3</a></span>
<span class=normal><a href=#__codelineno-94-4>4</a></span>
<span class=normal><a href=#__codelineno-94-5>5</a></span>
<span class=normal><a href=#__codelineno-94-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-94-2 name=__codelineno-94-2></a><span class=w>    </span><span class=p>.</span><span class=na>withNullable</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-94-3 name=__codelineno-94-3></a><span class=w>    </span><span class=p>.</span><span class=na>onComplete</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-94-4 name=__codelineno-94-4></a><span class=w>        </span><span class=c1>// only-called if the generated address is not null</span>
<a id=__codelineno-94-5 name=__codelineno-94-5></a><span class=w>    </span><span class=p>})</span>
<a id=__codelineno-94-6 name=__codelineno-94-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h3 id=using-filter>Using <code>filter()</code><a title="Permanent link" class=headerlink href=#using-filter>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.6.0</code></div><p>This method can be used to filter generated values using a predicate. If the predicate evaluates to <code>false</code> for a given value, Instancio will generate a new value. The new value will also be tested against the predicate, and so on.<p>A simple example is to generate a list of even numbers:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: generate even numbers</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-95-1>1</a></span>
<span class=normal><a href=#__codelineno-95-2>2</a></span>
<span class=normal><a href=#__codelineno-95-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1></a><span class=n>List</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>evenNumbers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Integer</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-95-2 name=__codelineno-95-2></a><span class=w>    </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>allInts</span><span class=p>(),</span><span class=w> </span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-95-3 name=__codelineno-95-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>A more realistic use case is to ensure that certain fields of a generated object have unique values. For instance, we may want to generate a list of <code>Person</code> objects with unique string and numeric values. If the <code>Person</code> contains numeric IDs, this will ensure that the generated ID values are distinct across all instances:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: generate an object with unique values</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-96-1>1</a></span>
<span class=normal><a href=#__codelineno-96-2>2</a></span>
<span class=normal><a href=#__codelineno-96-3>3</a></span>
<span class=normal><a href=#__codelineno-96-4>4</a></span>
<span class=normal><a href=#__codelineno-96-5>5</a></span>
<span class=normal><a href=#__codelineno-96-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1></a><span class=n>Set</span><span class=o>&LT?></span><span class=w> </span><span class=n>generatedValues</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashSet</span><span class=o><></span><span class=p>();</span>
<a id=__codelineno-96-2 name=__codelineno-96-2></a>
<a id=__codelineno-96-3 name=__codelineno-96-3></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-96-4 name=__codelineno-96-4></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-96-5 name=__codelineno-96-5></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>allInts</span><span class=p>(),</span><span class=w> </span><span class=n>allLongs</span><span class=p>(),</span><span class=w> </span><span class=n>allStrings</span><span class=p>()),</span><span class=w> </span><span class=n>generatedValues</span><span class=p>::</span><span class=n>add</span><span class=p>)</span>
</span><a id=__codelineno-96-6 name=__codelineno-96-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>5</lnum> Generate distinct ints, longs and strings by rejecting duplicates.<br></div><div class="admonition info"><p class=admonition-title>This is how <a href=#using-withunique><code>withUnique()</code></a> API is implemented.</div><p>It should be noted that using the <code>filter()</code> method can be inefficient if the probability of generating a random value that would be rejected by the predicate is high. This is because a value that does not satisfy the predicate must be generated again. This results in many values being generated and discarded.<div class="admonition warning"><p class=admonition-title>Maximum retries<p>An exception will be thrown if the number of retries to generate a value for a given node exceeds <code>1000</code>.</div><p>In addition. it is not recommended to use <code>filter()</code> with POJOs or collections. For example, if <code>isActive()</code> returns <code>false</code> in the following snippet, the entire <code>User</code> object will be generated from scratch:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Not recommended!</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-97-1>1</a></span>
<span class=normal><a href=#__codelineno-97-2>2</a></span>
<span class=normal><a href=#__codelineno-97-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1></a><span class=n>List</span><span class=o><</span><span class=n>User</span><span class=o>></span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-97-2 name=__codelineno-97-2></a><span class=w>    </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>)</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>isActive</span><span class=p>())</span>
<a id=__codelineno-97-3 name=__codelineno-97-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Therefore, customising objects using other APIs, such as <a href=#using-generate><code>generate()</code></a> should be preferred over <code>filter()</code>, if possible.<h3 id=using-withunique>Using <code>withUnique()</code><a title="Permanent link" class=headerlink href=#using-withunique>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.8.0</code></div><p>This method can be used to generate unique values for a given selector's targets. Assuming the following class:<div class=highlight><pre><span></span><code><a href=#__codelineno-98-1 id=__codelineno-98-1 name=__codelineno-98-1></a><span class=kd>record</span> <span class=nc>Data</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>foo</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>bar</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div><p>The snippet below will generate a list of <code>Data</code> instances with unique <code>foo</code> values:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-99-1>1</a></span>
<span class=normal><a href=#__codelineno-99-2>2</a></span>
<span class=normal><a href=#__codelineno-99-3>3</a></span>
<span class=normal><a href=#__codelineno-99-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1></a><span class=n>List</span><span class=o><</span><span class=n>Data</span><span class=o>></span><span class=w> </span><span class=n>results</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Data</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-99-2 name=__codelineno-99-2></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-99-3 name=__codelineno-99-3></a><span class=w>    </span><span class=p>.</span><span class=na>withUnique</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Data</span><span class=p>::</span><span class=n>foo</span><span class=p>))</span>
<a id=__codelineno-99-4 name=__codelineno-99-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Note that the values will be unique across <em>all</em> targets that match the selector. For instance, the following usages:<ul><li><code>withUnique(allInts())</code><li><code>withUnique(all(field(Data::foo), field(Data::bar))</code></ul><p>would result in unique values for <code>foo</code> and <code>bar</code> with no overlap (i.e. <code>foo</code> and <code>bar</code> are disjoint). To generate unique values per field (with potential overlap), the <code>withUnique()</code>method must be specified per field:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-100-1>1</a></span>
<span class=normal><a href=#__codelineno-100-2>2</a></span>
<span class=normal><a href=#__codelineno-100-3>3</a></span>
<span class=normal><a href=#__codelineno-100-4>4</a></span>
<span class=normal><a href=#__codelineno-100-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1></a><span class=n>List</span><span class=o><</span><span class=n>Data</span><span class=o>></span><span class=w> </span><span class=n>results</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Data</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-100-2 name=__codelineno-100-2></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-100-3 name=__codelineno-100-3></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withUnique</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Data</span><span class=p>::</span><span class=n>foo</span><span class=p>))</span><span class=w> </span><span class=c1>// e.g. { 601, 42, 573, ...}</span>
</span><a id=__codelineno-100-4 name=__codelineno-100-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withUnique</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Data</span><span class=p>::</span><span class=n>bar</span><span class=p>))</span><span class=w> </span><span class=c1>// e.g. { 888, 251, 42, ...}</span>
</span><a id=__codelineno-100-5 name=__codelineno-100-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>3-4</lnum> Note that the value <code>42</code> was generated for both fields.<br></div><p>If it is impossible to generate a sufficient number of unique values after a certain number of attempts, an exception will be thrown:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-101-1>1</a></span>
<span class=normal><a href=#__codelineno-101-2>2</a></span>
<span class=normal><a href=#__codelineno-101-3>3</a></span>
<span class=normal><a href=#__codelineno-101-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1></a><span class=n>List</span><span class=o><</span><span class=n>Boolean</span><span class=o>></span><span class=w> </span><span class=n>results</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Boolean</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-101-2 name=__codelineno-101-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span><a id=__codelineno-101-3 name=__codelineno-101-3></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withUnique</span><span class=p>(</span><span class=n>allBooleans</span><span class=p>())</span>
</span><a id=__codelineno-101-4 name=__codelineno-101-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2-3</lnum> Will fail as it's impossible to generate 10 unique booleans.<br></div><h3 id=using-setblank>Using <code>setBlank()</code><a title="Permanent link" class=headerlink href=#using-setblank>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.7.0</code></div><p>This method can be used to initialise certain parts of an object to be blank using selectors. Its behaviour is the same as the methods below (which can be used for creating a blank <strong>root object</strong>):<ul><li><code>Instancio.createBlank(Class&LTT>)</code><li><code>Instancio.ofBlank(Class&LTT>)</code></ul><p>Blank objects have the following properties:<ul><li>value fields (such as strings, numbers, dates) are <code>null</code><li>arrays, collections, and maps are empty<li>references to POJOs are initialised to blank objects</ul><p>For example, assuming the <code>Person</code> class below (getters and setters omitted):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-102-1>1</a></span>
<span class=normal><a href=#__codelineno-102-2>2</a></span>
<span class=normal><a href=#__codelineno-102-3>3</a></span>
<span class=normal><a href=#__codelineno-102-4>4</a></span>
<span class=normal><a href=#__codelineno-102-5>5</a></span>
<span class=normal><a href=#__codelineno-102-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-102-2 name=__codelineno-102-2></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a id=__codelineno-102-3 name=__codelineno-102-3></a><span class=w>    </span><span class=n>LocalDate</span><span class=w> </span><span class=n>dateOfBirth</span><span class=p>;</span>
<a id=__codelineno-102-4 name=__codelineno-102-4></a><span class=w>    </span><span class=n>List</span><span class=o><</span><span class=n>Phone</span><span class=o>></span><span class=w> </span><span class=n>phoneNumbers</span><span class=p>;</span>
<a id=__codelineno-102-5 name=__codelineno-102-5></a><span class=w>    </span><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=p>;</span>
<a id=__codelineno-102-6 name=__codelineno-102-6></a><span class=p>}</span>
</code></pre></div></table></div><p>The following snippet<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-103-1>1</a></span>
<span class=normal><a href=#__codelineno-103-2>2</a></span>
<span class=normal><a href=#__codelineno-103-3>3</a></span>
<span class=normal><a href=#__codelineno-103-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1></a><span class=hll><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-103-2 name=__codelineno-103-2></a><span class=w>    </span><span class=p>.</span><span class=na>setBlank</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPhoneNumbers</span><span class=p>))</span>
<a id=__codelineno-103-3 name=__codelineno-103-3></a><span class=w>    </span><span class=p>.</span><span class=na>setBlank</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-103-4 name=__codelineno-103-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> We use <code>of(Person.class)</code> and <strong>not</strong> <code>ofBlank(Person.class)</code>, as the latter would create a blank root object.<br></div><p>will produce a partially blank object, where only the <code>name</code> and <code>dateOfBirth</code> fields are populated with random values. The <code>address</code> field has been set to a blank object and <code>phoneNumbers</code> to an empty <code>List</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-104-1 id=__codelineno-104-1 name=__codelineno-104-1></a>// Person[
<a href=#__codelineno-104-2 id=__codelineno-104-2 name=__codelineno-104-2></a>//   name=NOBXGV,
<a href=#__codelineno-104-3 id=__codelineno-104-3 name=__codelineno-104-3></a>//   dateOfBirth=2022-03-18,
<a href=#__codelineno-104-4 id=__codelineno-104-4 name=__codelineno-104-4></a>//   phoneNumbers=[]
<a href=#__codelineno-104-5 id=__codelineno-104-5 name=__codelineno-104-5></a>//   address=Address[street=null, city=null, country=null]
<a href=#__codelineno-104-6 id=__codelineno-104-6 name=__codelineno-104-6></a>// ]
</code></pre></div><p>Blank objects can be customised further if needed. For example, we can set the country field to "Canada", generate a collection of blank phones of size <code>2</code>, and set the <code>countryCode</code> to <code>+1</code> as shown below:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-105-1> 1</a></span>
<span class=normal><a href=#__codelineno-105-2> 2</a></span>
<span class=normal><a href=#__codelineno-105-3> 3</a></span>
<span class=normal><a href=#__codelineno-105-4> 4</a></span>
<span class=normal><a href=#__codelineno-105-5> 5</a></span>
<span class=normal><a href=#__codelineno-105-6> 6</a></span>
<span class=normal><a href=#__codelineno-105-7> 7</a></span>
<span class=normal><a href=#__codelineno-105-8> 8</a></span>
<span class=normal><a href=#__codelineno-105-9> 9</a></span>
<span class=normal><a href=#__codelineno-105-10>10</a></span>
<span class=normal><a href=#__codelineno-105-11>11</a></span>
<span class=normal><a href=#__codelineno-105-12>12</a></span>
<span class=normal><a href=#__codelineno-105-13>13</a></span>
<span class=normal><a href=#__codelineno-105-14>14</a></span>
<span class=normal><a href=#__codelineno-105-15>15</a></span>
<span class=normal><a href=#__codelineno-105-16>16</a></span>
<span class=normal><a href=#__codelineno-105-17>17</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-105-2 name=__codelineno-105-2></a><span class=w>    </span><span class=p>.</span><span class=na>setBlank</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPhoneNumbers</span><span class=p>))</span>
<a id=__codelineno-105-3 name=__codelineno-105-3></a><span class=w>    </span><span class=p>.</span><span class=na>setBlank</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-105-4 name=__codelineno-105-4></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPhoneNumbers</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>().</span><span class=na>size</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
<a id=__codelineno-105-5 name=__codelineno-105-5></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>::</span><span class=n>getCountryCode</span><span class=p>),</span><span class=w> </span><span class=s>"+1"</span><span class=p>)</span>
<a id=__codelineno-105-6 name=__codelineno-105-6></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCountry</span><span class=p>),</span><span class=w> </span><span class=s>"Canada"</span><span class=p>)</span>
<a id=__codelineno-105-7 name=__codelineno-105-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-105-8 name=__codelineno-105-8></a>
<a id=__codelineno-105-9 name=__codelineno-105-9></a><span class=c1>// Sample output:</span>
<a id=__codelineno-105-10 name=__codelineno-105-10></a><span class=c1>// Person[</span>
<a id=__codelineno-105-11 name=__codelineno-105-11></a><span class=c1>//   name=GLTJXQM,</span>
<a id=__codelineno-105-12 name=__codelineno-105-12></a><span class=c1>//   dateOfBirth=2029-04-06,</span>
<a id=__codelineno-105-13 name=__codelineno-105-13></a><span class=c1>//   phoneNumbers=[</span>
<a id=__codelineno-105-14 name=__codelineno-105-14></a><span class=c1>//       Phone[countryCode=+1,number=&LTnull>],</span>
<a id=__codelineno-105-15 name=__codelineno-105-15></a><span class=c1>//       Phone[countryCode=+1,number=&LTnull>]]</span>
<a id=__codelineno-105-16 name=__codelineno-105-16></a><span class=c1>//   address=Address[street=null, city=null, country=Canada]</span>
<a id=__codelineno-105-17 name=__codelineno-105-17></a><span class=c1>// ]</span>
</code></pre></div></table></div><h3 id=using-ignore>Using <code>ignore()</code><a title="Permanent link" class=headerlink href=#using-ignore>¶</a></h3><p>By default, Instancio will attempt to populate every non-static field value. The <code>ignore</code> method can be used where this is not desirable:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: ignoring certain fields and classes</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-106-1> 1</a></span>
<span class=normal><a href=#__codelineno-106-2> 2</a></span>
<span class=normal><a href=#__codelineno-106-3> 3</a></span>
<span class=normal><a href=#__codelineno-106-4> 4</a></span>
<span class=normal><a href=#__codelineno-106-5> 5</a></span>
<span class=normal><a href=#__codelineno-106-6> 6</a></span>
<span class=normal><a href=#__codelineno-106-7> 7</a></span>
<span class=normal><a href=#__codelineno-106-8> 8</a></span>
<span class=normal><a href=#__codelineno-106-9> 9</a></span>
<span class=normal><a href=#__codelineno-106-10>10</a></span>
<span class=normal><a href=#__codelineno-106-11>11</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-106-2 name=__codelineno-106-2></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPets</span><span class=p>))</span>
<a id=__codelineno-106-3 name=__codelineno-106-3></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-106-4 name=__codelineno-106-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-106-5 name=__codelineno-106-5></a>
<a id=__codelineno-106-6 name=__codelineno-106-6></a><span class=c1>// Or combining the selectors</span>
<a id=__codelineno-106-7 name=__codelineno-106-7></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-106-8 name=__codelineno-106-8></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>all</span><span class=p>(</span>
<a id=__codelineno-106-9 name=__codelineno-106-9></a><span class=w>        </span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPets</span><span class=p>),</span>
<a id=__codelineno-106-10 name=__codelineno-106-10></a><span class=w>        </span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>)))</span>
<a id=__codelineno-106-11 name=__codelineno-106-11></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=precedence-of-ignore>Precedence of <code>ignore()</code><a title="Permanent link" class=headerlink href=#precedence-of-ignore>¶</a></h4><p>The <code>ignore()</code> method has higher precedence than other methods. For example, in the following snippet specifying <code>ignore(all(LocalDateTime.class))</code> but supplying a value for the <code>lastModified</code> field will actually generate a <code>lastModified</code> with a <code>null</code> value.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-107-1>1</a></span>
<span class=normal><a href=#__codelineno-107-2>2</a></span>
<span class=normal><a href=#__codelineno-107-3>3</a></span>
<span class=normal><a href=#__codelineno-107-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-107-1 name=__codelineno-107-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-107-2 name=__codelineno-107-2></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
<a id=__codelineno-107-3 name=__codelineno-107-3></a><span class=w>    </span><span class=p>.</span><span class=na>supply</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getLastModified</span><span class=p>),</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span>
<a id=__codelineno-107-4 name=__codelineno-107-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=usage-of-ignore-with-java-records>Usage of <code>ignore()</code> with Java records<a title="Permanent link" class=headerlink href=#usage-of-ignore-with-java-records>¶</a></h4><p>When <code>ignore()</code> is used to target one of the required arguments of a <code>record</code> constructor, then a default value for the ignored type will be generated.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-108-1>1</a></span>
<span class=normal><a href=#__codelineno-108-2>2</a></span>
<span class=normal><a href=#__codelineno-108-3>3</a></span>
<span class=normal><a href=#__codelineno-108-4>4</a></span>
<span class=normal><a href=#__codelineno-108-5>5</a></span>
<span class=normal><a href=#__codelineno-108-6>6</a></span>
<span class=normal><a href=#__codelineno-108-7>7</a></span>
<span class=normal><a href=#__codelineno-108-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-108-1 name=__codelineno-108-1></a><span class=kd>record</span> <span class=nc>PersonRecord</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-108-2 name=__codelineno-108-2></a>
<a id=__codelineno-108-3 name=__codelineno-108-3></a><span class=n>PersonRecord</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonRecord</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-108-4 name=__codelineno-108-4></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>allInts</span><span class=p>())</span>
<a id=__codelineno-108-5 name=__codelineno-108-5></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>allStrings</span><span class=p>())</span>
<a id=__codelineno-108-6 name=__codelineno-108-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-108-7 name=__codelineno-108-7></a>
<a id=__codelineno-108-8 name=__codelineno-108-8></a><span class=c1>// will produce: PersonRecord[name=null, age=0]</span>
</code></pre></div></table></div><h3 id=nullable-values>Nullable Values<a title="Permanent link" class=headerlink href=#nullable-values>¶</a></h3><p>By default, Instancio generates non-null values. There are cases where this behaviour may need to be relaxed, for example, to verify that a piece of code does not fail in the presence of certain <code>null</code> values. There are a few ways to specify that values can be nullable which can broadly be grouped into two categories:<ul><li>field nullability<li>array/collection element and map key/value nullability</ul><h4 id=field-nullability>Field nullability<a title="Permanent link" class=headerlink href=#field-nullability>¶</a></h4><p>Field declarations can be made nullable using:<ul><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withNullable(org.instancio.TargetSelector) target=_blank>withNullable(TargetSelector)</a> method of the builder API<li>generator spec <code>nullable()</code> method (for generators that support it)<li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a></ul><p>For example, the following marks <code>Person.address</code> and all <code>String</code> fields as nullable:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-109-1>1</a></span>
<span class=normal><a href=#__codelineno-109-2>2</a></span>
<span class=normal><a href=#__codelineno-109-3>3</a></span>
<span class=normal><a href=#__codelineno-109-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-109-1 name=__codelineno-109-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-109-2 name=__codelineno-109-2></a><span class=w>    </span><span class=p>.</span><span class=na>withNullable</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAddress</span><span class=p>))</span>
<a id=__codelineno-109-3 name=__codelineno-109-3></a><span class=w>    </span><span class=p>.</span><span class=na>withNullable</span><span class=p>(</span><span class=n>allStrings</span><span class=p>())</span>
<a id=__codelineno-109-4 name=__codelineno-109-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Some built-in generators also support marking values as nullable using the <code>nullable()</code> method. As in the previous example, this also applies only to string fields, and not, for example, <code>List&LTString></code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-110-1>1</a></span>
<span class=normal><a href=#__codelineno-110-2>2</a></span>
<span class=normal><a href=#__codelineno-110-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-110-1 name=__codelineno-110-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-110-2 name=__codelineno-110-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>allStrings</span><span class=p>(),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>string</span><span class=p>().</span><span class=na>nullable</span><span class=p>())</span>
<a id=__codelineno-110-3 name=__codelineno-110-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>The final example, using <code>Settings</code>, follows the same principle:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-111-1>1</a></span>
<span class=normal><a href=#__codelineno-111-2>2</a></span>
<span class=normal><a href=#__codelineno-111-3>3</a></span>
<span class=normal><a href=#__codelineno-111-4>4</a></span>
<span class=normal><a href=#__codelineno-111-5>5</a></span>
<span class=normal><a href=#__codelineno-111-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-111-1 name=__codelineno-111-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-111-2 name=__codelineno-111-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>STRING_NULLABLE</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span>
<a id=__codelineno-111-3 name=__codelineno-111-3></a>
<a id=__codelineno-111-4 name=__codelineno-111-4></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-111-5 name=__codelineno-111-5></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-111-6 name=__codelineno-111-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=element-nullability>Element nullability<a title="Permanent link" class=headerlink href=#element-nullability>¶</a></h4><p>Data structure elements can be made nullable using:<ul><li>array generator: <code>nullableElements()</code><li>collection generator: <code>nullableElements()</code><li>map generator: <code>nullableKeys()</code>, <code>nullableValues()</code><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> keys<ul><li><code>Keys.ARRAY_ELEMENTS_NULLABLE</code><li><code>Keys.COLLECTION_ELEMENTS_NULLABLE</code><li><code>Keys.MAP_KEYS_NULLABLE</code><li><code>Keys.MAP_VALUES_NULLABLE</code></ul></ul><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: specifying nullability using the collection generator</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-112-1>1</a></span>
<span class=normal><a href=#__codelineno-112-2>2</a></span>
<span class=normal><a href=#__codelineno-112-3>3</a></span>
<span class=normal><a href=#__codelineno-112-4>4</a></span>
<span class=normal><a href=#__codelineno-112-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-112-1 name=__codelineno-112-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-112-2 name=__codelineno-112-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=s>"phoneNumbers"</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>collection</span><span class=p>()</span>
<a id=__codelineno-112-3 name=__codelineno-112-3></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>nullable</span><span class=p>()</span>
</span><a id=__codelineno-112-4 name=__codelineno-112-4></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>nullableElements</span><span class=p>())</span>
</span><a id=__codelineno-112-5 name=__codelineno-112-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>3</lnum> The collection itself is nullable.<br> <lnum>4</lnum> Collection elements are nullable.</div><p>Assuming the <code>Person</code> class contains a <code>Map</code>, nullability can be specified for keys and values:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: specifying nullability using the map generator</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-113-1>1</a></span>
<span class=normal><a href=#__codelineno-113-2>2</a></span>
<span class=normal><a href=#__codelineno-113-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-113-1 name=__codelineno-113-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-113-2 name=__codelineno-113-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Map</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>map</span><span class=p>().</span><span class=na>nullableKeys</span><span class=p>().</span><span class=na>nullableValues</span><span class=p>())</span>
<a id=__codelineno-113-3 name=__codelineno-113-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Lastly, element nullability can be specified using <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> as follows:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: specifying nullability using Settings</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-114-1>1</a></span>
<span class=normal><a href=#__codelineno-114-2>2</a></span>
<span class=normal><a href=#__codelineno-114-3>3</a></span>
<span class=normal><a href=#__codelineno-114-4>4</a></span>
<span class=normal><a href=#__codelineno-114-5>5</a></span>
<span class=normal><a href=#__codelineno-114-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-114-1 name=__codelineno-114-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-114-2 name=__codelineno-114-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>COLLECTION_ELEMENTS_NULLABLE</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span>
<a id=__codelineno-114-3 name=__codelineno-114-3></a>
<a id=__codelineno-114-4 name=__codelineno-114-4></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-114-5 name=__codelineno-114-5></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-114-6 name=__codelineno-114-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h2 id=subtype-mapping>Subtype Mapping<a title="Permanent link" class=headerlink href=#subtype-mapping>¶</a></h2><p>Subtype mapping allows mapping a type to its subtype. This can be used for:<ul><li>specifying an implementation class for an abstract class or interface<li>testing behaviour using different implementations</ul><p>By default, Instancio does not resolve implementation classes of an abstract type. The only exceptions to this are:<ul><li>JDK classes, such <code>List</code>, <code>Map</code>, <code>CharSequence</code>, etc. (which default to <code>ArrayList</code>, <code>HashMap</code>, and <code>String</code>, respectively).<li><code>sealed</code> interfaces and abstract classes (which default to a random implementation).</ul><p>For user-defined abstract types, the implementation class must be specified via the API. If not specified:<ul><li>a <code>null</code> value will be generated where the abstract type is a field<li>an empty collection will be generated if the abstract type is a collection element<li>an exception will be thrown if the root type is abstract and no subtype is specified</ul><h3 id=specifying-subtypes>Specifying Subtypes<a title="Permanent link" class=headerlink href=#specifying-subtypes>¶</a></h3><p>The mapping can be specified using the <code>subtype()</code> method provided by <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html target=_blank>InstancioApi</a>:<div class=highlight><pre><span></span><code><a href=#__codelineno-115-1 id=__codelineno-115-1 name=__codelineno-115-1></a><span class=n>subtype</span><span class=p>(</span><span class=n>TargetSelector</span><span class=w> </span><span class=n>selector</span><span class=p>,</span><span class=w> </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>subtype</span><span class=p>)</span>
</code></pre></div><p>or the <code>mapType()</code> method declared by the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> class:<div class=highlight><pre><span></span><code><a href=#__codelineno-116-1 id=__codelineno-116-1 name=__codelineno-116-1></a><span class=n>mapType</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>type</span><span class=p>,</span><span class=w> </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>subtype</span><span class=p>)</span>
</code></pre></div><p>Functionally, the two methods are equivalent. However, one may be preferable over another depending on the use case.<p>The <code>subtype()</code> method<ul><li>has higher precedence than the one offered by <code>Settings</code><li>provides more flexibility as it can be applied to any selector target, such as fields</ul><p>The <code>Settings.mapType()</code> method, on the other hand<ul><li>can only be mapped based on class<li>is reusable since an instance of <code>Settings</code> can be shared across multiple test methods<li>allows subtypes to be specified via <code>instancio.properties</code> and applied automatically</ul><p>The following is an example of using the <code>subtype()</code> method:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-117-1>1</a></span>
<span class=normal><a href=#__codelineno-117-2>2</a></span>
<span class=normal><a href=#__codelineno-117-3>3</a></span>
<span class=normal><a href=#__codelineno-117-4>4</a></span>
<span class=normal><a href=#__codelineno-117-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-117-1 name=__codelineno-117-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-117-2 name=__codelineno-117-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>subtype</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Collection</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>all</span><span class=p>(</span><span class=n>Set</span><span class=p>.</span><span class=na>class</span><span class=p>)),</span><span class=w> </span><span class=n>TreeSet</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-117-3 name=__codelineno-117-3></a><span class=w>    </span><span class=p>.</span><span class=na>subtype</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPet</span><span class=p>),</span><span class=w> </span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-117-4 name=__codelineno-117-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>subtype</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>AddressImpl</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-117-5 name=__codelineno-117-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> Group selector can be used as long as the subtype is valid for all group members.<br> <lnum>4</lnum> Assuming <code>Address</code> is the superclass of <code>AddressImpl</code>.</div><p>The same can be specified using <code>Settings</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-118-1>1</a></span>
<span class=normal><a href=#__codelineno-118-2>2</a></span>
<span class=normal><a href=#__codelineno-118-3>3</a></span>
<span class=normal><a href=#__codelineno-118-4>4</a></span>
<span class=normal><a href=#__codelineno-118-5>5</a></span>
<span class=normal><a href=#__codelineno-118-6>6</a></span>
<span class=normal><a href=#__codelineno-118-7>7</a></span>
<span class=normal><a href=#__codelineno-118-8>8</a></span>
<span class=normal><a href=#__codelineno-118-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-118-1 name=__codelineno-118-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-118-2 name=__codelineno-118-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>mapType</span><span class=p>(</span><span class=n>Pet</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-118-3 name=__codelineno-118-3></a><span class=w>    </span><span class=p>.</span><span class=na>mapType</span><span class=p>(</span><span class=n>Collection</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>TreeSet</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-118-4 name=__codelineno-118-4></a><span class=w>    </span><span class=p>.</span><span class=na>mapType</span><span class=p>(</span><span class=n>Set</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>TreeSet</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-118-5 name=__codelineno-118-5></a><span class=w>    </span><span class=p>.</span><span class=na>mapType</span><span class=p>(</span><span class=n>Address</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>AddressImpl</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-118-6 name=__codelineno-118-6></a>
<a id=__codelineno-118-7 name=__codelineno-118-7></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-118-8 name=__codelineno-118-8></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-118-9 name=__codelineno-118-9></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> Note that this is not exactly equivalent to <code>subtype(field(Person::getPet), Cat.class)</code>, since the field selector is a more specific target.</div><p>Finally, when specifying the mapping via <code>instancio.properties</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-119-1>1</a></span>
<span class=normal><a href=#__codelineno-119-2>2</a></span>
<span class=normal><a href=#__codelineno-119-3>3</a></span>
<span class=normal><a href=#__codelineno-119-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-119-1 name=__codelineno-119-1></a><span class=na>subtype.java.util.Collection</span><span class=o>=</span><span class=s>java.util.TreeSet</span>
<a id=__codelineno-119-2 name=__codelineno-119-2></a><span class=na>subtype.java.util.Set</span><span class=o>=</span><span class=s>java.util.TreeSet</span>
<a id=__codelineno-119-3 name=__codelineno-119-3></a><span class=na>subtype.com.example.Pet</span><span class=o>=</span><span class=s>com.example.Cat</span>
<a id=__codelineno-119-4 name=__codelineno-119-4></a><span class=na>subtype.com.example.Address</span><span class=o>=</span><span class=s>com.example.AddressImpl</span>
</code></pre></div></table></div><p>subtypes are resolved automatically:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-120-1>1</a></span>
<span class=normal><a href=#__codelineno-120-2>2</a></span>
<span class=normal><a href=#__codelineno-120-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-120-1 name=__codelineno-120-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-120-2 name=__codelineno-120-2></a>
<a id=__codelineno-120-3 name=__codelineno-120-3></a><span class=n>assertThat</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getPet</span><span class=p>()).</span><span class=na>isExactlyInstanceOf</span><span class=p>(</span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</code></pre></div></table></div><p>In addition to specifying subtypes using the API or properties file, subtypes can be resolved automatically by implementing the <a href=#instancio-service-provider-interface><code>InstancioServiceProvider</code></a> interface.<h2 id=using-models>Using Models<a title="Permanent link" class=headerlink href=#using-models>¶</a></h2><p>A <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Model.html target=_blank>Model</a> is a template for creating objects. It encapsulates all the parameters specified using the builder API. Once a model is defined, it can be used to create objects without duplicating the common properties.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example: creating objects from a Model</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-121-1> 1</a></span>
<span class=normal><a href=#__codelineno-121-2> 2</a></span>
<span class=normal><a href=#__codelineno-121-3> 3</a></span>
<span class=normal><a href=#__codelineno-121-4> 4</a></span>
<span class=normal><a href=#__codelineno-121-5> 5</a></span>
<span class=normal><a href=#__codelineno-121-6> 6</a></span>
<span class=normal><a href=#__codelineno-121-7> 7</a></span>
<span class=normal><a href=#__codelineno-121-8> 8</a></span>
<span class=normal><a href=#__codelineno-121-9> 9</a></span>
<span class=normal><a href=#__codelineno-121-10>10</a></span>
<span class=normal><a href=#__codelineno-121-11>11</a></span>
<span class=normal><a href=#__codelineno-121-12>12</a></span>
<span class=normal><a href=#__codelineno-121-13>13</a></span>
<span class=normal><a href=#__codelineno-121-14>14</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-121-1 name=__codelineno-121-1></a><span class=hll><span class=n>Model</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>simpsonsModel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-121-2 name=__codelineno-121-2></a><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getId</span><span class=p>))</span>
<a id=__codelineno-121-3 name=__codelineno-121-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getLastName</span><span class=p>),</span><span class=w> </span><span class=s>"Simpson"</span><span class=p>)</span>
<a id=__codelineno-121-4 name=__codelineno-121-4></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>::</span><span class=n>getCity</span><span class=p>),</span><span class=w> </span><span class=s>"Springfield"</span><span class=p>)</span>
<a id=__codelineno-121-5 name=__codelineno-121-5></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getAge</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>ints</span><span class=p>().</span><span class=na>range</span><span class=p>(</span><span class=mi>40</span><span class=p>,</span><span class=w> </span><span class=mi>50</span><span class=p>))</span>
<a id=__codelineno-121-6 name=__codelineno-121-6></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
</span><a id=__codelineno-121-7 name=__codelineno-121-7></a>
<a id=__codelineno-121-8 name=__codelineno-121-8></a><span class=n>Person</span><span class=w> </span><span class=n>homer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>simpsonsModel</span><span class=p>)</span>
<a id=__codelineno-121-9 name=__codelineno-121-9></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>),</span><span class=w> </span><span class=s>"Homer"</span><span class=p>)</span>
<a id=__codelineno-121-10 name=__codelineno-121-10></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-121-11 name=__codelineno-121-11></a>
<a id=__codelineno-121-12 name=__codelineno-121-12></a><span class=n>Person</span><span class=w> </span><span class=n>marge</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>simpsonsModel</span><span class=p>)</span>
<a id=__codelineno-121-13 name=__codelineno-121-13></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getFirstName</span><span class=p>),</span><span class=w> </span><span class=s>"Marge"</span><span class=p>)</span>
<a id=__codelineno-121-14 name=__codelineno-121-14></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> The <code>Model</code> class itself does not expose any public methods, and its instances are effectively immutable.</div><div class="admonition info"><p class=admonition-title>Objects created from a model inherit all the model's properties, including <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a>, <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Mode.html target=_blank>Mode</a> and seed value.</div><p>A model can also be used as a template for creating other models. Using the previous example, we can define a new model with additional data:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-122-1>1</a></span>
<span class=normal><a href=#__codelineno-122-2>2</a></span>
<span class=normal><a href=#__codelineno-122-3>3</a></span>
<span class=normal><a href=#__codelineno-122-4>4</a></span>
<span class=normal><a href=#__codelineno-122-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-122-1 name=__codelineno-122-1></a><span class=n>Model</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>simpsonsModelWithPets</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>simpsonsModel</span><span class=p>)</span>
<a id=__codelineno-122-2 name=__codelineno-122-2></a><span class=w>    </span><span class=p>.</span><span class=na>supply</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getPets</span><span class=p>),</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>List</span><span class=p>.</span><span class=na>of</span><span class=p>(</span>
<a id=__codelineno-122-3 name=__codelineno-122-3></a><span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>Pet</span><span class=p>(</span><span class=n>PetType</span><span class=p>.</span><span class=na>CAT</span><span class=p>,</span><span class=w> </span><span class=s>"Snowball"</span><span class=p>),</span>
<a id=__codelineno-122-4 name=__codelineno-122-4></a><span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>Pet</span><span class=p>(</span><span class=n>PetType</span><span class=p>.</span><span class=na>DOG</span><span class=p>,</span><span class=w> </span><span class=s>"Santa's Little Helper"</span><span class=p>))</span>
<a id=__codelineno-122-5 name=__codelineno-122-5></a><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
</code></pre></div></table></div><p>Having a common model allows test methods to create custom objects by overriding the model's properties via selectors (including properties of nested objects). This also works for immutable objects, such as Java records.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-123-1>1</a></span>
<span class=normal><a href=#__codelineno-123-2>2</a></span>
<span class=normal><a href=#__codelineno-123-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-123-1 name=__codelineno-123-1></a><span class=n>Person</span><span class=w> </span><span class=n>withNewAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>simpsonsModel</span><span class=p>)</span>
<a id=__codelineno-123-2 name=__codelineno-123-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Address</span><span class=p>:</span><span class=n>getCity</span><span class=p>),</span><span class=w> </span><span class=s>"Springograd"</span><span class=p>)</span>
<a id=__codelineno-123-3 name=__codelineno-123-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This approach reduces duplication and simplifies data setup, especially for complex classes with many fields and relationships. More details on the benefits of using models, including a sample project, are provided in the article <a href=/articles/creating-object-templates-using-models/>Creating object templates using Models</a>.<h3 id=using-setmodel>Using <code>setModel()</code><a title="Permanent link" class=headerlink href=#using-setmodel>¶</a></h3><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.4.0</code></div><p>The method <code>setModel(TargetSelector, Model)</code> allows applying a model to another object using a selector.<p>To illustrate with an example, we will assume the following classes:<div class=highlight><pre><span></span><code><a href=#__codelineno-124-1 id=__codelineno-124-1 name=__codelineno-124-1></a><span class=kd>record</span> <span class=nc>Foo</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a href=#__codelineno-124-2 id=__codelineno-124-2 name=__codelineno-124-2></a><span class=kd>record</span> <span class=nc>Container</span><span class=p>(</span><span class=n>Foo</span><span class=w> </span><span class=n>fooA</span><span class=p>,</span><span class=w> </span><span class=n>Foo</span><span class=w> </span><span class=n>fooB</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
</code></pre></div><p>Given a model of <code>Foo</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-125-1>1</a></span>
<span class=normal><a href=#__codelineno-125-2>2</a></span>
<span class=normal><a href=#__codelineno-125-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-125-1 name=__codelineno-125-1></a><span class=n>Model</span><span class=o><</span><span class=n>Foo</span><span class=o>></span><span class=w> </span><span class=n>fooModel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-125-2 name=__codelineno-125-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
<a id=__codelineno-125-3 name=__codelineno-125-3></a><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
</code></pre></div></table></div><p>The model can be applied to a specific <code>Foo</code> field declared by the <code>Container</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-126-1>1</a></span>
<span class=normal><a href=#__codelineno-126-2>2</a></span>
<span class=normal><a href=#__codelineno-126-3>3</a></span>
<span class=normal><a href=#__codelineno-126-4>4</a></span>
<span class=normal><a href=#__codelineno-126-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-126-1 name=__codelineno-126-1></a><span class=n>Container</span><span class=w> </span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Container</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-126-2 name=__codelineno-126-2></a><span class=w>    </span><span class=p>.</span><span class=na>setModel</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>),</span><span class=w> </span><span class=n>fooModel</span><span class=p>)</span>
<a id=__codelineno-126-3 name=__codelineno-126-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-126-4 name=__codelineno-126-4></a>
<a id=__codelineno-126-5 name=__codelineno-126-5></a><span class=c1>// Sample output: Container[fooA=Foo[value="foo"], fooB=Foo[value="ANBQNR"]]</span>
</code></pre></div></table></div><p><code>setModel()</code> works by applying selectors defined within the model to the target object. In doing so, it narrows down the scope of selectors defined in the model, such as <code>field(Foo::value)</code>, to the model's target <code>field(Container::fooA)</code>, as shown in this diagram:<p><img alt="Selector scope applied by setModel()" src=/assets/setmodel-selector-scope.svg><p>In other words, the <code>Container</code> creation example is equivalent to:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-127-1>1</a></span>
<span class=normal><a href=#__codelineno-127-2>2</a></span>
<span class=normal><a href=#__codelineno-127-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-127-1 name=__codelineno-127-1></a><span class=n>Container</span><span class=w> </span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Container</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-127-2 name=__codelineno-127-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>)),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
</span><a id=__codelineno-127-3 name=__codelineno-127-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p><code>setModel()</code> works for all Instancio API methods that accept <code>TargetSelector</code> as an argument, such as <code>assign()</code>, <code>generate()</code>, <code>ignore()</code>, and so on. However, the following properties of the <code>Model</code> are <strong>not</strong> applied to the target object:<ul><li><code>Settings</code><li><code>lenient()</code> mode<li>custom seed value, if any</ul><h4 id=overriding-selectors-defined-by-the-model>Overriding Selectors Defined by the <code>Model</code><a title="Permanent link" class=headerlink href=#overriding-selectors-defined-by-the-model>¶</a></h4><p>When creating an object, it is possible to override selectors defined within the model. Building on the previous example, we can override <code>field(Foo::value)</code> as follows:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-128-1>1</a></span>
<span class=normal><a href=#__codelineno-128-2>2</a></span>
<span class=normal><a href=#__codelineno-128-3>3</a></span>
<span class=normal><a href=#__codelineno-128-4>4</a></span>
<span class=normal><a href=#__codelineno-128-5>5</a></span>
<span class=normal><a href=#__codelineno-128-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-128-1 name=__codelineno-128-1></a><span class=n>Container</span><span class=w> </span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Container</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-128-2 name=__codelineno-128-2></a><span class=w>    </span><span class=p>.</span><span class=na>setModel</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>),</span><span class=w> </span><span class=n>fooModel</span><span class=p>)</span>
<a id=__codelineno-128-3 name=__codelineno-128-3></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>)),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
</span><a id=__codelineno-128-4 name=__codelineno-128-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-128-5 name=__codelineno-128-5></a>
<a id=__codelineno-128-6 name=__codelineno-128-6></a><span class=c1>// Sample output: Container[fooA=Foo[value="bar"], fooB=Foo[value="ORVQFJF"]]</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>3</lnum> This selector replaces the original selector defined by the <code>Model</code>.<br></div><p>In this example, the overriding selector is the same as the model's selector (including the scope). If instead of:<div class=highlight><pre><span></span><code><a href=#__codelineno-129-1 id=__codelineno-129-1 name=__codelineno-129-1></a><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>)),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
</code></pre></div><p>we specify:<div class=highlight><pre><span></span><code><a href=#__codelineno-130-1 id=__codelineno-130-1 name=__codelineno-130-1></a><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
</code></pre></div><p>Then the output will be:<div class=highlight><pre><span></span><code><a href=#__codelineno-131-1 id=__codelineno-131-1 name=__codelineno-131-1></a>Container[fooA=Foo[value="bar"], fooB=Foo[value="bar"]]
</code></pre></div><p>In addition, the original selector defined within the model will trigger an <a href=#selector-strictness>unused selector</a> error. In such cases, the model's selector can be marked as <code>lenient()</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-132-1>1</a></span>
<span class=normal><a href=#__codelineno-132-2>2</a></span>
<span class=normal><a href=#__codelineno-132-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-132-1 name=__codelineno-132-1></a><span class=n>Model</span><span class=o><</span><span class=n>Foo</span><span class=o>></span><span class=w> </span><span class=n>fooModel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-132-2 name=__codelineno-132-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>lenient</span><span class=p>(),</span><span class=w> </span><span class=s>"foo"</span><span class=p>)</span>
</span><a id=__codelineno-132-3 name=__codelineno-132-3></a><span class=w>    </span><span class=p>.</span><span class=na>toModel</span><span class=p>();</span>
</code></pre></div></table></div><p>The reason for the error is that there are now two different selectors that match the same node <code>Foo.value</code>. This can be verified by calling <code>verbose()</code>, which will output all the selectors and matching nodes:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-133-1>1</a></span>
<span class=normal><a href=#__codelineno-133-2>2</a></span>
<span class=normal><a href=#__codelineno-133-3>3</a></span>
<span class=normal><a href=#__codelineno-133-4>4</a></span>
<span class=normal><a href=#__codelineno-133-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-133-1 name=__codelineno-133-1></a><span class=n>Container</span><span class=w> </span><span class=n>container</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Container</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-133-2 name=__codelineno-133-2></a><span class=w>    </span><span class=p>.</span><span class=na>setModel</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>),</span><span class=w> </span><span class=n>fooModel</span><span class=p>)</span>
<a id=__codelineno-133-3 name=__codelineno-133-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>value</span><span class=p>).</span><span class=na>within</span><span class=p>(</span><span class=n>scope</span><span class=p>(</span><span class=n>Container</span><span class=p>::</span><span class=n>fooA</span><span class=p>)),</span><span class=w> </span><span class=s>"bar"</span><span class=p>)</span>
<a id=__codelineno-133-4 name=__codelineno-133-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
</span><a id=__codelineno-133-5 name=__codelineno-133-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Will output:<div class=highlight><pre><span></span><code><a href=#__codelineno-134-1 id=__codelineno-134-1 name=__codelineno-134-1></a>Selectors and matching nodes, if any:
<a href=#__codelineno-134-2 id=__codelineno-134-2 name=__codelineno-134-2></a>
<a href=#__codelineno-134-3 id=__codelineno-134-3 name=__codelineno-134-3></a> -> Method: generate(), set(), or supply()
<a href=#__codelineno-134-4 id=__codelineno-134-4 name=__codelineno-134-4></a><span class=hll>    - field(Foo, "value")
</span><a href=#__codelineno-134-5 id=__codelineno-134-5 name=__codelineno-134-5></a>       \_ Node[Foo.value, depth=2, type=String]
<a href=#__codelineno-134-6 id=__codelineno-134-6 name=__codelineno-134-6></a>
<a href=#__codelineno-134-7 id=__codelineno-134-7 name=__codelineno-134-7></a><span class=hll>    - field(Foo, "value").within(scope(Container, "fooA")).lenient()
</span><a href=#__codelineno-134-8 id=__codelineno-134-8 name=__codelineno-134-8></a>       \_ Node[Foo.value, depth=2, type=String]
</code></pre></div><p>The output confirms that there are two different selectors matching the node <code>Foo.value</code>, therefore selector with the lowest precedence will the trigger unused selector error unless it is marked as <code>lenient()</code>.<p>In summary, when a <code>Model</code> is provided to the <code>setModel()</code> method, the selectors defined within the model will be subject to the usual <a href=#selector-precedence>selector precedence rules</a>.<h2 id=custom-generators>Custom Generators<a title="Permanent link" class=headerlink href=#custom-generators>¶</a></h2><p>Every type of object Instancio generates is through an implementation of the <code>Generator</code> interface. A number of internal generators are included out of the box for creating strings, numeric types, dates, collections, and so on. Custom generators can also be defined to satisfy certain use cases:<ul><li><p>Generating types not supported out of the box, for example from third-party libraries such as Guava.</p><li><p>Creating pre-initialised domain objects. Some domain objects require to be constructed in a certain state to be valid. To avoid duplicating the construction logic across different tests, it can be encapsulated by a custom generator that can be reused across the project.</p><li><p>Distributing generators as a library that can be shared across projects.</p></ul><p>The <code>Generator</code> is a functional interface with a single abstract method <code>generate(Random)</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-135-1>1</a></span>
<span class=normal><a href=#__codelineno-135-2>2</a></span>
<span class=normal><a href=#__codelineno-135-3>3</a></span>
<span class=normal><a href=#__codelineno-135-4>4</a></span>
<span class=normal><a href=#__codelineno-135-5>5</a></span>
<span class=normal><a href=#__codelineno-135-6>6</a></span>
<span class=normal><a href=#__codelineno-135-7>7</a></span>
<span class=normal><a href=#__codelineno-135-8>8</a></span>
<span class=normal><a href=#__codelineno-135-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-135-1 name=__codelineno-135-1></a><span class=nd>@FunctionalInterface</span>
<a id=__codelineno-135-2 name=__codelineno-135-2></a><span class=kd>interface</span> <span class=nc>Generator</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-135-3 name=__codelineno-135-3></a>
<a id=__codelineno-135-4 name=__codelineno-135-4></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>);</span>
<a id=__codelineno-135-5 name=__codelineno-135-5></a>
<a id=__codelineno-135-6 name=__codelineno-135-6></a><span class=w>    </span><span class=k>default</span><span class=w> </span><span class=n>Hints</span><span class=w> </span><span class=nf>hints</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-135-7 name=__codelineno-135-7></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span>
<a id=__codelineno-135-8 name=__codelineno-135-8></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-135-9 name=__codelineno-135-9></a><span class=p>}</span>
</code></pre></div></table></div><p>If a generator produces random data, it must use the provided <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/Random.html target=_blank>Random</a> instance to guarantee that the created object can be reproduced for a given seed value. The <code>hints()</code> method is for passing additional instructions to the engine. The most important hint is the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/AfterGenerate.html target=_blank>AfterGenerate</a> action which determines whether the engine should:<ul><li>populate uninitialised fields<li>modify the object by applying matching selectors (if any)</ul><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>An example of specifying hints</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-136-1>1</a></span>
<span class=normal><a href=#__codelineno-136-2>2</a></span>
<span class=normal><a href=#__codelineno-136-3>3</a></span>
<span class=normal><a href=#__codelineno-136-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-136-1 name=__codelineno-136-1></a><span class=nd>@Override</span>
<a id=__codelineno-136-2 name=__codelineno-136-2></a><span class=kd>public</span><span class=w> </span><span class=n>Hints</span><span class=w> </span><span class=nf>hints</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-136-3 name=__codelineno-136-3></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Hints</span><span class=p>.</span><span class=na>afterGenerate</span><span class=p>(</span><span class=n>AfterGenerate</span><span class=p>.</span><span class=na>APPLY_SELECTORS</span><span class=p>);</span>
<a id=__codelineno-136-4 name=__codelineno-136-4></a><span class=p>}</span>
</code></pre></div></table></div><p>In short, the <code>AfterGenerate</code> enum defines what should happen to an object returned by a generator. The exact semantics of <code>AfterGenerate</code> actions vary depending on the type of object. Different rules are applied to POJOs, arrays, collections, and records. For example, if a generator returns an instance of a <code>record</code>, the returned instance cannot be modified regardless of the <code>AfterGenerate</code> hint.<p>The following describes the actions as they apply to POJOs:<ul><li><p><strong><code>DO_NOT_MODIFY</code></strong></p> <p>Indicates that the object created by the generator should not be modified. The engine will treat the object as read-only and assign it to the target field as is. Matching selectors will not be applied.</p><li><p><strong><code>APPLY_SELECTORS</code></strong></p> <p>Indicates that the object can only be modified via matching selectors using <code>set()</code>, <code>supply()</code>, and <code>generate()</code> methods.</p><li><p><strong><code>POPULATE_NULLS</code></strong></p> <p>Indicates that <code>null</code> fields declared by the object should be populated. In addition, the object will be modifiable using selectors as described by above by <code>APPLY_SELECTORS</code>.</p><li><p><strong><code>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</code></strong> <strong>(default behaviour)</strong></p> <p>Indicates that primitive fields with default values declared by the object should be populated. In addition, the behaviour described by <code>POPULATE_NULLS</code> applies as well. Default primitives are defined as:</p> <ul><li><code>0</code> for all numeric types<li><code>false</code> for <code>boolean</code><li><code>'\u0000'</code> for <code>char</code></ul><li><p><strong><code>POPULATE_ALL</code></strong></p> <p>Indicates that all fields should be populated, regardless of their initial values. This action will cause all the values to be overwritten with random data. This is the default mode the engine operates in when using internal generators.</p></ul><p>When defining custom array or collection generators, the following hints can also be used:<ul><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/hints/ArrayHint.html target=_blank>ArrayHint</a><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/hints/CollectionHint.html target=_blank>CollectionHint</a><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/hints/MapHint.html target=_blank>MapHint</a></ul><h4 id=custom-generator-example>Custom Generator Example<a title="Permanent link" class=headerlink href=#custom-generator-example>¶</a></h4><p>To illustrate the above with an example, consider the following generator that creates an instance of a <code>Phone</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-137-1> 1</a></span>
<span class=normal><a href=#__codelineno-137-2> 2</a></span>
<span class=normal><a href=#__codelineno-137-3> 3</a></span>
<span class=normal><a href=#__codelineno-137-4> 4</a></span>
<span class=normal><a href=#__codelineno-137-5> 5</a></span>
<span class=normal><a href=#__codelineno-137-6> 6</a></span>
<span class=normal><a href=#__codelineno-137-7> 7</a></span>
<span class=normal><a href=#__codelineno-137-8> 8</a></span>
<span class=normal><a href=#__codelineno-137-9> 9</a></span>
<span class=normal><a href=#__codelineno-137-10>10</a></span>
<span class=normal><a href=#__codelineno-137-11>11</a></span>
<span class=normal><a href=#__codelineno-137-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-137-1 name=__codelineno-137-1></a><span class=kd>class</span> <span class=nc>PhoneGenerator</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Generator</span><span class=o><</span><span class=n>Phone</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-137-2 name=__codelineno-137-2></a>
<a id=__codelineno-137-3 name=__codelineno-137-3></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-137-4 name=__codelineno-137-4></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Phone</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-137-5 name=__codelineno-137-5></a><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>countryCodeLength</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random</span><span class=p>.</span><span class=na>intRange</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-137-6 name=__codelineno-137-6></a>
<a id=__codelineno-137-7 name=__codelineno-137-7></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Phone</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span>
<a id=__codelineno-137-8 name=__codelineno-137-8></a><span class=w>            </span><span class=p>.</span><span class=na>countryCode</span><span class=p>(</span><span class=s>"+"</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>random</span><span class=p>.</span><span class=na>digits</span><span class=p>(</span><span class=n>countryCodeLength</span><span class=p>))</span>
<a id=__codelineno-137-9 name=__codelineno-137-9></a><span class=w>            </span><span class=p>.</span><span class=na>number</span><span class=p>(</span><span class=n>random</span><span class=p>.</span><span class=na>digits</span><span class=p>(</span><span class=mi>8</span><span class=p>))</span>
<a id=__codelineno-137-10 name=__codelineno-137-10></a><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>();</span>
<a id=__codelineno-137-11 name=__codelineno-137-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-137-12 name=__codelineno-137-12></a><span class=p>}</span>
</code></pre></div></table></div><p>Since no <code>hints()</code> are specified, the default <code>AfterGenerate</code> action is <code>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</code>. Therefore, the generated object can be customised using selectors:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-138-1>1</a></span>
<span class=normal><a href=#__codelineno-138-2>2</a></span>
<span class=normal><a href=#__codelineno-138-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-138-1 name=__codelineno-138-1></a><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-138-2 name=__codelineno-138-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>::</span><span class=n>getCountryCode</span><span class=p>),</span><span class=w> </span><span class=s>"+55"</span><span class=p>)</span>
<a id=__codelineno-138-3 name=__codelineno-138-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This will produce an object like <code>Phone[countryCode="+55", number="83703291"]</code>, where the <code>number</code> is set by the <code>PhoneGenerator</code>, and the <code>countryCode</code> is overridden by applying the selector. For certain use cases, it may be necessary to prevent deliberate or accidental modification of generated objects. In such cases, the generator can include the <code>DO_NOT_MODIFY</code> hint as shown below:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-139-1> 1</a></span>
<span class=normal><a href=#__codelineno-139-2> 2</a></span>
<span class=normal><a href=#__codelineno-139-3> 3</a></span>
<span class=normal><a href=#__codelineno-139-4> 4</a></span>
<span class=normal><a href=#__codelineno-139-5> 5</a></span>
<span class=normal><a href=#__codelineno-139-6> 6</a></span>
<span class=normal><a href=#__codelineno-139-7> 7</a></span>
<span class=normal><a href=#__codelineno-139-8> 8</a></span>
<span class=normal><a href=#__codelineno-139-9> 9</a></span>
<span class=normal><a href=#__codelineno-139-10>10</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-139-1 name=__codelineno-139-1></a><span class=kd>class</span> <span class=nc>PhoneGenerator</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Generator</span><span class=o><</span><span class=n>Phone</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-139-2 name=__codelineno-139-2></a>
<a id=__codelineno-139-3 name=__codelineno-139-3></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-139-4 name=__codelineno-139-4></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Phone</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=cm>/* same as before */</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-139-5 name=__codelineno-139-5></a>
<a id=__codelineno-139-6 name=__codelineno-139-6></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-139-7 name=__codelineno-139-7></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Hints</span><span class=w> </span><span class=nf>hints</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-139-8 name=__codelineno-139-8></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Hints</span><span class=p>.</span><span class=na>afterGenerate</span><span class=p>(</span><span class=n>AfterGenerate</span><span class=p>.</span><span class=na>DO_NOT_MODIFY</span><span class=p>);</span>
<a id=__codelineno-139-9 name=__codelineno-139-9></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-139-10 name=__codelineno-139-10></a><span class=p>}</span>
</code></pre></div></table></div><p>In summary, a generator can instantiate an object and instruct the engine what should be done with the object after <code>generate()</code> method returns using the <code>AfterGenerate</code> hint.<div class="admonition warning"><p class=admonition-title>Generating <code>record</code> objects<p>It should be noted that if a generator returns an instance of a <code>record</code>, then the created object cannot be modified regardless of the <code>AfterGenerate</code> hint. This is due to immutability of records, since they cannot be modified after construction.</div><div class="admonition info"><p class=admonition-title>Custom generators can also be specified using the <a href=#instancio-service-provider-interface>Instancio Service Provider Interface</a></div><h2 id=assignment-settings>Assignment Settings<a title="Permanent link" class=headerlink href=#assignment-settings>¶</a></h2><p>Assignment settings control whether values are assigned directly to fields (default behaviour) or via setter methods. There are a few setting <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Keys.html target=_blank>Keys</a> that control the behaviour.<table><thead><tr><th><code>Keys</code> constant<th>Value type<th>Default<th>Description<tbody><tr><td><code>ASSIGNMENT_TYPE</code><td><code>AssignmentType</code><td><code>FIELD</code><td>Should values be assigned via fields or setters<tr><td><code>SETTER_STYLE</code><td><code>SetterStyle</code><td><code>SET</code><td>Naming convention used for setters<tr><td><code>ON_SET_FIELD_ERROR</code><td><code>OnSetFieldError</code><td><code>IGNORE</code><td>What should happen if field assignment fails<tr><td><code>ON_SET_METHOD_ERROR</code><td><code>OnSetMethodError</code><td><code>ASSIGN_FIELD</code><td>What should happen if method assignment fails<tr><td><code>ON_SET_METHOD_NOT_FOUND</code><td><code>OnSetMethodNotFound</code><td><code>ASSIGN_FIELD</code><td>What should happen if a field does not have a matching setter<tr><td><code>ON_SET_METHOD_UNMATCHED</code><td><code>OnSetMethodUnmatched</code><td><code>IGNORE</code><td>What should happen if a setter does not have a matching field<tr><td><code>SETTER_EXCLUDE_MODIFIER</code><td><code>int</code><td><code>0</code> (none)<td>Which setters should be ignored based on method modifiers<tr><td><code>OVERWRITE_EXISTING_VALUES</code><td><code>boolean</code><td><code>true</code><td>Should initialised fields be overwritten with random values</table><p>To enable assignment via methods, <code>Keys.ASSIGNMENT_TYPE</code> can be set to <code>AssignmentType.METHOD</code>. This setting only applies to mutable fields because <code>final</code> fields cannot have setters. For non-static <code>final</code> fields Instancio will fall back to <code>AssignmentType.FIELD</code>.<p>When method assignment is enabled, Instancio will attempt to resolve setter names from field names using <code>SETTER_STYLE</code> setting. This key's value is the <code>SetterStyle</code> enum that supports three naming conventions:<ul><li><code>SET</code> - standard setter prefix: <code>setFoo("value")</code><li><code>WITH</code> - for example: <code>withFoo("value")</code><li><code>PROPERTY</code> - no prefix: <code>foo("value")</code></ul><p>There might be cases where a setter does not match any field using the configured naming convention. <code>ON_SET_METHOD_UNMATCHED</code> determines what happens in such cases. The default value is <code>OnSetMethodUnmatched.IGNORE</code>, therefore unmatched setters will not be invoked. The behaviour can be overridden by setting the value to <code>OnSetMethodUnmatched.INVOKE</code>.<div class="admonition warning"><p class=admonition-title>Special care must be taken when enabling unmatched setters in the presence of <a href=#overloaded-unmatched-setters>overloaded setters</a>.</div><p><code>SETTER_EXCLUDE_MODIFIER</code> specifies whether setters with certain method modifiers should be ignored (by default, there are no exclusions). For example, using this setting it is possible to instruct Instancio to ignore private and package-private setters.<p>The remaining <code>ON_SET_*</code> keys are used to control error-handling behaviour:<table><thead><tr><th>Key<th>Possible causes<tbody><tr><td><code>ON_SET_FIELD_ERROR</code><td>type mismatch, unmodifiable field, access exception<tr><td><code>ON_SET_METHOD_ERROR</code><td>type mismatch, an exception is thrown by setter (e.g. due to validation)<tr><td><code>ON_SET_METHOD_NOT_FOUND</code><td>method does not exist, or the name does not conform to the naming convention defined by <code>SetterStyle</code></table><p>All of the above can be set to ignore errors or fail fast by raising an exception. In addition, both <code>ON_SET_METHOD_*</code> settings can be configured to fall back to field assignment in case of an error.<div class="admonition warning"><p class=admonition-title>Setting <code>Keys.ON_SET_FIELD_ERROR</code> to <code>OnSetFieldError.IGNORE</code><p>An error caused by assigning an incompatible type is considered a user error and is never ignored.<br><br> For example, attempting to <code>set(allStrings(), 12345)</code> will always trigger an error regardless of the <code>ON_SET_FIELD_ERROR</code> setting.</div><p>The following snippet illustrates how to create an object populated via setters. In this example, <code>SetterStyle.PROPERTY</code> is used since the <code>Phone</code> class has setters without the <em>set</em> prefix:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Populating via setters</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-140-1> 1</a></span>
<span class=normal><a href=#__codelineno-140-2> 2</a></span>
<span class=normal><a href=#__codelineno-140-3> 3</a></span>
<span class=normal><a href=#__codelineno-140-4> 4</a></span>
<span class=normal><a href=#__codelineno-140-5> 5</a></span>
<span class=normal><a href=#__codelineno-140-6> 6</a></span>
<span class=normal><a href=#__codelineno-140-7> 7</a></span>
<span class=normal><a href=#__codelineno-140-8> 8</a></span>
<span class=normal><a href=#__codelineno-140-9> 9</a></span>
<span class=normal><a href=#__codelineno-140-10>10</a></span>
<span class=normal><a href=#__codelineno-140-11>11</a></span>
<span class=normal><a href=#__codelineno-140-12>12</a></span>
<span class=normal><a href=#__codelineno-140-13>13</a></span>
<span class=normal><a href=#__codelineno-140-14>14</a></span>
<span class=normal><a href=#__codelineno-140-15>15</a></span>
<span class=normal><a href=#__codelineno-140-16>16</a></span>
<span class=normal><a href=#__codelineno-140-17>17</a></span>
<span class=normal><a href=#__codelineno-140-18>18</a></span>
<span class=normal><a href=#__codelineno-140-19>19</a></span>
<span class=normal><a href=#__codelineno-140-20>20</a></span>
<span class=normal><a href=#__codelineno-140-21>21</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-140-1 name=__codelineno-140-1></a><span class=kd>class</span> <span class=nc>Phone</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-140-2 name=__codelineno-140-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>areaCode</span><span class=p>;</span>
<a id=__codelineno-140-3 name=__codelineno-140-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>;</span>
<a id=__codelineno-140-4 name=__codelineno-140-4></a>
<a id=__codelineno-140-5 name=__codelineno-140-5></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>areaCode</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>areaCode</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-140-6 name=__codelineno-140-6></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>areaCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>areaCode</span><span class=p>;</span>
<a id=__codelineno-140-7 name=__codelineno-140-7></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-140-8 name=__codelineno-140-8></a>
<a id=__codelineno-140-9 name=__codelineno-140-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>number</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-140-10 name=__codelineno-140-10></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>number</span><span class=p>;</span>
<a id=__codelineno-140-11 name=__codelineno-140-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-140-12 name=__codelineno-140-12></a><span class=p>}</span>
<a id=__codelineno-140-13 name=__codelineno-140-13></a>
<a id=__codelineno-140-14 name=__codelineno-140-14></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-140-15 name=__codelineno-140-15></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
<a id=__codelineno-140-16 name=__codelineno-140-16></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SETTER_STYLE</span><span class=p>,</span><span class=w> </span><span class=n>SetterStyle</span><span class=p>.</span><span class=na>PROPERTY</span><span class=p>)</span>
<a id=__codelineno-140-17 name=__codelineno-140-17></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_ERROR</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodError</span><span class=p>.</span><span class=na>IGNORE</span><span class=p>);</span>
<a id=__codelineno-140-18 name=__codelineno-140-18></a>
<a id=__codelineno-140-19 name=__codelineno-140-19></a><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-140-20 name=__codelineno-140-20></a><span class=w>        </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-140-21 name=__codelineno-140-21></a><span class=w>        </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> can be specified per object, as shown above, or globally using a properties file:<div class=highlight><pre><span></span><code><a href=#__codelineno-141-1 id=__codelineno-141-1 name=__codelineno-141-1></a><span class=na>assignment.type</span><span class=o>=</span><span class=s>METHOD</span>
<a href=#__codelineno-141-2 id=__codelineno-141-2 name=__codelineno-141-2></a><span class=na>setter.style</span><span class=o>=</span><span class=s>PROPERTY</span>
<a href=#__codelineno-141-3 id=__codelineno-141-3 name=__codelineno-141-3></a><span class=na>on.set.method.error</span><span class=o>=</span><span class=s>IGNORE</span>
</code></pre></div><p>See <a href=#configuration>Configuration</a> for details.<h3 id=unmatched-setters>Unmatched Setters<a title="Permanent link" class=headerlink href=#unmatched-setters>¶</a></h3><p>When <code>Keys.ASSIGNMENT_TYPE</code> is set to <code>METHOD</code>, Instancio parses fields <em>and</em> setters declared by a class. In addition, it attempts to match each field to the corresponding setter using its name and parameter type. If a setter does not have a matching field, it is treated as <em>unmatched</em>. This can be illustrated using the following <code>Person</code> class.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-142-1> 1</a></span>
<span class=normal><a href=#__codelineno-142-2> 2</a></span>
<span class=normal><a href=#__codelineno-142-3> 3</a></span>
<span class=normal><a href=#__codelineno-142-4> 4</a></span>
<span class=normal><a href=#__codelineno-142-5> 5</a></span>
<span class=normal><a href=#__codelineno-142-6> 6</a></span>
<span class=normal><a href=#__codelineno-142-7> 7</a></span>
<span class=normal><a href=#__codelineno-142-8> 8</a></span>
<span class=normal><a href=#__codelineno-142-9> 9</a></span>
<span class=normal><a href=#__codelineno-142-10>10</a></span>
<span class=normal><a href=#__codelineno-142-11>11</a></span>
<span class=normal><a href=#__codelineno-142-12>12</a></span>
<span class=normal><a href=#__codelineno-142-13>13</a></span>
<span class=normal><a href=#__codelineno-142-14>14</a></span>
<span class=normal><a href=#__codelineno-142-15>15</a></span>
<span class=normal><a href=#__codelineno-142-16>16</a></span>
<span class=normal><a href=#__codelineno-142-17>17</a></span>
<span class=normal><a href=#__codelineno-142-18>18</a></span>
<span class=normal><a href=#__codelineno-142-19>19</a></span>
<span class=normal><a href=#__codelineno-142-20>20</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-142-1 name=__codelineno-142-1></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-142-2 name=__codelineno-142-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Map</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>attributes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o><></span><span class=p>();</span>
<a id=__codelineno-142-3 name=__codelineno-142-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a id=__codelineno-142-4 name=__codelineno-142-4></a>
<a id=__codelineno-142-5 name=__codelineno-142-5></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>getName</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-142-6 name=__codelineno-142-6></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a id=__codelineno-142-7 name=__codelineno-142-7></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-142-8 name=__codelineno-142-8></a>
<a id=__codelineno-142-9 name=__codelineno-142-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>setName</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-142-10 name=__codelineno-142-10></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span>
<a id=__codelineno-142-11 name=__codelineno-142-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-142-12 name=__codelineno-142-12></a>
<a id=__codelineno-142-13 name=__codelineno-142-13></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=nf>getFavouriteFood</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-142-14 name=__codelineno-142-14></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>attributes</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>"FAVOURITE_FOOD"</span><span class=p>);</span>
<a id=__codelineno-142-15 name=__codelineno-142-15></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-142-16 name=__codelineno-142-16></a>
<a id=__codelineno-142-17 name=__codelineno-142-17></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>setFavouriteFood</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>favouriteFood</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-142-18 name=__codelineno-142-18></a><span class=w>        </span><span class=n>attributes</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>"FAVOURITE_FOOD"</span><span class=p>,</span><span class=w> </span><span class=n>favouriteFood</span><span class=p>);</span>
<a id=__codelineno-142-19 name=__codelineno-142-19></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-142-20 name=__codelineno-142-20></a><span class=p>}</span>
</code></pre></div></table></div><p>The class has the <code>setName(String)</code> method that matches the <code>String name</code> field. In addition, it has the <code>setFavouriteFood(String)</code> method. This setter is unmatched because it does not have a corresponding <code>String favouriteFood</code> field.<table><thead><tr><th>Field<th>Setter<th><tbody><tr><td><code>String name</code><td><code>setName(String)</code><td>Matched setter<tr><td><code>-</code><td><code>setFavouriteFood(String)</code><td>Unmatched setter</table><h4 id=using-onsetmethodunmatchedinvoke>Using <code>OnSetMethodUnmatched.INVOKE</code><a title="Permanent link" class=headerlink href=#using-onsetmethodunmatchedinvoke>¶</a></h4><p>In the first example, we will create an object with the following settings and <code>verbose()</code> mode enabled:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-143-1>1</a></span>
<span class=normal><a href=#__codelineno-143-2>2</a></span>
<span class=normal><a href=#__codelineno-143-3>3</a></span>
<span class=normal><a href=#__codelineno-143-4>4</a></span>
<span class=normal><a href=#__codelineno-143-5>5</a></span>
<span class=normal><a href=#__codelineno-143-6>6</a></span>
<span class=normal><a href=#__codelineno-143-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-143-1 name=__codelineno-143-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-143-2 name=__codelineno-143-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-143-3 name=__codelineno-143-3></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
</span><a id=__codelineno-143-4 name=__codelineno-143-4></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_NOT_FOUND</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodNotFound</span><span class=p>.</span><span class=na>IGNORE</span><span class=p>)</span>
</span><a id=__codelineno-143-5 name=__codelineno-143-5></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_UNMATCHED</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodUnmatched</span><span class=p>.</span><span class=na>INVOKE</span><span class=p>))</span>
</span><a id=__codelineno-143-6 name=__codelineno-143-6></a><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
<a id=__codelineno-143-7 name=__codelineno-143-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>3</lnum> Assign values via setter methods instead of fields.<br> <lnum>4</lnum> Ignore fields that do not have a setter.<br> <lnum>5</lnum> Invoke unmatched setters.</div><p><code>verbose()</code> mode prints the node hierarchy to standard out:<div class=highlight><pre><span></span><code><a href=#__codelineno-144-1 id=__codelineno-144-1 name=__codelineno-144-1></a>&LT0:Person>
<a href=#__codelineno-144-2 id=__codelineno-144-2 name=__codelineno-144-2></a> ├──&LT1:Person: Map&LTString, String> attributes>    // Field without a setter
<a href=#__codelineno-144-3 id=__codelineno-144-3 name=__codelineno-144-3></a> │   ├──&LT2:String>  // map key
<a href=#__codelineno-144-4 id=__codelineno-144-4 name=__codelineno-144-4></a> │   └──&LT2:String>  // map value
<a href=#__codelineno-144-5 id=__codelineno-144-5 name=__codelineno-144-5></a> ├──&LT1:Person: String name; setName(String)>      // Field with a setter
<a href=#__codelineno-144-6 id=__codelineno-144-6 name=__codelineno-144-6></a> └──&LT1:Person: setFavouriteFood(String)>          // Setter without a field (unmatched setter)
</code></pre></div><p>The following is a sample object generated by the snippet:<div class=highlight><pre><span></span><code><a href=#__codelineno-145-1 id=__codelineno-145-1 name=__codelineno-145-1></a>Person(name=OHARWES, attributes={FAVOURITE_FOOD=JRKB})
</code></pre></div><p>The <code>attributes</code> map was not populated with random entries because <code>ON_SET_METHOD_NOT_FOUND</code> was set to <code>OnSetMethodNotFound.IGNORE</code>. However, since <code>ON_SET_METHOD_UNMATCHED</code> was set to <code>OnSetMethodUnmatched.INVOKE</code>, Instancio invoked the <code>setFavouriteFood</code> method passing in a random value. Therefore, the map contains a <code>FAVOURITE_FOOD</code> entry.<p>Next, we will set <code>ON_SET_METHOD_NOT_FOUND</code> to <code>OnSetMethodNotFound.ASSIGN_FIELD</code>, keeping everything else the same:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-146-1>1</a></span>
<span class=normal><a href=#__codelineno-146-2>2</a></span>
<span class=normal><a href=#__codelineno-146-3>3</a></span>
<span class=normal><a href=#__codelineno-146-4>4</a></span>
<span class=normal><a href=#__codelineno-146-5>5</a></span>
<span class=normal><a href=#__codelineno-146-6>6</a></span>
<span class=normal><a href=#__codelineno-146-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-146-1 name=__codelineno-146-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-146-2 name=__codelineno-146-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-146-3 name=__codelineno-146-3></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
<a id=__codelineno-146-4 name=__codelineno-146-4></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_NOT_FOUND</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodNotFound</span><span class=p>.</span><span class=na>ASSIGN_FIELD</span><span class=p>)</span>
</span><a id=__codelineno-146-5 name=__codelineno-146-5></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_UNMATCHED</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodUnmatched</span><span class=p>.</span><span class=na>INVOKE</span><span class=p>))</span>
<a id=__codelineno-146-6 name=__codelineno-146-6></a><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
<a id=__codelineno-146-7 name=__codelineno-146-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This time, a sample output might look as follows:<div class=highlight><pre><span></span><code><a href=#__codelineno-147-1 id=__codelineno-147-1 name=__codelineno-147-1></a>Person(name=EJH, attributes={YQJ=CDQVQVL, WTUHE=GWXZ, FAVOURITE_FOOD=XCF, TYLHQJ=GKDIH})
</code></pre></div><p>In the above example, Instancio generates a map with random values and assigns it directly via the field since it does not have a setter. <code>setFavouriteFood</code> is also invoked, which adds the <code>FAVOURITE_FOOD</code> entry to the map.<h4 id=using-onsetmethodunmatchedignore>Using <code>OnSetMethodUnmatched.IGNORE</code><a title="Permanent link" class=headerlink href=#using-onsetmethodunmatchedignore>¶</a></h4><p>In the next example, we modify the above snippet to set <code>ON_SET_METHOD_UNMATCHED</code> to <code>OnSetMethodUnmatched.IGNORE</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-148-1>1</a></span>
<span class=normal><a href=#__codelineno-148-2>2</a></span>
<span class=normal><a href=#__codelineno-148-3>3</a></span>
<span class=normal><a href=#__codelineno-148-4>4</a></span>
<span class=normal><a href=#__codelineno-148-5>5</a></span>
<span class=normal><a href=#__codelineno-148-6>6</a></span>
<span class=normal><a href=#__codelineno-148-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-148-1 name=__codelineno-148-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-148-2 name=__codelineno-148-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-148-3 name=__codelineno-148-3></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
<a id=__codelineno-148-4 name=__codelineno-148-4></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_NOT_FOUND</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodNotFound</span><span class=p>.</span><span class=na>IGNORE</span><span class=p>)</span>
<a id=__codelineno-148-5 name=__codelineno-148-5></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_UNMATCHED</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodUnmatched</span><span class=p>.</span><span class=na>IGNORE</span><span class=p>))</span>
</span><a id=__codelineno-148-6 name=__codelineno-148-6></a><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
<a id=__codelineno-148-7 name=__codelineno-148-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Since unmatched setters are ignored, the node hierarchy does not have the <code>&LT1:Person: setFavouriteFood(String)></code> node:<div class=highlight><pre><span></span><code><a href=#__codelineno-149-1 id=__codelineno-149-1 name=__codelineno-149-1></a>&LT0:Person>
<a href=#__codelineno-149-2 id=__codelineno-149-2 name=__codelineno-149-2></a> ├──&LT1:Person: Map&LTString, String> attributes>
<a href=#__codelineno-149-3 id=__codelineno-149-3 name=__codelineno-149-3></a> │   ├──&LT2:String>
<a href=#__codelineno-149-4 id=__codelineno-149-4 name=__codelineno-149-4></a> │   └──&LT2:String>
<a href=#__codelineno-149-5 id=__codelineno-149-5 name=__codelineno-149-5></a> └──&LT1:Person: String name; setName(String)>
</code></pre></div><p>The sample output contains an empty map since the unmatched setter was not invoked:<div class=highlight><pre><span></span><code><a href=#__codelineno-150-1 id=__codelineno-150-1 name=__codelineno-150-1></a>Person(name=NQMNABNBM, attributes={})
</code></pre></div><p>If we modify the last example to set <code>Keys.ON_SET_METHOD_NOT_FOUND</code> to <code>OnSetMethodNotFound.ASSIGN_FIELD</code>, then the <code>attributes</code> map will be populated with random entries but no <code>FAVOURITE_FOOD</code>.<h4 id=overloaded-unmatched-setters>Overloaded unmatched setters<a title="Permanent link" class=headerlink href=#overloaded-unmatched-setters>¶</a></h4><p>Special care must be taken when a field has more than one setter. Consider the following class with two <code>setValue</code> methods:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-151-1> 1</a></span>
<span class=normal><a href=#__codelineno-151-2> 2</a></span>
<span class=normal><a href=#__codelineno-151-3> 3</a></span>
<span class=normal><a href=#__codelineno-151-4> 4</a></span>
<span class=normal><a href=#__codelineno-151-5> 5</a></span>
<span class=normal><a href=#__codelineno-151-6> 6</a></span>
<span class=normal><a href=#__codelineno-151-7> 7</a></span>
<span class=normal><a href=#__codelineno-151-8> 8</a></span>
<span class=normal><a href=#__codelineno-151-9> 9</a></span>
<span class=normal><a href=#__codelineno-151-10>10</a></span>
<span class=normal><a href=#__codelineno-151-11>11</a></span>
<span class=normal><a href=#__codelineno-151-12>12</a></span>
<span class=normal><a href=#__codelineno-151-13>13</a></span>
<span class=normal><a href=#__codelineno-151-14>14</a></span>
<span class=normal><a href=#__codelineno-151-15>15</a></span>
<span class=normal><a href=#__codelineno-151-16>16</a></span>
<span class=normal><a href=#__codelineno-151-17>17</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-151-1 name=__codelineno-151-1></a><span class=kd>class</span> <span class=nc>Pojo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-151-2 name=__codelineno-151-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
<a id=__codelineno-151-3 name=__codelineno-151-3></a>
<a id=__codelineno-151-4 name=__codelineno-151-4></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>getValue</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-151-5 name=__codelineno-151-5></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
<a id=__codelineno-151-6 name=__codelineno-151-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-151-7 name=__codelineno-151-7></a>
<a id=__codelineno-151-8 name=__codelineno-151-8></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>setValue</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-151-9 name=__codelineno-151-9></a><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>"setValue(int) called with: "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>value</span><span class=p>);</span>
<a id=__codelineno-151-10 name=__codelineno-151-10></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
<a id=__codelineno-151-11 name=__codelineno-151-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-151-12 name=__codelineno-151-12></a>
<a id=__codelineno-151-13 name=__codelineno-151-13></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>setValue</span><span class=p>(</span><span class=kt>double</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-151-14 name=__codelineno-151-14></a><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>"setValue(double) called with: "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>value</span><span class=p>);</span>
<a id=__codelineno-151-15 name=__codelineno-151-15></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
<a id=__codelineno-151-16 name=__codelineno-151-16></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-151-17 name=__codelineno-151-17></a><span class=p>}</span>
</code></pre></div></table></div><p>At first glance, the following example should produce the <code>value</code> field set to <code>123</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-152-1>1</a></span>
<span class=normal><a href=#__codelineno-152-2>2</a></span>
<span class=normal><a href=#__codelineno-152-3>3</a></span>
<span class=normal><a href=#__codelineno-152-4>4</a></span>
<span class=normal><a href=#__codelineno-152-5>5</a></span>
<span class=normal><a href=#__codelineno-152-6>6</a></span>
<span class=normal><a href=#__codelineno-152-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-152-1 name=__codelineno-152-1></a><span class=n>Pojo</span><span class=w> </span><span class=n>pojo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-152-2 name=__codelineno-152-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-152-3 name=__codelineno-152-3></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
<a id=__codelineno-152-4 name=__codelineno-152-4></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_UNMATCHED</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodUnmatched</span><span class=p>.</span><span class=na>INVOKE</span><span class=p>))</span>
<a id=__codelineno-152-5 name=__codelineno-152-5></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Pojo</span><span class=p>::</span><span class=n>getValue</span><span class=p>),</span><span class=w> </span><span class=mi>123</span><span class=p>)</span>
<a id=__codelineno-152-6 name=__codelineno-152-6></a><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
<a id=__codelineno-152-7 name=__codelineno-152-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>However, running the snippet will produce the following output:<div class=highlight><pre><span></span><code><a href=#__codelineno-153-1 id=__codelineno-153-1 name=__codelineno-153-1></a>setValue(int) called with: 123
<a href=#__codelineno-153-2 id=__codelineno-153-2 name=__codelineno-153-2></a>setValue(double) called with: 7387.1580772
</code></pre></div><p>This is because <code>ON_SET_METHOD_UNMATCHED</code> is set to <code>OnSetMethodUnmatched.INVOKE</code>, which results in two nodes related to the <code>value</code> field:<div class=highlight><pre><span></span><code><a href=#__codelineno-154-1 id=__codelineno-154-1 name=__codelineno-154-1></a>&LT0:Pojo>
<a href=#__codelineno-154-2 id=__codelineno-154-2 name=__codelineno-154-2></a> ├──&LT1:Pojo: int value; setValue(int)>      // field with matching setter
<a href=#__codelineno-154-3 id=__codelineno-154-3 name=__codelineno-154-3></a> └──&LT1:Pojo: setValue(double)>              // unmatched setter without a field
</code></pre></div><p>Instancio would populate each of these nodes. Nodes that have fields are populated first, and nodes without fields (unmatched setters) are last. The reason for this is that unmatched setters often require fields to be initialised before being invoked (for instance, an unmatched setter might be adding an element to a collection).<p>Therefore, for the above snippet to produce the expected value of <code>123</code>, the <code>setValue(double)</code> method would need to be ignored (or <code>ON_SET_METHOD_UNMATCHED</code> set to <code>OnSetMethodUnmatched.IGNORE</code>):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-155-1>1</a></span>
<span class=normal><a href=#__codelineno-155-2>2</a></span>
<span class=normal><a href=#__codelineno-155-3>3</a></span>
<span class=normal><a href=#__codelineno-155-4>4</a></span>
<span class=normal><a href=#__codelineno-155-5>5</a></span>
<span class=normal><a href=#__codelineno-155-6>6</a></span>
<span class=normal><a href=#__codelineno-155-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-155-1 name=__codelineno-155-1></a><span class=n>Pojo</span><span class=w> </span><span class=n>pojo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-155-2 name=__codelineno-155-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-155-3 name=__codelineno-155-3></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>)</span>
<a id=__codelineno-155-4 name=__codelineno-155-4></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ON_SET_METHOD_UNMATCHED</span><span class=p>,</span><span class=w> </span><span class=n>OnSetMethodUnmatched</span><span class=p>.</span><span class=na>INVOKE</span><span class=p>))</span>
<a id=__codelineno-155-5 name=__codelineno-155-5></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Pojo</span><span class=p>::</span><span class=n>getValue</span><span class=p>),</span><span class=w> </span><span class=mi>123</span><span class=p>)</span>
<a id=__codelineno-155-6 name=__codelineno-155-6></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>ignore</span><span class=p>(</span><span class=n>setter</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=s>"setValue"</span><span class=p>,</span><span class=w> </span><span class=kt>double</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</span><a id=__codelineno-155-7 name=__codelineno-155-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>6</lnum> Because the method is overloaded, the selector <code>setter(Pojo.class, "setValue", double.class)</code> must be used to specify the parameter explicitly, instead of the more concise <code>setter(Pojo::setValue)</code>.</div><h3 id=initialised-fields>Initialised Fields<a title="Permanent link" class=headerlink href=#initialised-fields>¶</a></h3><p>The setting <code>Keys.OVERWRITE_EXISTING_VALUES</code> controls whether Instancio can overwrite initialised fields with random values. "Initialised" is defined as having a non-default value. Default values are:<ul><li><code>0</code> for <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code>, and <code>char</code><li><code>false</code> for <code>boolean</code><li><code>null</code> for <code>Object</code></ul><p>Below are a few examples of how this setting works using the following class (getters and setters omitted):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-156-1>1</a></span>
<span class=normal><a href=#__codelineno-156-2>2</a></span>
<span class=normal><a href=#__codelineno-156-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-156-1 name=__codelineno-156-1></a><span class=kd>class</span> <span class=nc>Foo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-156-2 name=__codelineno-156-2></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"initial"</span><span class=p>;</span>
<a id=__codelineno-156-3 name=__codelineno-156-3></a><span class=p>}</span>
</code></pre></div></table></div><p>By default, <code>OVERWRITE_EXISTING_VALUES</code> is set to <code>true</code>. As a result, Instancio overwrites initialised fields with random values.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Default behaviour</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-157-1>1</a></span>
<span class=normal><a href=#__codelineno-157-2>2</a></span>
<span class=normal><a href=#__codelineno-157-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-157-1 name=__codelineno-157-1></a><span class=n>Foo</span><span class=w> </span><span class=n>foo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-157-2 name=__codelineno-157-2></a>
<a id=__codelineno-157-3 name=__codelineno-157-3></a><span class=hll><span class=c1>// Sample output: Foo[value=VEQHJ]</span>
</span></code></pre></div></table></div><p>When <code>OVERWRITE_EXISTING_VALUES</code> is set to false <code>false</code>, the initialised value is preserved.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Preserve initialised values</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-158-1>1</a></span>
<span class=normal><a href=#__codelineno-158-2>2</a></span>
<span class=normal><a href=#__codelineno-158-3>3</a></span>
<span class=normal><a href=#__codelineno-158-4>4</a></span>
<span class=normal><a href=#__codelineno-158-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-158-1 name=__codelineno-158-1></a><span class=n>Foo</span><span class=w> </span><span class=n>foo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-158-2 name=__codelineno-158-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>OVERWRITE_EXISTING_VALUES</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>)</span>
</span><a id=__codelineno-158-3 name=__codelineno-158-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-158-4 name=__codelineno-158-4></a>
<a id=__codelineno-158-5 name=__codelineno-158-5></a><span class=hll><span class=c1>// Output: Foo[value=initial]</span>
</span></code></pre></div></table></div><p>Finally, regardless of the <code>OVERWRITE_EXISTING_VALUES</code> setting, initialised values can be overwritten using a selector.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Overwrite initialised value using a selector</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-159-1>1</a></span>
<span class=normal><a href=#__codelineno-159-2>2</a></span>
<span class=normal><a href=#__codelineno-159-3>3</a></span>
<span class=normal><a href=#__codelineno-159-4>4</a></span>
<span class=normal><a href=#__codelineno-159-5>5</a></span>
<span class=normal><a href=#__codelineno-159-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-159-1 name=__codelineno-159-1></a><span class=n>Foo</span><span class=w> </span><span class=n>foo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Foo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-159-2 name=__codelineno-159-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>OVERWRITE_EXISTING_VALUES</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>)</span>
<a id=__codelineno-159-3 name=__codelineno-159-3></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Foo</span><span class=p>::</span><span class=n>getValue</span><span class=p>),</span><span class=w> </span><span class=s>"Hello"</span><span class=p>)</span>
</span><a id=__codelineno-159-4 name=__codelineno-159-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-159-5 name=__codelineno-159-5></a>
<a id=__codelineno-159-6 name=__codelineno-159-6></a><span class=hll><span class=c1>// Output: Foo[value=Hello]</span>
</span></code></pre></div></table></div><h2 id=maximum-depth-setting>Maximum Depth Setting<a title="Permanent link" class=headerlink href=#maximum-depth-setting>¶</a></h2><p>This setting controls the maximum depth for populating an object. Instancio will populate values up to the maximum depth. Beyond that, values will be <code>null</code> unless the maximum depth is set to a higher value.<p>The count starts from the root object, which is at depth 0. Children of the root object are at depth 1, grandchildren at depth 2, and so on. The default value is defined by the <code>Keys.MAX_DEPTH</code> setting key.<p>The primary reasons for modifying this setting are:<ul><li><p><strong>To improve the performance.</strong></p> <p>The performance may be inadequate when generating data for large complex classes. Consider reducing the maximum depth value in such cases (and also, using <code>ignore()</code> to exclude certain objects).</p><li><p><strong>To generate data beyond the default maximum depth.</strong></p> <p>If the default maximum depth is not sufficient to fully populate an object, consider increasing the value.</p></ul><h3 id=modifying-maximum-depth>Modifying Maximum Depth<a title="Permanent link" class=headerlink href=#modifying-maximum-depth>¶</a></h3><p>The setting can be set to a custom value using one of the following options, from lowest to highest precedence.<p>Using <code>instancio.properties</code> to define a new global maximum depth:<div class=highlight><pre><span></span><code><a href=#__codelineno-160-1 id=__codelineno-160-1 name=__codelineno-160-1></a><span class=na>max.depth</span><span class=o>=</span><span class=s>15</span>
</code></pre></div><p>Using <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> with <code>Keys.MAX_DEPTH</code> key.<div class=highlight><pre><span></span><code><a href=#__codelineno-161-1 id=__codelineno-161-1 name=__codelineno-161-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>().</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>MAX_DEPTH</span><span class=p>,</span><span class=w> </span><span class=mi>15</span><span class=p>);</span>
<a href=#__codelineno-161-2 id=__codelineno-161-2 name=__codelineno-161-2></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-161-3 id=__codelineno-161-3 name=__codelineno-161-3></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a href=#__codelineno-161-4 id=__codelineno-161-4 name=__codelineno-161-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><p>Using the API method <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withMaxDepth(int) target=_blank>withMaxDepth(int)</a>:<div class=highlight><pre><span></span><code><a href=#__codelineno-162-1 id=__codelineno-162-1 name=__codelineno-162-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a href=#__codelineno-162-2 id=__codelineno-162-2 name=__codelineno-162-2></a><span class=w>    </span><span class=p>.</span><span class=na>withMaxDepth</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span>
<a href=#__codelineno-162-3 id=__codelineno-162-3 name=__codelineno-162-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div><h2 id=cyclic-objects>Cyclic Objects<a title="Permanent link" class=headerlink href=#cyclic-objects>¶</a></h2><p>Data models often have circular relationships. A common example is a one-to-many relationship among JPA entities. Consider the following example where each <code>OrderItem</code> references the <code>Order</code> to which it belongs (getters and setters omitted for brevity):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-163-1>1</a></span>
<span class=normal><a href=#__codelineno-163-2>2</a></span>
<span class=normal><a href=#__codelineno-163-3>3</a></span>
<span class=normal><a href=#__codelineno-163-4>4</a></span>
<span class=normal><a href=#__codelineno-163-5>5</a></span>
<span class=normal><a href=#__codelineno-163-6>6</a></span>
<span class=normal><a href=#__codelineno-163-7>7</a></span>
<span class=normal><a href=#__codelineno-163-8>8</a></span>
<span class=normal><a href=#__codelineno-163-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-163-1 name=__codelineno-163-1></a><span class=kd>class</span> <span class=nc>Order</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-163-2 name=__codelineno-163-2></a><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span>
<a id=__codelineno-163-3 name=__codelineno-163-3></a><span class=w>    </span><span class=n>List</span><span class=o><</span><span class=n>OrderItem</span><span class=o>></span><span class=w> </span><span class=n>items</span><span class=p>;</span>
<a id=__codelineno-163-4 name=__codelineno-163-4></a><span class=p>}</span>
<a id=__codelineno-163-5 name=__codelineno-163-5></a>
<a id=__codelineno-163-6 name=__codelineno-163-6></a><span class=kd>class</span> <span class=nc>OrderItem</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-163-7 name=__codelineno-163-7></a><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span>
<a id=__codelineno-163-8 name=__codelineno-163-8></a><span class=w>    </span><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=p>;</span>
<a id=__codelineno-163-9 name=__codelineno-163-9></a><span class=p>}</span>
</code></pre></div></table></div><p>The default behaviour of Instancio is to terminate cycles with a <code>null</code> reference. For example, the following snippet will produce <code>OrderItem.order</code> references set to <code>null</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-164-1>1</a></span>
<span class=normal><a href=#__codelineno-164-2>2</a></span>
<span class=normal><a href=#__codelineno-164-3>3</a></span>
<span class=normal><a href=#__codelineno-164-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-164-1 name=__codelineno-164-1></a><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Order</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-164-2 name=__codelineno-164-2></a>
<a id=__codelineno-164-3 name=__codelineno-164-3></a><span class=c1>// Sample output:</span>
<a id=__codelineno-164-4 name=__codelineno-164-4></a><span class=c1>// Order(id=2132, items=[OrderItem(id=9318, order=null), OrderItem(id=6077, order=null)])</span>
</code></pre></div></table></div><p>It is, however, possible to set a back-reference to the root object instead of generating <code>null</code>. One way to accomplish this is using the <a href=#using-assign><code>assign()</code></a> API:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-165-1>1</a></span>
<span class=normal><a href=#__codelineno-165-2>2</a></span>
<span class=normal><a href=#__codelineno-165-3>3</a></span>
<span class=normal><a href=#__codelineno-165-4>4</a></span>
<span class=normal><a href=#__codelineno-165-5>5</a></span>
<span class=normal><a href=#__codelineno-165-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-165-1 name=__codelineno-165-1></a><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Order</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-165-2 name=__codelineno-165-2></a><span class=w>    </span><span class=p>.</span><span class=na>assign</span><span class=p>(</span><span class=n>valueOf</span><span class=p>(</span><span class=n>root</span><span class=p>()).</span><span class=na>to</span><span class=p>(</span><span class=n>OrderItem</span><span class=p>::</span><span class=n>getOrder</span><span class=p>))</span>
<a id=__codelineno-165-3 name=__codelineno-165-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-165-4 name=__codelineno-165-4></a>
<a id=__codelineno-165-5 name=__codelineno-165-5></a><span class=n>assertThat</span><span class=p>(</span><span class=n>order</span><span class=p>.</span><span class=na>getItems</span><span class=p>()).</span><span class=na>allSatisfy</span><span class=p>(</span><span class=n>item</span><span class=w> </span><span class=o>-></span>
<a id=__codelineno-165-6 name=__codelineno-165-6></a><span class=w>    </span><span class=n>assertThat</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=na>getOrder</span><span class=p>()).</span><span class=na>isSameAs</span><span class=p>(</span><span class=n>order</span><span class=p>));</span>
</code></pre></div></table></div><p>An alternative option is to assign back-references automatically using the <code>Keys.SET_BACK_REFERENCES</code> setting. The following snippet will produce the same result as the example above:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-166-1>1</a></span>
<span class=normal><a href=#__codelineno-166-2>2</a></span>
<span class=normal><a href=#__codelineno-166-3>3</a></span>
<span class=normal><a href=#__codelineno-166-4>4</a></span>
<span class=normal><a href=#__codelineno-166-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-166-1 name=__codelineno-166-1></a><span class=hll><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>().</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SET_BACK_REFERENCES</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span>
</span><a id=__codelineno-166-2 name=__codelineno-166-2></a>
<a id=__codelineno-166-3 name=__codelineno-166-3></a><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Order</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-166-4 name=__codelineno-166-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
</span><a id=__codelineno-166-5 name=__codelineno-166-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> Note that this setting must be enabled explicitly using <code>Settings</code> or <code>instancio.properties</code></div><p>When this setting is enabled, Instancio will set the <code>OrderItem.order</code> reference to a previously generated <code>Order</code> instance. In this example it happens to be the root object.<p>It should be noted that in certain cases, enabling <code>SET_BACK_REFERENCES</code> may produce unwanted results. Consider the following example of creating an <code>OrderItem</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-167-1>1</a></span>
<span class=normal><a href=#__codelineno-167-2>2</a></span>
<span class=normal><a href=#__codelineno-167-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-167-1 name=__codelineno-167-1></a><span class=n>OrderItem</span><span class=w> </span><span class=n>item</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>OrderItem</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-167-2 name=__codelineno-167-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>().</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SET_BACK_REFERENCES</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>))</span>
<a id=__codelineno-167-3 name=__codelineno-167-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This will produce the following objects:<pre class=mermaid><code>graph LR
  A[OrderItem] --> B[Order];
  B --> C["List&amplt;OrderItem&ampgt;"];</code></pre><p>where <strong>all</strong> elements of <code>List&LTOrderItem></code> are the <strong>same instance</strong> of the <code>OrderItem</code>.<h1 id=cartesian-product>Cartesian Product<a title="Permanent link" class=headerlink href=#cartesian-product>¶</a></h1><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.0.0</code></div><p>The following methods are the entry points for generating the Cartesian product:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Cartesian Product API</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-168-1>1</a></span>
<span class=normal><a href=#__codelineno-168-2>2</a></span>
<span class=normal><a href=#__codelineno-168-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-168-1 name=__codelineno-168-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofCartesianProduct</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>type</span><span class=p>)</span>
<a id=__codelineno-168-2 name=__codelineno-168-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofCartesianProduct</span><span class=p>(</span><span class=n>TypeTokenSupplier</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>)</span>
<a id=__codelineno-168-3 name=__codelineno-168-3></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofCartesianProduct</span><span class=p>(</span><span class=n>Model</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=n>model</span><span class=p>)</span>
</code></pre></div></table></div><p>Inputs can be specified using the following method:<div class=highlight><pre><span></span><code><a href=#__codelineno-169-1 id=__codelineno-169-1 name=__codelineno-169-1></a><span class=n>with</span><span class=p>(</span><span class=n>TargetSelector</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=p>...)</span>
</code></pre></div><p>As an example, consider the snippet below.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-170-1>1</a></span>
<span class=normal><a href=#__codelineno-170-2>2</a></span>
<span class=normal><a href=#__codelineno-170-3>3</a></span>
<span class=normal><a href=#__codelineno-170-4>4</a></span>
<span class=normal><a href=#__codelineno-170-5>5</a></span>
<span class=normal><a href=#__codelineno-170-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-170-1 name=__codelineno-170-1></a><span class=kd>record</span> <span class=nc>Widget</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>type</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-170-2 name=__codelineno-170-2></a>
<a id=__codelineno-170-3 name=__codelineno-170-3></a><span class=n>List</span><span class=o><</span><span class=n>Widget</span><span class=o>></span><span class=w> </span><span class=n>results</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofCartesianProduct</span><span class=p>(</span><span class=n>Widget</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-170-4 name=__codelineno-170-4></a><span class=w>    </span><span class=p>.</span><span class=na>with</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Widget</span><span class=p>::</span><span class=n>type</span><span class=p>),</span><span class=w> </span><span class=s>"FOO"</span><span class=p>,</span><span class=w> </span><span class=s>"BAR"</span><span class=p>,</span><span class=w> </span><span class=s>"BAZ"</span><span class=p>)</span>
<a id=__codelineno-170-5 name=__codelineno-170-5></a><span class=w>    </span><span class=p>.</span><span class=na>with</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Widget</span><span class=p>::</span><span class=n>num</span><span class=p>),</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-170-6 name=__codelineno-170-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>This will produce a list containing 9 results in lexicographical order:<div class=highlight><pre><span></span><code><a href=#__codelineno-171-1 id=__codelineno-171-1 name=__codelineno-171-1></a><span class=p>[</span><span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>FOO</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>1</span><span class=p>],</span>
<a href=#__codelineno-171-2 id=__codelineno-171-2 name=__codelineno-171-2></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>FOO</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>2</span><span class=p>],</span>
<a href=#__codelineno-171-3 id=__codelineno-171-3 name=__codelineno-171-3></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>FOO</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>3</span><span class=p>],</span>
<a href=#__codelineno-171-4 id=__codelineno-171-4 name=__codelineno-171-4></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAR</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>1</span><span class=p>],</span>
<a href=#__codelineno-171-5 id=__codelineno-171-5 name=__codelineno-171-5></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAR</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>2</span><span class=p>],</span>
<a href=#__codelineno-171-6 id=__codelineno-171-6 name=__codelineno-171-6></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAR</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>3</span><span class=p>],</span>
<a href=#__codelineno-171-7 id=__codelineno-171-7 name=__codelineno-171-7></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAZ</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>1</span><span class=p>],</span>
<a href=#__codelineno-171-8 id=__codelineno-171-8 name=__codelineno-171-8></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAZ</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>2</span><span class=p>],</span>
<a href=#__codelineno-171-9 id=__codelineno-171-9 name=__codelineno-171-9></a> <span class=n>Widget</span><span class=p>[</span><span class=nb>type</span><span class=o>=</span><span class=n>BAZ</span><span class=p>,</span> <span class=n>num</span><span class=o>=</span><span class=mi>3</span><span class=p>]]</span>
</code></pre></div><h3 id=limitations>Limitations<a title="Permanent link" class=headerlink href=#limitations>¶</a></h3><p>The selector passed to the <code>with()</code> method must match a single target. For example, the target cannot be a collection element:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-172-1>1</a></span>
<span class=normal><a href=#__codelineno-172-2>2</a></span>
<span class=normal><a href=#__codelineno-172-3>3</a></span>
<span class=normal><a href=#__codelineno-172-4>4</a></span>
<span class=normal><a href=#__codelineno-172-5>5</a></span>
<span class=normal><a href=#__codelineno-172-6>6</a></span>
<span class=normal><a href=#__codelineno-172-7>7</a></span>
<span class=normal><a href=#__codelineno-172-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-172-1 name=__codelineno-172-1></a><span class=kd>record</span> <span class=nc>Widget</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>type</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-172-2 name=__codelineno-172-2></a><span class=kd>record</span> <span class=nc>Container</span><span class=p>(</span><span class=n>List</span><span class=o><</span><span class=n>Widget</span><span class=o>></span><span class=w> </span><span class=n>widgets</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-172-3 name=__codelineno-172-3></a>
<a id=__codelineno-172-4 name=__codelineno-172-4></a><span class=n>List</span><span class=o><</span><span class=n>Container</span><span class=o>></span><span class=w> </span><span class=n>results</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofCartesianProduct</span><span class=p>(</span><span class=n>Container</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-172-5 name=__codelineno-172-5></a><span class=w>    </span><span class=p>.</span><span class=na>with</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Widget</span><span class=p>::</span><span class=n>type</span><span class=p>),</span><span class=w> </span><span class=s>"FOO"</span><span class=p>,</span><span class=w> </span><span class=s>"BAR"</span><span class=p>,</span><span class=w> </span><span class=s>"BAZ"</span><span class=p>)</span>
<a id=__codelineno-172-6 name=__codelineno-172-6></a><span class=w>    </span><span class=p>.</span><span class=na>with</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Widget</span><span class=p>::</span><span class=n>num</span><span class=p>),</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-172-7 name=__codelineno-172-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-172-8 name=__codelineno-172-8></a><span class=p>}</span>
</code></pre></div></table></div><p>The above will produce an error with a message: <code>"no item is available to emit()"</code>.<h1 id=bean-validation>Bean Validation<a title="Permanent link" class=headerlink href=#bean-validation>¶</a></h1><p>Instancio can generate valid data based on Bean Validation annotations. This is an experimental feature and is disabled by default.<p>The feature can be enabled via <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> using <code>Keys.BEAN_VALIDATION_ENABLED</code>, or globally, using <code>instancio.properties</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-173-1 id=__codelineno-173-1 name=__codelineno-173-1></a><span class=na>bean.validation.enabled</span><span class=o>=</span><span class=s>true</span>
</code></pre></div><p>Instancio supports annotations from:<ul><li><code>jakarta.validation.constraints</code><li><code>javax.validation.constraints</code><li><code>org.hibernate.validator.constraints</code></ul><p>It will generate data based on the constraints, depending on what is available on the classpath. Instancio does not provide the dependencies transitively.<div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1><code>jakarta.validation</code></label><label for=__tabbed_1_2><code>javax.validation</code></label><label for=__tabbed_1_3><code>hibernate</code></label></div><div class=tabbed-content><div class=tabbed-block><div class=highlight><pre><span></span><code><a href=#__codelineno-174-1 id=__codelineno-174-1 name=__codelineno-174-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-174-2 id=__codelineno-174-2 name=__codelineno-174-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>jakarta.validation<span class=nt>&LT/groupId></span>
<a href=#__codelineno-174-3 id=__codelineno-174-3 name=__codelineno-174-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>jakarta.validation-api<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-174-4 id=__codelineno-174-4 name=__codelineno-174-4></a><span class=w>    </span><span class=nt>&LTversion></span>${jakarta-validation-api-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-174-5 id=__codelineno-174-5 name=__codelineno-174-5></a><span class=nt>&LT/dependency></span>
</code></pre></div></div><div class=tabbed-block><div class=highlight><pre><span></span><code><a href=#__codelineno-175-1 id=__codelineno-175-1 name=__codelineno-175-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-175-2 id=__codelineno-175-2 name=__codelineno-175-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>javax.validation<span class=nt>&LT/groupId></span>
<a href=#__codelineno-175-3 id=__codelineno-175-3 name=__codelineno-175-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>validation-api<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-175-4 id=__codelineno-175-4 name=__codelineno-175-4></a><span class=w>    </span><span class=nt>&LTversion></span>${javax-validation-api-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-175-5 id=__codelineno-175-5 name=__codelineno-175-5></a><span class=nt>&LT/dependency></span>
</code></pre></div></div><div class=tabbed-block><div class=highlight><pre><span></span><code><a href=#__codelineno-176-1 id=__codelineno-176-1 name=__codelineno-176-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-176-2 id=__codelineno-176-2 name=__codelineno-176-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>org.hibernate.validator<span class=nt>&LT/groupId></span>
<a href=#__codelineno-176-3 id=__codelineno-176-3 name=__codelineno-176-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>hibernate-validator<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-176-4 id=__codelineno-176-4 name=__codelineno-176-4></a><span class=w>    </span><span class=nt>&LTversion></span>${hibernate-validator-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-176-5 id=__codelineno-176-5 name=__codelineno-176-5></a><span class=nt>&LT/dependency></span>
</code></pre></div></div></div></div><p>By default, Instancio reads annotations from fields. The behaviour can be customised to read annotations from getters instead. This can be done using the <code>Keys.BEAN_VALIDATION_TARGET</code> setting or <code>instancio.properties</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-177-1 id=__codelineno-177-1 name=__codelineno-177-1></a><span class=na>bean.validation.target</span><span class=o>=</span><span class=s>GETTER</span>
</code></pre></div><h2 id=supported-annotations>Supported Annotations<a title="Permanent link" class=headerlink href=#supported-annotations>¶</a></h2><p>The list of supported annotations is provided below. Anything not listed is unsupported, including <code>*.List</code> annotations.<h3 id=jakarta-or-javax>Jakarta or Javax<a title="Permanent link" class=headerlink href=#jakarta-or-javax>¶</a></h3><ul><li><code>@AssertFalse</code><li><code>@AssertTrue</code><li><code>@DecimalMax</code><li><code>@DecimalMin</code><li><code>@Digits</code><li><code>@Email</code><li><code>@Future</code> (not supported by <code>MonthDay</code>)<li><code>@FutureOrPresent</code> (delegates to <code>Future</code>)<li><code>@Max</code><li><code>@Min</code><li><code>@Negative</code><li><code>@NegativeOrZero</code><li><code>@NotBlank</code> (delegates to <code>NotEmpty</code>)<li><code>@NotEmpty</code><li><code>@NotNull</code><li><code>@Past</code> (not supported by <code>MonthDay</code>)<li><code>@PastOrPresent</code> (delegates to <code>Past</code>)<li><code>@Positive</code><li><code>@PositiveOrZero</code><li><code>@Size</code></ul><h3 id=hibernate>Hibernate<a title="Permanent link" class=headerlink href=#hibernate>¶</a></h3><h4 id=standard>Standard<a title="Permanent link" class=headerlink href=#standard>¶</a></h4><ul><li><code>@CreditCardNumber</code><li><code>@DurationMin</code><li><code>@DurationMax</code><li><code>@EAN</code><li><code>@ISBN</code><li><code>@Length</code><li><code>@LuhnCheck</code> (<code>ignoreNonDigitCharacters</code> is ignored, only digits are generated)<li><code>@Mod10Check</code> (<code>ignoreNonDigitCharacters</code> is ignored, only digits are generated)<li><code>@Mod11Check</code> (<code>ignoreNonDigitCharacters</code> is ignored, only digits are generated)<li><code>@Range</code><li><code>@UniqueElements</code><li><code>@URL</code> (<code>protocol</code>, <code>host</code>, <code>port</code> are supported; <code>regexp</code> not supported)<li><code>@UUID</code></ul><h4 id=brazilian>Brazilian<a title="Permanent link" class=headerlink href=#brazilian>¶</a></h4><ul><li><code>@CNPJ</code><li><code>@CPF</code><li><code>@TituloEleitoral</code></ul><h4 id=polish>Polish<a title="Permanent link" class=headerlink href=#polish>¶</a></h4><ul><li><code>@NIP</code><li><code>@PESEL</code><li><code>@REGON</code></ul><h4 id=russian>Russian<a title="Permanent link" class=headerlink href=#russian>¶</a></h4><ul><li><code>@INN</code></ul><h1 id=jpa>JPA<a title="Permanent link" class=headerlink href=#jpa>¶</a></h1><p>In addition to <a href=#bean-validation>Bean Validation</a>, Instancio supports generating data based on JPA <code>@Column</code> annotation. This is an experimental feature available from version <code>3.3.0</code>. It is disabled by default and can be enabled via <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> using <code>Keys.JPA_ENABLED</code>, or globally, using <code>instancio.properties</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-178-1 id=__codelineno-178-1 name=__codelineno-178-1></a><span class=na>jpa.enabled</span><span class=o>=</span><span class=s>true</span>
</code></pre></div><p>In addition, <code>jakarta</code> or <code>javax</code> API must be present on the classpath for the feature to be activated. Instancio does not provide the dependency transitively:<div class=highlight><pre><span></span><code><a href=#__codelineno-179-1 id=__codelineno-179-1 name=__codelineno-179-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-179-2 id=__codelineno-179-2 name=__codelineno-179-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>jakarta.persistence<span class=nt>&LT/groupId></span>
<a href=#__codelineno-179-3 id=__codelineno-179-3 name=__codelineno-179-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>jakarta.persistence-api<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-179-4 id=__codelineno-179-4 name=__codelineno-179-4></a><span class=w>    </span><span class=nt>&LTversion></span>${jakarta-persistence-api-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-179-5 id=__codelineno-179-5 name=__codelineno-179-5></a><span class=nt>&LT/dependency></span>
</code></pre></div><p>or<div class=highlight><pre><span></span><code><a href=#__codelineno-180-1 id=__codelineno-180-1 name=__codelineno-180-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-180-2 id=__codelineno-180-2 name=__codelineno-180-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>javax.persistence<span class=nt>&LT/groupId></span>
<a href=#__codelineno-180-3 id=__codelineno-180-3 name=__codelineno-180-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>javax.persistence-api<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-180-4 id=__codelineno-180-4 name=__codelineno-180-4></a><span class=w>    </span><span class=nt>&LTversion></span>${javax-persistence-api-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-180-5 id=__codelineno-180-5 name=__codelineno-180-5></a><span class=nt>&LT/dependency></span>
</code></pre></div><div class="admonition warning"><p class=admonition-title>Warning<p>If you are using Hibernate with <a href=https://docs.jboss.org/hibernate/stable/orm/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement>bytecode enhancement</a> enabled, you may need to ignore fields with names starting with <code>$$_</code>.</div><h2 id=supported-attributes>Supported Attributes<a title="Permanent link" class=headerlink href=#supported-attributes>¶</a></h2><p>The following <code>@Column</code> attributes are supported:<ul><li><code>precision</code> - supported by <code>Float</code>, <code>Double</code>, and <code>BigDecimal</code> fields (with limitations described below)<li><code>scale</code> - supported by <code>Float</code>, <code>Double</code>, and <code>BigDecimal</code> fields<li><code>length</code> - supported by <code>String</code> fields</ul><h4 id=limitations_1>Limitations<a title="Permanent link" class=headerlink href=#limitations_1>¶</a></h4><p>If used with <code>Keys.BEAN_VALIDATION_ENABLED</code>, Bean Validation annotations take precedence. For instance, the <code>precision</code> attribute is not honoured if a field is annotated with any of the following Bean Validation/Hibernate Validator annotations:<ul><li><code>@Min</code>, <code>@Max</code><li><code>@DecimalMin</code>, <code>@DecimalMax</code><li><code>@Negative</code>, <code>@NegativeOrZero</code><li><code>@Positive</code>, <code>@PositiveOrZero</code><li><code>@Range</code></ul><p>To illustrate with an example, consider the following field declaration:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-181-1>1</a></span>
<span class=normal><a href=#__codelineno-181-2>2</a></span>
<span class=normal><a href=#__codelineno-181-3>3</a></span>
<span class=normal><a href=#__codelineno-181-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-181-1 name=__codelineno-181-1></a><span class=nd>@Column</span><span class=p>(</span><span class=n>precision</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=n>scale</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-181-2 name=__codelineno-181-2></a><span class=nd>@Min</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-181-3 name=__codelineno-181-3></a><span class=nd>@Max</span><span class=p>(</span><span class=mi>7</span><span class=p>)</span>
<a id=__codelineno-181-4 name=__codelineno-181-4></a><span class=kd>private</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
</code></pre></div></table></div><p><code>precision = 5, scale = 3</code> implies a range of <code>[10.000, 99.999]</code>, whereas the <code>@Min</code> and <code>@Max</code> limit the range to <code>[1, 7]</code>. Since the <code>@Min</code> and <code>@Max</code> annotations take precedence, the <code>precision</code> attribute will be ignored, and the generated <code>value</code> will be between <code>1.000</code> and <code>7.000</code>, inclusive, and have the specified scale of <code>3</code>.<h1 id=data-feeds>Data Feeds<a title="Permanent link" class=headerlink href=#data-feeds>¶</a></h1><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 5.0.0</code></div><p>Some tests are better expressed when test data is defined in an external resource. This is especially true when tests require a large or complex dataset, making it impractical to define the data within the test class. The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/feed/Feed.html target=_blank>Feed</a> interface has been added to simplify working with data from external sources.<p>There are several methods for creating a feed, detailed in the following sections. For demonstration purposes, we will use a <code>persons.csv</code> file located at the root of the classpath (e.g., <code>src/test/resources/persons.csv</code>):<div class="admonition info"><p class=admonition-title>The sample data is referenced in all subsequent examples.</div><div class=highlight><span class=filename>persons.csv (formatted for clarity)</span><pre><span></span><code><a href=#__codelineno-182-1 id=__codelineno-182-1 name=__codelineno-182-1></a>firstName, lastName, dateOfBirth, gender
<a href=#__codelineno-182-2 id=__codelineno-182-2 name=__codelineno-182-2></a>John,      Doe,      2001-11-22,  MALE
<a href=#__codelineno-182-3 id=__codelineno-182-3 name=__codelineno-182-3></a>Alice,     Smith,    1977-07-15,  FEMALE
<a href=#__codelineno-182-4 id=__codelineno-182-4 name=__codelineno-182-4></a>Bob,       Brown,    1999-12-01,  MALE
<a href=#__codelineno-182-5 id=__codelineno-182-5 name=__codelineno-182-5></a># snip...
</code></pre></div><p>and the <code>Person</code> class defined as:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-183-1>1</a></span>
<span class=normal><a href=#__codelineno-183-2>2</a></span>
<span class=normal><a href=#__codelineno-183-3>3</a></span>
<span class=normal><a href=#__codelineno-183-4>4</a></span>
<span class=normal><a href=#__codelineno-183-5>5</a></span>
<span class=normal><a href=#__codelineno-183-6>6</a></span>
<span class=normal><a href=#__codelineno-183-7>7</a></span>
<span class=normal><a href=#__codelineno-183-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-183-1 name=__codelineno-183-1></a><span class=c1>// Getters and setters omitted for brevity</span>
<a id=__codelineno-183-2 name=__codelineno-183-2></a><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-183-3 name=__codelineno-183-3></a><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span>
<a id=__codelineno-183-4 name=__codelineno-183-4></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=p>;</span>
<a id=__codelineno-183-5 name=__codelineno-183-5></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>lastName</span><span class=p>;</span>
<a id=__codelineno-183-6 name=__codelineno-183-6></a><span class=w>    </span><span class=n>LocalDate</span><span class=w> </span><span class=n>dateOfBirth</span><span class=p>;</span>
<a id=__codelineno-183-7 name=__codelineno-183-7></a><span class=w>    </span><span class=n>Gender</span><span class=w> </span><span class=n>gender</span><span class=p>;</span>
<a id=__codelineno-183-8 name=__codelineno-183-8></a><span class=p>}</span>
</code></pre></div></table></div><h2 id=using-applyfeed>Using <code>applyFeed()</code><a title="Permanent link" class=headerlink href=#using-applyfeed>¶</a></h2><p>The <code>applyFeed()</code> method allows creating a feed using the <code>FeedProvider</code> API and mapping the feed data to a POJO or a <code>record</code> using a selector:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-184-1>1</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-184-1 name=__codelineno-184-1></a><span class=n>applyFeed</span><span class=p>(</span><span class=n>TargetSelector</span><span class=p>,</span><span class=w> </span><span class=n>FeedProvider</span><span class=p>)</span>
</code></pre></div></table></div><p>Here's an example that maps data from the <code>persons.csv</code> file to <code>Person</code> objects:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-185-1> 1</a></span>
<span class=normal><a href=#__codelineno-185-2> 2</a></span>
<span class=normal><a href=#__codelineno-185-3> 3</a></span>
<span class=normal><a href=#__codelineno-185-4> 4</a></span>
<span class=normal><a href=#__codelineno-185-5> 5</a></span>
<span class=normal><a href=#__codelineno-185-6> 6</a></span>
<span class=normal><a href=#__codelineno-185-7> 7</a></span>
<span class=normal><a href=#__codelineno-185-8> 8</a></span>
<span class=normal><a href=#__codelineno-185-9> 9</a></span>
<span class=normal><a href=#__codelineno-185-10>10</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-185-1 name=__codelineno-185-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-185-2 name=__codelineno-185-2></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-185-3 name=__codelineno-185-3></a><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>ofResource</span><span class=p>(</span><span class=s>"persons.csv"</span><span class=p>))</span>
<a id=__codelineno-185-4 name=__codelineno-185-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-185-5 name=__codelineno-185-5></a>
<a id=__codelineno-185-6 name=__codelineno-185-6></a><span class=c1>// Output:</span>
<a id=__codelineno-185-7 name=__codelineno-185-7></a><span class=c1>// [Person[id=1083, firstName="John", lastName="Doe", dateOfBirth=2001-11-22, gender=MALE],</span>
<a id=__codelineno-185-8 name=__codelineno-185-8></a><span class=c1>//  Person[id=9485, firstName="Alice", lastName="Smith", dateOfBirth=1977-07-15, gender=FEMALE],</span>
<a id=__codelineno-185-9 name=__codelineno-185-9></a><span class=c1>//  Person[id=3576, firstName="Bob", lastName="Brown", dateOfBirth=1999-12-01, gender=MALE],</span>
<a id=__codelineno-185-10 name=__codelineno-185-10></a><span class=c1>//  ...snip...]</span>
</code></pre></div></table></div><p>The mapping works as follows:<ul><li>Data properties are mapped to matching field names declared by the class.<li>Class fields that do not have a corresponding property in the data file are populated with random values (such as the <code>id</code> field in the previous example).<li>If a data property does not map to any field in the target class, an exception will be thrown. To ignore unmatched properties, set the <code>Keys.ON_FEED_PROPERTY_UNMATCHED</code> setting to <code>OnFeedPropertyUnmatched.IGNORE</code>.</ul><h2 id=custom-feeds>Custom Feeds<a title="Permanent link" class=headerlink href=#custom-feeds>¶</a></h2><p>Custom feeds can be created by extending the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/feed/Feed.html target=_blank>Feed</a> interface:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-186-1>1</a></span>
<span class=normal><a href=#__codelineno-186-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-186-1 name=__codelineno-186-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-186-2 name=__codelineno-186-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{}</span>
</code></pre></div></table></div><p>Defining a custom feed allows reusing it across multiple tests, avoiding the need to hard-code the file name:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-187-1>1</a></span>
<span class=normal><a href=#__codelineno-187-2>2</a></span>
<span class=normal><a href=#__codelineno-187-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-187-1 name=__codelineno-187-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-187-2 name=__codelineno-187-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>))</span>
</span><a id=__codelineno-187-3 name=__codelineno-187-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>In addition to passing the<code>PersonFeed</code> class to the <code>applyFeed()</code> method, we can also instantiate an instance of the feed using the methods below. The first method is a shorthand API, while the second is a builder that can be used to customise an instance of a feed:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-188-1>1</a></span>
<span class=normal><a href=#__codelineno-188-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-188-1 name=__codelineno-188-1></a><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>F</span><span class=o>></span><span class=w> </span><span class=n>feedClass</span><span class=p>)</span>
<a id=__codelineno-188-2 name=__codelineno-188-2></a><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>Class</span><span class=o><</span><span class=n>F</span><span class=o>></span><span class=w> </span><span class=n>feedClass</span><span class=p>).</span><span class=na>create</span><span class=p>()</span>
</code></pre></div></table></div><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>An example of creating a feed instance</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-189-1>1</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-189-1 name=__codelineno-189-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</code></pre></div></table></div><p>While <code>PersonFeed</code> does not declare any methods, it inherits several convenience methods from <code>Feed</code> for accessing specific data properties, such as the <code>lastName</code>. For example, to create an instance of the <code>PersonFeed</code> and populate only the last names:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-190-1>1</a></span>
<span class=normal><a href=#__codelineno-190-2>2</a></span>
<span class=normal><a href=#__codelineno-190-3>3</a></span>
<span class=normal><a href=#__codelineno-190-4>4</a></span>
<span class=normal><a href=#__codelineno-190-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-190-1 name=__codelineno-190-1></a><span class=hll><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</span><a id=__codelineno-190-2 name=__codelineno-190-2></a>
<a id=__codelineno-190-3 name=__codelineno-190-3></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-190-4 name=__codelineno-190-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getLastName</span><span class=p>),</span><span class=w> </span><span class=n>personFeed</span><span class=p>.</span><span class=na>stringSpec</span><span class=p>(</span><span class=s>"lastName"</span><span class=p>))</span>
</span><a id=__codelineno-190-5 name=__codelineno-190-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>The <code>stringSpec()</code> method is an example of a "feed spec", which will be described in more detail in the next section.<h2 id=feed-specs>Feed Specs<a title="Permanent link" class=headerlink href=#feed-specs>¶</a></h2><p>The <code>Feed</code> interface provides various methods for retrieving data. These methods return a <code>FeedSpec&LTT></code> and automatically convert values to the specified type <code>T</code> (see <a href=#default-string-conversion>Default String Conversion</a> for the list of supported types):<div class=highlight><pre><span></span><code><a href=#__codelineno-191-1 id=__codelineno-191-1 name=__codelineno-191-1></a><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>stringSpec</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>propertyName</span><span class=p>);</span>
<a href=#__codelineno-191-2 id=__codelineno-191-2 name=__codelineno-191-2></a><span class=n>FeedSpec</span><span class=o><</span><span class=n>Boolean</span><span class=o>></span><span class=w> </span><span class=nf>booleanSpec</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>propertyName</span><span class=p>);</span>
<a href=#__codelineno-191-3 id=__codelineno-191-3 name=__codelineno-191-3></a><span class=n>FeedSpec</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=nf>intSpec</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>propertyName</span><span class=p>);</span>
<a href=#__codelineno-191-4 id=__codelineno-191-4 name=__codelineno-191-4></a><span class=c1>// ...</span>
</code></pre></div><div class="admonition note"><p class=admonition-title>From here on, we will refer to methods that return a <code>FeedSpec</code> as <em>feed specs</em>.</div><p>In addition to the built-in methods, Instancio supports defining custom feed specs. By convention, method names automatically map to the corresponding properties in the data feed.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-192-1>1</a></span>
<span class=normal><a href=#__codelineno-192-2>2</a></span>
<span class=normal><a href=#__codelineno-192-3>3</a></span>
<span class=normal><a href=#__codelineno-192-4>4</a></span>
<span class=normal><a href=#__codelineno-192-5>5</a></span>
<span class=normal><a href=#__codelineno-192-6>6</a></span>
<span class=normal><a href=#__codelineno-192-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-192-1 name=__codelineno-192-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-192-2 name=__codelineno-192-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-192-3 name=__codelineno-192-3></a>
<a id=__codelineno-192-4 name=__codelineno-192-4></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>lastName</span><span class=p>();</span>
<a id=__codelineno-192-5 name=__codelineno-192-5></a>
<a id=__codelineno-192-6 name=__codelineno-192-6></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=nf>age</span><span class=p>();</span>
<a id=__codelineno-192-7 name=__codelineno-192-7></a><span class=p>}</span>
</code></pre></div></table></div><p>By declaring an explicit method such as <code>lastName()</code>, we can avoid calling <code>stringSpec("lastName")</code> with a hard-coded property name.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-193-1>1</a></span>
<span class=normal><a href=#__codelineno-193-2>2</a></span>
<span class=normal><a href=#__codelineno-193-3>3</a></span>
<span class=normal><a href=#__codelineno-193-4>4</a></span>
<span class=normal><a href=#__codelineno-193-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-193-1 name=__codelineno-193-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-193-2 name=__codelineno-193-2></a>
<a id=__codelineno-193-3 name=__codelineno-193-3></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-193-4 name=__codelineno-193-4></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Person</span><span class=p>::</span><span class=n>getLastName</span><span class=p>),</span><span class=w> </span><span class=n>personFeed</span><span class=p>.</span><span class=na>lastName</span><span class=p>())</span>
</span><a id=__codelineno-193-5 name=__codelineno-193-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>To summarise, feed data can be accessed using:<ul><li>built-in feed spec methods: <code>stringSpec("lastName")</code>, <code>intSpec("age")</code><li>user-defined feed spec methods: <code>lastName()</code>, <code>age()</code></ul><h3 id=using-feed-specs>Using Feed Specs<a title="Permanent link" class=headerlink href=#using-feed-specs>¶</a></h3><p>The <code>FeedSpec</code> type supports a couple of different use cases. Under the hood, the <code>FeedSpec</code> type is an implementation of a <code>Generator</code>. Therefore, it can be passed to the <code>supply()</code> and <code>generate()</code> methods as demonstrated earlier. Moreover, the <code>FeedSpec</code> interface extends <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/ValueSpec.html target=_blank>ValueSpec</a>, which provides methods such as <code>get()</code> and <code>list()</code> for generating values:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-194-1>1</a></span>
<span class=normal><a href=#__codelineno-194-2>2</a></span>
<span class=normal><a href=#__codelineno-194-3>3</a></span>
<span class=normal><a href=#__codelineno-194-4>4</a></span>
<span class=normal><a href=#__codelineno-194-5>5</a></span>
<span class=normal><a href=#__codelineno-194-6>6</a></span>
<span class=normal><a href=#__codelineno-194-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-194-1 name=__codelineno-194-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-194-2 name=__codelineno-194-2></a>
<a id=__codelineno-194-3 name=__codelineno-194-3></a><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>personFeed</span><span class=p>.</span><span class=na>firstName</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// John</span>
<a id=__codelineno-194-4 name=__codelineno-194-4></a>
<a id=__codelineno-194-5 name=__codelineno-194-5></a><span class=n>List</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>firstNamesList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>personFeed</span><span class=p>.</span><span class=na>firstName</span><span class=p>().</span><span class=na>list</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span><span class=w> </span><span class=c1>// [John, Alice, Bob, ...]</span>
<a id=__codelineno-194-6 name=__codelineno-194-6></a>
<a id=__codelineno-194-7 name=__codelineno-194-7></a><span class=kt>int</span><span class=w> </span><span class=n>yearOfBirth</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>personFeed</span><span class=p>.</span><span class=na>dateOfBirth</span><span class=p>().</span><span class=na>map</span><span class=p>(</span><span class=n>LocalDate</span><span class=p>::</span><span class=n>getYear</span><span class=p>);</span>
</code></pre></div></table></div><div class="admonition info"><p class=admonition-title>See <a href=#creating-simple-values>Creating Simple Values</a> for a summary of <code>ValueSpec</code> methods.</div><p>In addition, feed spec methods support the following annotations:<ul><li><a href=#aliasspec><code>@AliasSpec</code></a><li><a href=#templatespec><code>@TemplateSpec</code></a><li><a href=#generatedspec><code>@GeneratedSpec</code></a><li><a href=#functionspec><code>@FunctionSpec</code></a><li><a href=#withstringmapper><code>@WithStringMapper</code></a><li><a href=#withpostprocessor><code>@WithPostProcessor</code></a><li><a href=#nullablespec><code>@NullableSpec</code></a></ul><h3 id=aliasspec><code>@AliasSpec</code><a title="Permanent link" class=headerlink href=#aliasspec>¶</a></h3><p>This annotation allows mapping a data property using the annotation attribute instead of the spec method name. This decouples method names from specific data properties:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-195-1>1</a></span>
<span class=normal><a href=#__codelineno-195-2>2</a></span>
<span class=normal><a href=#__codelineno-195-3>3</a></span>
<span class=normal><a href=#__codelineno-195-4>4</a></span>
<span class=normal><a href=#__codelineno-195-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-195-1 name=__codelineno-195-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-195-2 name=__codelineno-195-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-195-3 name=__codelineno-195-3></a><span class=hll><span class=w>    </span><span class=nd>@AliasSpec</span><span class=p>(</span><span class=s>"lastName"</span><span class=p>)</span>
</span><a id=__codelineno-195-4 name=__codelineno-195-4></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>surname</span><span class=p>();</span>
<a id=__codelineno-195-5 name=__codelineno-195-5></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>3</lnum> Specifies that the <code>surname()</code> method corresponds to the <code>lastName</code> property in the data feed.</div><p>This approach removes the requirement for method names to match exact data property names.<h3 id=templatespec><code>@TemplateSpec</code><a title="Permanent link" class=headerlink href=#templatespec>¶</a></h3><p>The <code>@TemplateSpec</code> annotation enables the definition of spec methods using string templates with <code>${placeholders}</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-196-1>1</a></span>
<span class=normal><a href=#__codelineno-196-2>2</a></span>
<span class=normal><a href=#__codelineno-196-3>3</a></span>
<span class=normal><a href=#__codelineno-196-4>4</a></span>
<span class=normal><a href=#__codelineno-196-5>5</a></span>
<span class=normal><a href=#__codelineno-196-6>6</a></span>
<span class=normal><a href=#__codelineno-196-7>7</a></span>
<span class=normal><a href=#__codelineno-196-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-196-1 name=__codelineno-196-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-196-2 name=__codelineno-196-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-196-3 name=__codelineno-196-3></a><span class=w>    </span><span class=nd>@AliasSpec</span><span class=p>(</span><span class=s>"lastName"</span><span class=p>)</span>
<a id=__codelineno-196-4 name=__codelineno-196-4></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>surname</span><span class=p>();</span>
<a id=__codelineno-196-5 name=__codelineno-196-5></a>
<a id=__codelineno-196-6 name=__codelineno-196-6></a><span class=hll><span class=w>    </span><span class=nd>@TemplateSpec</span><span class=p>(</span><span class=s>"Hello ${firstName} ${surname}"</span><span class=p>)</span>
</span><a id=__codelineno-196-7 name=__codelineno-196-7></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>greeting</span><span class=p>();</span>
<a id=__codelineno-196-8 name=__codelineno-196-8></a><span class=p>}</span>
</code></pre></div></table></div><p>In the example above, placeholders like <code>${firstName}</code> and <code>${surname}</code> can directly map to data properties or other feed spec method names.<p>When invoking the <code>greeting()</code> method with the <code>persons.csv</code> data defined earlier, it produces the following output:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-197-1>1</a></span>
<span class=normal><a href=#__codelineno-197-2>2</a></span>
<span class=normal><a href=#__codelineno-197-3>3</a></span>
<span class=normal><a href=#__codelineno-197-4>4</a></span>
<span class=normal><a href=#__codelineno-197-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-197-1 name=__codelineno-197-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-197-2 name=__codelineno-197-2></a>
<a id=__codelineno-197-3 name=__codelineno-197-3></a><span class=n>personFeed</span><span class=p>().</span><span class=na>greeting</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// Hello John Doe</span>
<a id=__codelineno-197-4 name=__codelineno-197-4></a><span class=n>personFeed</span><span class=p>().</span><span class=na>greeting</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// Hello Alice Smith</span>
<a id=__codelineno-197-5 name=__codelineno-197-5></a><span class=c1>// snip...</span>
</code></pre></div></table></div><h3 id=generatedspec><code>@GeneratedSpec</code><a title="Permanent link" class=headerlink href=#generatedspec>¶</a></h3><p>The <code>@GeneratedSpec</code> annotation allows defining feed specs that generate data not present in the data file, but rather by using a specified generator.<p>Here's an example using <code>@GeneratedSpec</code> to generate random <code>lastModified</code> values that are in the past:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-198-1> 1</a></span>
<span class=normal><a href=#__codelineno-198-2> 2</a></span>
<span class=normal><a href=#__codelineno-198-3> 3</a></span>
<span class=normal><a href=#__codelineno-198-4> 4</a></span>
<span class=normal><a href=#__codelineno-198-5> 5</a></span>
<span class=normal><a href=#__codelineno-198-6> 6</a></span>
<span class=normal><a href=#__codelineno-198-7> 7</a></span>
<span class=normal><a href=#__codelineno-198-8> 8</a></span>
<span class=normal><a href=#__codelineno-198-9> 9</a></span>
<span class=normal><a href=#__codelineno-198-10>10</a></span>
<span class=normal><a href=#__codelineno-198-11>11</a></span>
<span class=normal><a href=#__codelineno-198-12>12</a></span>
<span class=normal><a href=#__codelineno-198-13>13</a></span>
<span class=normal><a href=#__codelineno-198-14>14</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-198-1 name=__codelineno-198-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-198-2 name=__codelineno-198-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-198-3 name=__codelineno-198-3></a>
<a id=__codelineno-198-4 name=__codelineno-198-4></a><span class=hll><span class=w>    </span><span class=nd>@GeneratedSpec</span><span class=p>(</span><span class=n>PastInstantGenerator</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-198-5 name=__codelineno-198-5></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>Instant</span><span class=o>></span><span class=w> </span><span class=nf>lastModified</span><span class=p>();</span>
<a id=__codelineno-198-6 name=__codelineno-198-6></a>
<a id=__codelineno-198-7 name=__codelineno-198-7></a><span class=w>    </span><span class=kd>class</span> <span class=nc>PastInstantGenerator</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Generator</span><span class=o><</span><span class=n>Instant</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-198-8 name=__codelineno-198-8></a><span class=w>        </span><span class=nd>@Override</span>
<a id=__codelineno-198-9 name=__codelineno-198-9></a><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>Instant</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-198-10 name=__codelineno-198-10></a><span class=w>            </span><span class=kt>long</span><span class=w> </span><span class=n>nanosAgo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random</span><span class=p>.</span><span class=na>longRange</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=p>.</span><span class=na>MAX_VALUE</span><span class=p>);</span>
<a id=__codelineno-198-11 name=__codelineno-198-11></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>Instant</span><span class=p>.</span><span class=na>now</span><span class=p>().</span><span class=na>minusNanos</span><span class=p>(</span><span class=n>nanosAgo</span><span class=p>);</span>
<a id=__codelineno-198-12 name=__codelineno-198-12></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-198-13 name=__codelineno-198-13></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-198-14 name=__codelineno-198-14></a><span class=p>}</span>
</code></pre></div></table></div><p>In this example, the <code>lastModified()</code> method in <code>PersonFeed</code> uses <code>@GeneratedSpec</code> to specify <code>PastInstantGenerator</code> as the generator for <code>Instant</code> values. This approach allows for generation of data that complements existing data in the feed.<h3 id=functionspec><code>@FunctionSpec</code><a title="Permanent link" class=headerlink href=#functionspec>¶</a></h3><p>The <code>@FunctionSpec</code> annotation enables combining inputs from one or more data properties or spec methods to produce a result using a specified <code>FunctionProvider</code>. It has two attributes:<ul><li><code>params</code> - specifies the names of data properties or spec methods used as inputs.<li><code>provider</code> - refers to a class implementing <code>FunctionProvider</code>, which processes inputs and returns a result.</ul><p>For example, the following snippet generates a person's bio from the <code>firstName</code>, <code>lastName</code>, and <code>dateOfBirth</code> properties:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-199-1> 1</a></span>
<span class=normal><a href=#__codelineno-199-2> 2</a></span>
<span class=normal><a href=#__codelineno-199-3> 3</a></span>
<span class=normal><a href=#__codelineno-199-4> 4</a></span>
<span class=normal><a href=#__codelineno-199-5> 5</a></span>
<span class=normal><a href=#__codelineno-199-6> 6</a></span>
<span class=normal><a href=#__codelineno-199-7> 7</a></span>
<span class=normal><a href=#__codelineno-199-8> 8</a></span>
<span class=normal><a href=#__codelineno-199-9> 9</a></span>
<span class=normal><a href=#__codelineno-199-10>10</a></span>
<span class=normal><a href=#__codelineno-199-11>11</a></span>
<span class=normal><a href=#__codelineno-199-12>12</a></span>
<span class=normal><a href=#__codelineno-199-13>13</a></span>
<span class=normal><a href=#__codelineno-199-14>14</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-199-1 name=__codelineno-199-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-199-2 name=__codelineno-199-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-199-3 name=__codelineno-199-3></a>
<a id=__codelineno-199-4 name=__codelineno-199-4></a><span class=hll><span class=w>    </span><span class=nd>@FunctionSpec</span><span class=p>(</span><span class=n>params</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=s>"firstName"</span><span class=p>,</span><span class=w> </span><span class=s>"lastName"</span><span class=p>,</span><span class=w> </span><span class=s>"dateOfBirth"</span><span class=p>},</span><span class=w> </span><span class=n>provider</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BioProvider</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-199-5 name=__codelineno-199-5></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>bio</span><span class=p>();</span>
<a id=__codelineno-199-6 name=__codelineno-199-6></a>
<a id=__codelineno-199-7 name=__codelineno-199-7></a><span class=w>    </span><span class=kd>class</span> <span class=nc>BioProvider</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>FunctionProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-199-8 name=__codelineno-199-8></a>
<a id=__codelineno-199-9 name=__codelineno-199-9></a><span class=hll><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=nf>describePerson</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>lastName</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>dateOfBirth</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><a id=__codelineno-199-10 name=__codelineno-199-10></a><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Period</span><span class=p>.</span><span class=na>between</span><span class=p>(</span><span class=n>dateOfBirth</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=p>.</span><span class=na>now</span><span class=p>()).</span><span class=na>getYears</span><span class=p>();</span>
<a id=__codelineno-199-11 name=__codelineno-199-11></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>"%s %s is %d years old"</span><span class=p>,</span><span class=w> </span><span class=n>firstName</span><span class=p>,</span><span class=w> </span><span class=n>lastName</span><span class=p>,</span><span class=w> </span><span class=n>age</span><span class=p>);</span>
<a id=__codelineno-199-12 name=__codelineno-199-12></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-199-13 name=__codelineno-199-13></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-199-14 name=__codelineno-199-14></a><span class=p>}</span>
</code></pre></div></table></div><p>The <code>@FunctionSpec.provider</code> annotation attribute is a reference to a class implementing the <code>FunctionProvider</code>. The <code>FunctionProvider</code> implementations must have exactly one method matching the <code>@FunctionSpec.params</code>.<p>Additionally, <code>org.instancio.Random</code> can be declared as the last parameter if randomisation is required. For instance, the method declared by <code>BioProvider</code> can also be defined as:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-200-1>1</a></span>
<span class=normal><a href=#__codelineno-200-2>2</a></span>
<span class=normal><a href=#__codelineno-200-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-200-1 name=__codelineno-200-1></a><span class=n>String</span><span class=w> </span><span class=nf>describePerson</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>firstName</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>lastName</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>dateOfBirth</span><span class=p>,</span><span class=w> </span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-200-2 name=__codelineno-200-2></a><span class=w>    </span><span class=c1>// ...</span>
<a id=__codelineno-200-3 name=__codelineno-200-3></a><span class=p>}</span>
</code></pre></div></table></div><p>where the <code>random</code> instance can be used to randomise the output (if necessary) with the usual reproducibility guarantees.<div class="admonition warning"><p class=admonition-title>If <code>Random</code> is declared, it must be the last parameter.</div><h3 id=withstringmapper><code>@WithStringMapper</code><a title="Permanent link" class=headerlink href=#withstringmapper>¶</a></h3><p>This annotation allows you to specify a custom <code>Function</code> for converting string values to a type that is not supported out of the box.<p>For example, suppose we need a specific property as a byte array:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-201-1> 1</a></span>
<span class=normal><a href=#__codelineno-201-2> 2</a></span>
<span class=normal><a href=#__codelineno-201-3> 3</a></span>
<span class=normal><a href=#__codelineno-201-4> 4</a></span>
<span class=normal><a href=#__codelineno-201-5> 5</a></span>
<span class=normal><a href=#__codelineno-201-6> 6</a></span>
<span class=normal><a href=#__codelineno-201-7> 7</a></span>
<span class=normal><a href=#__codelineno-201-8> 8</a></span>
<span class=normal><a href=#__codelineno-201-9> 9</a></span>
<span class=normal><a href=#__codelineno-201-10>10</a></span>
<span class=normal><a href=#__codelineno-201-11>11</a></span>
<span class=normal><a href=#__codelineno-201-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-201-1 name=__codelineno-201-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-201-2 name=__codelineno-201-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-201-3 name=__codelineno-201-3></a>
<a id=__codelineno-201-4 name=__codelineno-201-4></a><span class=hll><span class=w>    </span><span class=nd>@WithStringMapper</span><span class=p>(</span><span class=n>StringByteArrayMapper</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-201-5 name=__codelineno-201-5></a><span class=hll><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=kt>byte</span><span class=o>[]></span><span class=w> </span><span class=nf>firstName</span><span class=p>();</span>
</span><a id=__codelineno-201-6 name=__codelineno-201-6></a>
<a id=__codelineno-201-7 name=__codelineno-201-7></a><span class=w>    </span><span class=kd>class</span> <span class=nc>StringByteArrayMapper</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Function</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>ByteArray</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-201-8 name=__codelineno-201-8></a><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>input</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-201-9 name=__codelineno-201-9></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>input</span><span class=p>.</span><span class=na>getBytes</span><span class=p>();</span>
<a id=__codelineno-201-10 name=__codelineno-201-10></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-201-11 name=__codelineno-201-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-201-12 name=__codelineno-201-12></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>4</lnum> Specifies the function class for the mapping.<br> <lnum>5</lnum> The type <code>byte[]</code> is the type returned by the mapping function.<br></div><p><code>@WithStringMapper</code> can also be used with methods annotated with <code>@AliasSpec</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-202-1>1</a></span>
<span class=normal><a href=#__codelineno-202-2>2</a></span>
<span class=normal><a href=#__codelineno-202-3>3</a></span>
<span class=normal><a href=#__codelineno-202-4>4</a></span>
<span class=normal><a href=#__codelineno-202-5>5</a></span>
<span class=normal><a href=#__codelineno-202-6>6</a></span>
<span class=normal><a href=#__codelineno-202-7>7</a></span>
<span class=normal><a href=#__codelineno-202-8>8</a></span>
<span class=normal><a href=#__codelineno-202-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-202-1 name=__codelineno-202-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-202-2 name=__codelineno-202-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-202-3 name=__codelineno-202-3></a>
<a id=__codelineno-202-4 name=__codelineno-202-4></a><span class=hll><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>firstName</span><span class=p>();</span>
</span><a id=__codelineno-202-5 name=__codelineno-202-5></a>
<a id=__codelineno-202-6 name=__codelineno-202-6></a><span class=w>    </span><span class=nd>@WithStringMapper</span><span class=p>(</span><span class=n>StringByteArrayMapper</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-202-7 name=__codelineno-202-7></a><span class=w>    </span><span class=nd>@AliasSpec</span><span class=p>(</span><span class=s>"firstName"</span><span class=p>)</span>
<a id=__codelineno-202-8 name=__codelineno-202-8></a><span class=hll><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=kt>byte</span><span class=o>[]></span><span class=w> </span><span class=nf>firstNameAsBytes</span><span class=p>();</span>
</span><a id=__codelineno-202-9 name=__codelineno-202-9></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition warning"><p class=admonition-title><code>@WithStringMapper</code> is ignored when applied to <code>@FunctionSpec</code>, <code>@GeneratedSpec</code>, or <code>@TemplateSpec</code> spec methods.</div><h3 id=withpostprocessor><code>@WithPostProcessor</code><a title="Permanent link" class=headerlink href=#withpostprocessor>¶</a></h3><p>This annotation enables post-processing of values returned by feed specs using an implementation of the <code>PostProcessor</code> interface:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-203-1>1</a></span>
<span class=normal><a href=#__codelineno-203-2>2</a></span>
<span class=normal><a href=#__codelineno-203-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-203-1 name=__codelineno-203-1></a><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>PostProcessor</span><span class=o><</span><span class=n>T</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-203-2 name=__codelineno-203-2></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=n>input</span><span class=p>,</span><span class=w> </span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>);</span>
<a id=__codelineno-203-3 name=__codelineno-203-3></a><span class=p>}</span>
</code></pre></div></table></div><p>Using the <code>PersonFeed</code> as an example, a post-processor can be used to convert names to uppercase:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-204-1> 1</a></span>
<span class=normal><a href=#__codelineno-204-2> 2</a></span>
<span class=normal><a href=#__codelineno-204-3> 3</a></span>
<span class=normal><a href=#__codelineno-204-4> 4</a></span>
<span class=normal><a href=#__codelineno-204-5> 5</a></span>
<span class=normal><a href=#__codelineno-204-6> 6</a></span>
<span class=normal><a href=#__codelineno-204-7> 7</a></span>
<span class=normal><a href=#__codelineno-204-8> 8</a></span>
<span class=normal><a href=#__codelineno-204-9> 9</a></span>
<span class=normal><a href=#__codelineno-204-10>10</a></span>
<span class=normal><a href=#__codelineno-204-11>11</a></span>
<span class=normal><a href=#__codelineno-204-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-204-1 name=__codelineno-204-1></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-204-2 name=__codelineno-204-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-204-3 name=__codelineno-204-3></a>
<a id=__codelineno-204-4 name=__codelineno-204-4></a><span class=w>    </span><span class=nd>@WithPostProcessor</span><span class=p>(</span><span class=n>UpperCaseConverter</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-204-5 name=__codelineno-204-5></a><span class=w>    </span><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>firstName</span><span class=p>();</span>
<a id=__codelineno-204-6 name=__codelineno-204-6></a>
<a id=__codelineno-204-7 name=__codelineno-204-7></a><span class=w>    </span><span class=kd>class</span> <span class=nc>UpperCaseConverter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>PostProcessor</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-204-8 name=__codelineno-204-8></a><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>input</span><span class=p>,</span><span class=w> </span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-204-9 name=__codelineno-204-9></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>input</span><span class=p>.</span><span class=na>toUpperCase</span><span class=p>();</span>
<a id=__codelineno-204-10 name=__codelineno-204-10></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-204-11 name=__codelineno-204-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-204-12 name=__codelineno-204-12></a><span class=p>}</span>
</code></pre></div></table></div><p>Invoking the <code>firstName()</code> method using the <code>persons.csv</code> defined earlier produces the following output:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-205-1>1</a></span>
<span class=normal><a href=#__codelineno-205-2>2</a></span>
<span class=normal><a href=#__codelineno-205-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-205-1 name=__codelineno-205-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>createFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-205-2 name=__codelineno-205-2></a>
<a id=__codelineno-205-3 name=__codelineno-205-3></a><span class=n>personFeed</span><span class=p>().</span><span class=na>firstName</span><span class=p>().</span><span class=na>list</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w> </span><span class=c1>// [JOHN, ALICE, BOB]</span>
</code></pre></div></table></div><p>The <code>@WithPostProcessor</code> annotation can be combined with any other annotation described earlier. In addition, a spec method can define multiple post-processors. This is shown in the following example, where two post-processors are applied to the <code>@TemplateSpec</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-206-1>1</a></span>
<span class=normal><a href=#__codelineno-206-2>2</a></span>
<span class=normal><a href=#__codelineno-206-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-206-1 name=__codelineno-206-1></a><span class=nd>@WithPostProcessor</span><span class=p>({</span><span class=n>UpperCaseConverter</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>QuoteAppener</span><span class=p>.</span><span class=na>class</span><span class=p>})</span>
<a id=__codelineno-206-2 name=__codelineno-206-2></a><span class=nd>@TemplateSpec</span><span class=p>(</span><span class=s>"${firstName} ${lastName}"</span><span class=p>)</span>
<a id=__codelineno-206-3 name=__codelineno-206-3></a><span class=n>FeedSpec</span><span class=o><</span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=nf>fullName</span><span class=p>();</span>
</code></pre></div></table></div><p>The above snippet will result in the following output:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-207-1>1</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-207-1 name=__codelineno-207-1></a><span class=n>personFeed</span><span class=p>().</span><span class=na>fullName</span><span class=p>().</span><span class=na>list</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w> </span><span class=c1>// ["JOHN DOE", "ALICE SMITH", "BOB BROWN"]</span>
</code></pre></div></table></div><div class="admonition info"><p class=admonition-title>Post-processors can also be used for fuzzing the data using the <code>Random</code> instance provided as the second argument.</div><h3 id=nullablespec><code>@NullableSpec</code><a title="Permanent link" class=headerlink href=#nullablespec>¶</a></h3><p>The <code>@NullableSpec</code> annotation is used to indicate that specific feed specs can return null values. This annotation can be combined with any of the other annotations mentioned earlier. When a feed spec is marked as nullable, its corresponding method may randomly produce null values. For example:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-208-1>1</a></span>
<span class=normal><a href=#__codelineno-208-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-208-1 name=__codelineno-208-1></a><span class=nd>@NullableSpec</span>
<a id=__codelineno-208-2 name=__codelineno-208-2></a><span class=n>FeedSpec</span><span class=o><</span><span class=n>Gender</span><span class=o>></span><span class=w> </span><span class=nf>gender</span><span class=p>();</span>
</code></pre></div></table></div><p>Invoking the <code>gender()</code> method may yield results like:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-209-1>1</a></span>
<span class=normal><a href=#__codelineno-209-2>2</a></span>
<span class=normal><a href=#__codelineno-209-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-209-1 name=__codelineno-209-1></a><span class=n>personFeed</span><span class=p>().</span><span class=na>gender</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// MALE</span>
<a id=__codelineno-209-2 name=__codelineno-209-2></a><span class=n>personFeed</span><span class=p>().</span><span class=na>gender</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// null</span>
<a id=__codelineno-209-3 name=__codelineno-209-3></a><span class=c1>// snip...</span>
</code></pre></div></table></div><p>This allows for variability in data generation scenarios where <code>null</code> values are valid or desired outputs.<h2 id=feed-configuration>Feed Configuration<a title="Permanent link" class=headerlink href=#feed-configuration>¶</a></h2><p>This section outlines configuration options available for feeds. Configuration can be specified through (in order of precedence, from highest to lowest):<ul><li><strong>Builder API</strong> during feed creation.<li><strong>Annotations</strong> within a custom feed interface.<li><strong>Settings</strong> via the <code>Settings</code> class or <code>instancio.properties</code>.</ul><h3 id=feed-data-source>Feed Data Source<a title="Permanent link" class=headerlink href=#feed-data-source>¶</a></h3><p>All feeds require a data source to be specified. For custom feeds that extend the <code>Feed</code> interface, this can be achieved using the <code>@Feed.Source</code> annotation. Alternatively, the data source can be specified (or overridden) using the builder API. This table summarises the options:<table><thead><tr><th><code>@Feed.Source</code><br> attribute<th>Builder API<th>Description<tbody><tr><td><code>string</code><td><code>ofString()</code><td>Provides data as a <code>String</code><tr><td><code>file</code><td><code>ofFile()</code><td>Specifies the path to a file<tr><td><code>resource</code><td><code>ofResource()</code><td>Refers to a classpath resource<tr><td><code>-</code><td><code>ofInputStream()</code><td>Provides data as an <code>InputStream</code><tr><td><code>-</code><td><code>of(Class)</code><td>Uses a custom Feed class with <code>@Feed.Source</code></table><p>It's important to note that the builder API can override the data source specified by <code>@Feed.Source</code>. For example, consider the <code>PersonFeed</code> interface defined with a default resource:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-210-1>1</a></span>
<span class=normal><a href=#__codelineno-210-2>2</a></span>
<span class=normal><a href=#__codelineno-210-3>3</a></span>
<span class=normal><a href=#__codelineno-210-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-210-1 name=__codelineno-210-1></a><span class=hll><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
</span><a id=__codelineno-210-2 name=__codelineno-210-2></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-210-3 name=__codelineno-210-3></a><span class=w>    </span><span class=c1>// feed spec methods...</span>
<a id=__codelineno-210-4 name=__codelineno-210-4></a><span class=p>}</span>
</code></pre></div></table></div><p>To reuse <code>PersonFeed</code> with an alternative data source:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-211-1>1</a></span>
<span class=normal><a href=#__codelineno-211-2>2</a></span>
<span class=normal><a href=#__codelineno-211-3>3</a></span>
<span class=normal><a href=#__codelineno-211-4>4</a></span>
<span class=normal><a href=#__codelineno-211-5>5</a></span>
<span class=normal><a href=#__codelineno-211-6>6</a></span>
<span class=normal><a href=#__codelineno-211-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-211-1 name=__codelineno-211-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-211-2 name=__codelineno-211-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withDataSource</span><span class=p>(</span><span class=n>source</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>ofResource</span><span class=p>(</span><span class=s>"another-persons.csv"</span><span class=p>))</span>
</span><a id=__codelineno-211-3 name=__codelineno-211-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-211-4 name=__codelineno-211-4></a>
<a id=__codelineno-211-5 name=__codelineno-211-5></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-211-6 name=__codelineno-211-6></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>personFeed</span><span class=p>)</span>
</span><a id=__codelineno-211-7 name=__codelineno-211-7></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> Specify an alternative resource.<br> <lnum>6</lnum> <code>Person</code> data will be populated using <code>another-persons.csv</code>.<br></div><p>The <code>applyFeed()</code> method also supports specifying the data source directly, without creating a custom <code>Feed</code> class:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-212-1>1</a></span>
<span class=normal><a href=#__codelineno-212-2>2</a></span>
<span class=normal><a href=#__codelineno-212-3>3</a></span>
<span class=normal><a href=#__codelineno-212-4>4</a></span>
<span class=normal><a href=#__codelineno-212-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-212-1 name=__codelineno-212-1></a><span class=n>Path</span><span class=w> </span><span class=n>feedPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>"/path/to/persons.csv"</span><span class=p>);</span>
<a id=__codelineno-212-2 name=__codelineno-212-2></a>
<a id=__codelineno-212-3 name=__codelineno-212-3></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-212-4 name=__codelineno-212-4></a><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>ofFile</span><span class=p>(</span><span class=n>feedPath</span><span class=p>))</span>
<a id=__codelineno-212-5 name=__codelineno-212-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h3 id=feed-data-access>Feed Data Access<a title="Permanent link" class=headerlink href=#feed-data-access>¶</a></h3><p>All the examples above produced feed data in the same order as they are defined in the <code>persons.csv</code> data file. This behaviour is controlled by the <code>Keys.FEED_DATA_ACCESS</code> setting which offers two options:<ul><li><code>FeedDataAccess.RANDOM</code> - data is provided in random order.<li><code>FeedDataAccess.SEQUENTIAL</code> - data is provided in the order it appears in the feed (default behaviour).</ul><p>The default setting can be configured via <code>Settings</code> or globally in <code>instancio.properties</code>.<div class="admonition tip"><p class=admonition-title>When <code>SEQUENTIAL</code> mode is selected, consider setting <code>Keys.FEED_DATA_END_ACTION</code> to define how the end of the data feed should be handled.</div><p>When extending the <code>Feed</code> interface, the behaviour can be specified using the <code>@Feed.DataAccess</code> annotation, which takes precedence over settings:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-213-1>1</a></span>
<span class=normal><a href=#__codelineno-213-2>2</a></span>
<span class=normal><a href=#__codelineno-213-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-213-1 name=__codelineno-213-1></a><span class=hll><span class=nd>@Feed.DataAccess</span><span class=p>(</span><span class=n>FeedDataAccess</span><span class=p>.</span><span class=na>RANDOM</span><span class=p>)</span>
</span><a id=__codelineno-213-2 name=__codelineno-213-2></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-213-3 name=__codelineno-213-3></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{}</span>
</code></pre></div></table></div><p>Additionally, the behaviour can be overridden using the builder API when creating a feed instance. This method allows overriding the value set via settings or annotations:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-214-1>1</a></span>
<span class=normal><a href=#__codelineno-214-2>2</a></span>
<span class=normal><a href=#__codelineno-214-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-214-1 name=__codelineno-214-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-214-2 name=__codelineno-214-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>dataAccess</span><span class=p>(</span><span class=n>FeedDataAccess</span><span class=p>.</span><span class=na>RANDOM</span><span class=p>)</span>
</span><a id=__codelineno-214-3 name=__codelineno-214-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Similarly, when using <code>applyFeed()</code>, the same method is available for specifying data access behaviour:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-215-1>1</a></span>
<span class=normal><a href=#__codelineno-215-2>2</a></span>
<span class=normal><a href=#__codelineno-215-3>3</a></span>
<span class=normal><a href=#__codelineno-215-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-215-1 name=__codelineno-215-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-215-2 name=__codelineno-215-2></a><span class=w>        </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-215-3 name=__codelineno-215-3></a><span class=hll><span class=w>                </span><span class=p>.</span><span class=na>dataAccess</span><span class=p>(</span><span class=n>FeedDataAccess</span><span class=p>.</span><span class=na>RANDOM</span><span class=p>))</span>
</span><a id=__codelineno-215-4 name=__codelineno-215-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h3 id=feed-data-end>Feed Data End<a title="Permanent link" class=headerlink href=#feed-data-end>¶</a></h3><p>This setting determines the behaviour when the end of the feed is reached while generating data. It applies only if <code>Keys.FEED_DATA_ACCESS</code> is set to <code>FeedDataAccess.SEQUENTIAL</code>. There are two supported values:<ul><li><code>FeedDataEndAction.FAIL</code> - throws an exception when the end of the feed is reached.<li><code>FeedDataEndAction.RECYCLE</code> - recycles the data, starting from the beginning of the feed.</ul><p>You can also specify this behaviour using the builder API:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-216-1>1</a></span>
<span class=normal><a href=#__codelineno-216-2>2</a></span>
<span class=normal><a href=#__codelineno-216-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-216-1 name=__codelineno-216-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-216-2 name=__codelineno-216-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>onDataEnd</span><span class=p>(</span><span class=n>FeedDataEndAction</span><span class=p>.</span><span class=na>RECYCLE</span><span class=p>)</span>
</span><a id=__codelineno-216-3 name=__codelineno-216-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Similarly, when using the <code>applyFeed()</code> method, you can specify the data end action:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-217-1>1</a></span>
<span class=normal><a href=#__codelineno-217-2>2</a></span>
<span class=normal><a href=#__codelineno-217-3>3</a></span>
<span class=normal><a href=#__codelineno-217-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-217-1 name=__codelineno-217-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-217-2 name=__codelineno-217-2></a><span class=w>        </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-217-3 name=__codelineno-217-3></a><span class=hll><span class=w>                </span><span class=p>.</span><span class=na>onDataEnd</span><span class=p>(</span><span class=n>FeedDataEndAction</span><span class=p>.</span><span class=na>RECYCLE</span><span class=p>))</span>
</span><a id=__codelineno-217-4 name=__codelineno-217-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h3 id=feed-data-format>Feed Data Format<a title="Permanent link" class=headerlink href=#feed-data-format>¶</a></h3><p>Instancio supports data feeds in both CSV and JSON formats. Using JSON feeds requires <code>jackson-databind</code> to be included in your project's dependencies (Instancio does not provide this dependency transitively):<div class=highlight><pre><span></span><code><a href=#__codelineno-218-1 id=__codelineno-218-1 name=__codelineno-218-1></a><span class=nt>&LTdependency></span>
<a href=#__codelineno-218-2 id=__codelineno-218-2 name=__codelineno-218-2></a><span class=w>    </span><span class=nt>&LTgroupId></span>com.fasterxml.jackson.core<span class=nt>&LT/groupId></span>
<a href=#__codelineno-218-3 id=__codelineno-218-3 name=__codelineno-218-3></a><span class=w>    </span><span class=nt>&LTartifactId></span>jackson-databind<span class=nt>&LT/artifactId></span>
<a href=#__codelineno-218-4 id=__codelineno-218-4 name=__codelineno-218-4></a><span class=w>    </span><span class=nt>&LTversion></span>${jackson-databind-version}<span class=nt>&LT/version></span>
<a href=#__codelineno-218-5 id=__codelineno-218-5 name=__codelineno-218-5></a><span class=nt>&LT/dependency></span>
</code></pre></div><p>By default, Instancio uses <code>CSV</code> as the data format. However, you can modify this behavior using the <code>Keys.FEED_FORMAT_TYPE</code> setting.<p>To specify the data format for a custom feed interface, you can use the <code>@Feed.FormatType</code> annotation:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-219-1>1</a></span>
<span class=normal><a href=#__codelineno-219-2>2</a></span>
<span class=normal><a href=#__codelineno-219-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-219-1 name=__codelineno-219-1></a><span class=hll><span class=nd>@Feed.FormatType</span><span class=p>(</span><span class=n>FeedFormatType</span><span class=p>.</span><span class=na>JSON</span><span class=p>)</span>
</span><a id=__codelineno-219-2 name=__codelineno-219-2></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.json"</span><span class=p>)</span>
<a id=__codelineno-219-3 name=__codelineno-219-3></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{}</span>
</code></pre></div></table></div><p>Alternatively, the format can be set using the builder API:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-220-1>1</a></span>
<span class=normal><a href=#__codelineno-220-2>2</a></span>
<span class=normal><a href=#__codelineno-220-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-220-1 name=__codelineno-220-1></a><span class=n>PersonFeed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-220-2 name=__codelineno-220-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>formatType</span><span class=p>(</span><span class=n>FeedFormatType</span><span class=p>.</span><span class=na>JSON</span><span class=p>)</span>
</span><a id=__codelineno-220-3 name=__codelineno-220-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>or using the <code>applyFeed()</code> method:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-221-1>1</a></span>
<span class=normal><a href=#__codelineno-221-2>2</a></span>
<span class=normal><a href=#__codelineno-221-3>3</a></span>
<span class=normal><a href=#__codelineno-221-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-221-1 name=__codelineno-221-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-221-2 name=__codelineno-221-2></a><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-221-3 name=__codelineno-221-3></a><span class=hll><span class=w>                </span><span class=p>.</span><span class=na>formatType</span><span class=p>(</span><span class=n>FeedFormatType</span><span class=p>.</span><span class=na>JSON</span><span class=p>))</span>
</span><a id=__codelineno-221-4 name=__codelineno-221-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h4 id=format-options>Format Options<a title="Permanent link" class=headerlink href=#format-options>¶</a></h4><p>The CSV format allows for configuring various options to customise how data is interpreted:<ul><li>Delimiter Character: Specifies the character used to separate fields in the CSV data.<li>Comment Prefix: Defines the prefix used to identify comment lines within the CSV data.<li>Whitespace Trimming: Controls whether leading and trailing whitespace around fields should be trimmed.</ul><p>These options enable defining data in a customised CSV format, as shown in the example below:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-222-1> 1</a></span>
<span class=normal><a href=#__codelineno-222-2> 2</a></span>
<span class=normal><a href=#__codelineno-222-3> 3</a></span>
<span class=normal><a href=#__codelineno-222-4> 4</a></span>
<span class=normal><a href=#__codelineno-222-5> 5</a></span>
<span class=normal><a href=#__codelineno-222-6> 6</a></span>
<span class=normal><a href=#__codelineno-222-7> 7</a></span>
<span class=normal><a href=#__codelineno-222-8> 8</a></span>
<span class=normal><a href=#__codelineno-222-9> 9</a></span>
<span class=normal><a href=#__codelineno-222-10>10</a></span>
<span class=normal><a href=#__codelineno-222-11>11</a></span>
<span class=normal><a href=#__codelineno-222-12>12</a></span>
<span class=normal><a href=#__codelineno-222-13>13</a></span>
<span class=normal><a href=#__codelineno-222-14>14</a></span>
<span class=normal><a href=#__codelineno-222-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-222-1 name=__codelineno-222-1></a><span class=n>String</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"""</span>
<a id=__codelineno-222-2 name=__codelineno-222-2></a><span class=s>    | firstName  | lastName  | dateOfBirth  | gender |</span>
<a id=__codelineno-222-3 name=__codelineno-222-3></a><span class=s>    |------------|-----------|--------------|--------|</span>
<a id=__codelineno-222-4 name=__codelineno-222-4></a><span class=s>    | John       | Doe       | 2001-11-22   | MALE   |</span>
<a id=__codelineno-222-5 name=__codelineno-222-5></a><span class=s>    | Alice      | Smith     | 1977-07-15   | FEMALE |</span>
<a id=__codelineno-222-6 name=__codelineno-222-6></a><span class=s>    | Bob        | Brown     | 1999-12-01   | MALE   |</span>
<a id=__codelineno-222-7 name=__codelineno-222-7></a><span class=s>    |- snip...</span>
<a id=__codelineno-222-8 name=__codelineno-222-8></a><span class=s>    """</span><span class=p>;</span>
<a id=__codelineno-222-9 name=__codelineno-222-9></a>
<a id=__codelineno-222-10 name=__codelineno-222-10></a><span class=n>Feed</span><span class=w> </span><span class=n>personFeed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofFeed</span><span class=p>(</span><span class=n>Feed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-222-11 name=__codelineno-222-11></a><span class=w>    </span><span class=p>.</span><span class=na>withDataSource</span><span class=p>(</span><span class=n>source</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>ofString</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
<a id=__codelineno-222-12 name=__codelineno-222-12></a><span class=w>    </span><span class=p>.</span><span class=na>formatOptions</span><span class=p>(</span><span class=n>format</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>format</span><span class=p>.</span><span class=na>csv</span><span class=p>()</span>
<a id=__codelineno-222-13 name=__codelineno-222-13></a><span class=w>            </span><span class=p>.</span><span class=na>commentPrefix</span><span class=p>(</span><span class=s>"|-"</span><span class=p>)</span>
<a id=__codelineno-222-14 name=__codelineno-222-14></a><span class=w>            </span><span class=p>.</span><span class=na>delimiter</span><span class=p>(</span><span class=sc>'|'</span><span class=p>))</span>
<a id=__codelineno-222-15 name=__codelineno-222-15></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition tip"><p class=admonition-title>The <code>formatOptions()</code> method is also available when using the <code>applyFeed()</code> builder API.</div><h3 id=feed-tags>Feed Tags<a title="Permanent link" class=headerlink href=#feed-tags>¶</a></h3><p>Feeds in Instancio support tagging, which allows grouping data by a specific <em>tag key</em> and filtering it by <em>tag values</em>.<p>For feeds that extend the <code>Feed</code> interface, you can specify the tag key using the <code>@Feed.TagKey</code> annotation:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-223-1>1</a></span>
<span class=normal><a href=#__codelineno-223-2>2</a></span>
<span class=normal><a href=#__codelineno-223-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-223-1 name=__codelineno-223-1></a><span class=hll><span class=nd>@Feed.TagKey</span><span class=p>(</span><span class=s>"gender"</span><span class=p>)</span>
</span><a id=__codelineno-223-2 name=__codelineno-223-2></a><span class=nd>@Feed.Source</span><span class=p>(</span><span class=n>resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"persons.csv"</span><span class=p>)</span>
<a id=__codelineno-223-3 name=__codelineno-223-3></a><span class=kd>interface</span> <span class=nc>PersonFeed</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Feed</span><span class=w> </span><span class=p>{}</span>
</code></pre></div></table></div><p>With the tag key defined, you can generate a list of <code>Person</code> objects, filtering for those where the <code>gender</code> tag value is <code>FEMALE</code>, for example:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-224-1>1</a></span>
<span class=normal><a href=#__codelineno-224-2>2</a></span>
<span class=normal><a href=#__codelineno-224-3>3</a></span>
<span class=normal><a href=#__codelineno-224-4>4</a></span>
<span class=normal><a href=#__codelineno-224-5>5</a></span>
<span class=normal><a href=#__codelineno-224-6>6</a></span>
<span class=normal><a href=#__codelineno-224-7>7</a></span>
<span class=normal><a href=#__codelineno-224-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-224-1 name=__codelineno-224-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-224-2 name=__codelineno-224-2></a><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-224-3 name=__codelineno-224-3></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>withTagValue</span><span class=p>(</span><span class=s>"FEMALE"</span><span class=p>))</span>
</span><a id=__codelineno-224-4 name=__codelineno-224-4></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-224-5 name=__codelineno-224-5></a>
<a id=__codelineno-224-6 name=__codelineno-224-6></a><span class=c1>// Output:</span>
<a id=__codelineno-224-7 name=__codelineno-224-7></a><span class=c1>// [Person[id=9485, firstName="Alice", lastName="Smith", dateOfBirth=1977-07-15, gender=FEMALE],</span>
<a id=__codelineno-224-8 name=__codelineno-224-8></a><span class=c1>//  ...snip...]</span>
</code></pre></div></table></div><p>You can also specify the tag key using the builder API, which overrides the <code>@Feed.TagKey</code> annotation (if present):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-225-1>1</a></span>
<span class=normal><a href=#__codelineno-225-2>2</a></span>
<span class=normal><a href=#__codelineno-225-3>3</a></span>
<span class=normal><a href=#__codelineno-225-4>4</a></span>
<span class=normal><a href=#__codelineno-225-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-225-1 name=__codelineno-225-1></a><span class=n>List</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>persons</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-225-2 name=__codelineno-225-2></a><span class=w>    </span><span class=p>.</span><span class=na>applyFeed</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>feed</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>feed</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>PersonFeed</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-225-3 name=__codelineno-225-3></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>withTagKey</span><span class=p>(</span><span class=s>"gender"</span><span class=p>)</span>
</span><a id=__codelineno-225-4 name=__codelineno-225-4></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>withTagValue</span><span class=p>(</span><span class=s>"FEMALE"</span><span class=p>))</span>
</span><a id=__codelineno-225-5 name=__codelineno-225-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>In addition, Instancio provides settings (<code>Keys.FEED_TAG_KEY</code> and <code>Keys.FEED_TAG_VALUE</code>) to configure default tag key and value settings, which can be overridden as needed. By default, these settings are <code>null</code>.<div class="admonition tip"><p class=admonition-title>If the feed includes an 'id' column, tagging allows selecting specific records based on their 'id'.</div><h1 id=configuration>Configuration<a title="Permanent link" class=headerlink href=#configuration>¶</a></h1><p>Instancio configuration is encapsulated by the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> class, a map of keys and corresponding values. The <code>Settings</code> class provides a few static methods for creating settings.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Settings static factory methods</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-226-1>1</a></span>
<span class=normal><a href=#__codelineno-226-2>2</a></span>
<span class=normal><a href=#__codelineno-226-3>3</a></span>
<span class=normal><a href=#__codelineno-226-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-226-1 name=__codelineno-226-1></a><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-226-2 name=__codelineno-226-2></a><span class=n>Settings</span><span class=p>.</span><span class=na>defaults</span><span class=p>()</span>
<a id=__codelineno-226-3 name=__codelineno-226-3></a><span class=n>Settings</span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>Map</span><span class=o><</span><span class=n>Object</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>></span><span class=w> </span><span class=n>map</span><span class=p>)</span>
<a id=__codelineno-226-4 name=__codelineno-226-4></a><span class=n>Settings</span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>Settings</span><span class=w> </span><span class=n>other</span><span class=p>)</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1</lnum> Creates a new instance of blank settings.<br> <lnum>2</lnum> Creates a new instance containing default settings.<br> <lnum>3</lnum> Creates settings from a <code>Map</code> or <code>java.util.Properties</code>.<br> <lnum>4</lnum> Creates a copy of <code>other</code> settings (a clone operation).</div><p>Settings can be overridden programmatically or through a properties file.<div class="admonition info"><p class=admonition-title>Info<p>To inspect all the keys and default values, simply: <code>System.out.println(Settings.defaults())</code></div><h2 id=overriding-settings-programmatically>Overriding Settings Programmatically<a title="Permanent link" class=headerlink href=#overriding-settings-programmatically>¶</a></h2><p>To override programmatically, an instance of <code>Settings</code> can be passed in to the builder API:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Supplying custom settings</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-227-1>1</a></span>
<span class=normal><a href=#__codelineno-227-2>2</a></span>
<span class=normal><a href=#__codelineno-227-3>3</a></span>
<span class=normal><a href=#__codelineno-227-4>4</a></span>
<span class=normal><a href=#__codelineno-227-5>5</a></span>
<span class=normal><a href=#__codelineno-227-6>6</a></span>
<span class=normal><a href=#__codelineno-227-7>7</a></span>
<span class=normal><a href=#__codelineno-227-8>8</a></span>
<span class=normal><a href=#__codelineno-227-9>9</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-227-1 name=__codelineno-227-1></a><span class=n>Settings</span><span class=w> </span><span class=n>overrides</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-227-2 name=__codelineno-227-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>COLLECTION_MIN_SIZE</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>)</span>
</span><a id=__codelineno-227-3 name=__codelineno-227-3></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>STRING_ALLOW_EMPTY</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>)</span>
<a id=__codelineno-227-4 name=__codelineno-227-4></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SEED</span><span class=p>,</span><span class=w> </span><span class=mi>12345L</span><span class=p>)</span><span class=w> </span><span class=c1>// seed is of type long (note the 'L')</span>
<a id=__codelineno-227-5 name=__codelineno-227-5></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>lock</span><span class=p>();</span>
</span><a id=__codelineno-227-6 name=__codelineno-227-6></a>
<a id=__codelineno-227-7 name=__codelineno-227-7></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-227-8 name=__codelineno-227-8></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>overrides</span><span class=p>)</span>
</span><a id=__codelineno-227-9 name=__codelineno-227-9></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Keys.html target=_blank>Keys</a> class provides static fields for all the keys supported by Instancio.<br> <lnum>5</lnum> The <code>lock()</code> method makes the settings instance immutable. This is an optional method call. It can be used to prevent modifications if settings are shared across multiple methods or classes.<br> <lnum>8</lnum> The passed-in settings instance will override default settings.</div><div class="admonition attention"><p class=admonition-title>Range settings auto-adjust<p>When updating range settings, such as <code>COLLECTION_MIN_SIZE</code> and <code>COLLECTION_MAX_SIZE</code>, the range bound is auto-adjusted if the new minimum is higher than the current maximum, and vice versa.</div><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Keys.html target=_blank>Keys</a> class defines a <em>property key</em> for every key object, for example:<ul><li><code>Keys.COLLECTION_MIN_SIZE</code> -> <code>"collection.min.size"</code><li><code>Keys.STRING_ALLOW_EMPTY</code> -> <code>"string.allow.empty"</code></ul><p>Using these property keys, configuration values can also be overridden using a properties file.<h2 id=overriding-settings-using-a-properties-file>Overriding Settings Using a Properties File<a title="Permanent link" class=headerlink href=#overriding-settings-using-a-properties-file>¶</a></h2><p>Default settings can be overridden using <code>instancio.properties</code>. Instancio will automatically load this file from the root of the classpath. The following listing shows all the property keys that can be configured.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Sample configuration properties</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-228-1> 1</a></span>
<span class=normal><a href=#__codelineno-228-2> 2</a></span>
<span class=normal><a href=#__codelineno-228-3> 3</a></span>
<span class=normal><a href=#__codelineno-228-4> 4</a></span>
<span class=normal><a href=#__codelineno-228-5> 5</a></span>
<span class=normal><a href=#__codelineno-228-6> 6</a></span>
<span class=normal><a href=#__codelineno-228-7> 7</a></span>
<span class=normal><a href=#__codelineno-228-8> 8</a></span>
<span class=normal><a href=#__codelineno-228-9> 9</a></span>
<span class=normal><a href=#__codelineno-228-10>10</a></span>
<span class=normal><a href=#__codelineno-228-11>11</a></span>
<span class=normal><a href=#__codelineno-228-12>12</a></span>
<span class=normal><a href=#__codelineno-228-13>13</a></span>
<span class=normal><a href=#__codelineno-228-14>14</a></span>
<span class=normal><a href=#__codelineno-228-15>15</a></span>
<span class=normal><a href=#__codelineno-228-16>16</a></span>
<span class=normal><a href=#__codelineno-228-17>17</a></span>
<span class=normal><a href=#__codelineno-228-18>18</a></span>
<span class=normal><a href=#__codelineno-228-19>19</a></span>
<span class=normal><a href=#__codelineno-228-20>20</a></span>
<span class=normal><a href=#__codelineno-228-21>21</a></span>
<span class=normal><a href=#__codelineno-228-22>22</a></span>
<span class=normal><a href=#__codelineno-228-23>23</a></span>
<span class=normal><a href=#__codelineno-228-24>24</a></span>
<span class=normal><a href=#__codelineno-228-25>25</a></span>
<span class=normal><a href=#__codelineno-228-26>26</a></span>
<span class=normal><a href=#__codelineno-228-27>27</a></span>
<span class=normal><a href=#__codelineno-228-28>28</a></span>
<span class=normal><a href=#__codelineno-228-29>29</a></span>
<span class=normal><a href=#__codelineno-228-30>30</a></span>
<span class=normal><a href=#__codelineno-228-31>31</a></span>
<span class=normal><a href=#__codelineno-228-32>32</a></span>
<span class=normal><a href=#__codelineno-228-33>33</a></span>
<span class=normal><a href=#__codelineno-228-34>34</a></span>
<span class=normal><a href=#__codelineno-228-35>35</a></span>
<span class=normal><a href=#__codelineno-228-36>36</a></span>
<span class=normal><a href=#__codelineno-228-37>37</a></span>
<span class=normal><a href=#__codelineno-228-38>38</a></span>
<span class=normal><a href=#__codelineno-228-39>39</a></span>
<span class=normal><a href=#__codelineno-228-40>40</a></span>
<span class=normal><a href=#__codelineno-228-41>41</a></span>
<span class=normal><a href=#__codelineno-228-42>42</a></span>
<span class=normal><a href=#__codelineno-228-43>43</a></span>
<span class=normal><a href=#__codelineno-228-44>44</a></span>
<span class=normal><a href=#__codelineno-228-45>45</a></span>
<span class=normal><a href=#__codelineno-228-46>46</a></span>
<span class=normal><a href=#__codelineno-228-47>47</a></span>
<span class=normal><a href=#__codelineno-228-48>48</a></span>
<span class=normal><a href=#__codelineno-228-49>49</a></span>
<span class=normal><a href=#__codelineno-228-50>50</a></span>
<span class=normal><a href=#__codelineno-228-51>51</a></span>
<span class=normal><a href=#__codelineno-228-52>52</a></span>
<span class=normal><a href=#__codelineno-228-53>53</a></span>
<span class=normal><a href=#__codelineno-228-54>54</a></span>
<span class=normal><a href=#__codelineno-228-55>55</a></span>
<span class=normal><a href=#__codelineno-228-56>56</a></span>
<span class=normal><a href=#__codelineno-228-57>57</a></span>
<span class=normal><a href=#__codelineno-228-58>58</a></span>
<span class=normal><a href=#__codelineno-228-59>59</a></span>
<span class=normal><a href=#__codelineno-228-60>60</a></span>
<span class=normal><a href=#__codelineno-228-61>61</a></span>
<span class=normal><a href=#__codelineno-228-62>62</a></span>
<span class=normal><a href=#__codelineno-228-63>63</a></span>
<span class=normal><a href=#__codelineno-228-64>64</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-228-1 name=__codelineno-228-1></a><span class=hll><span class=na>array.elements.nullable</span><span class=o>=</span><span class=s>false</span>
</span><a id=__codelineno-228-2 name=__codelineno-228-2></a><span class=na>array.max.length</span><span class=o>=</span><span class=s>6</span>
<a id=__codelineno-228-3 name=__codelineno-228-3></a><span class=na>array.min.length</span><span class=o>=</span><span class=s>2</span>
<a id=__codelineno-228-4 name=__codelineno-228-4></a><span class=hll><span class=na>array.nullable</span><span class=o>=</span><span class=s>false</span>
</span><a id=__codelineno-228-5 name=__codelineno-228-5></a><span class=na>bigdecimal.scale</span><span class=o>=</span><span class=s>2</span>
<a id=__codelineno-228-6 name=__codelineno-228-6></a><span class=na>boolean.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-7 name=__codelineno-228-7></a><span class=na>byte.max</span><span class=o>=</span><span class=s>127</span>
<a id=__codelineno-228-8 name=__codelineno-228-8></a><span class=na>byte.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-9 name=__codelineno-228-9></a><span class=na>byte.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-10 name=__codelineno-228-10></a><span class=na>character.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-11 name=__codelineno-228-11></a><span class=hll><span class=na>collection.elements.nullable</span><span class=o>=</span><span class=s>false</span>
</span><a id=__codelineno-228-12 name=__codelineno-228-12></a><span class=na>collection.max.size</span><span class=o>=</span><span class=s>6</span>
<a id=__codelineno-228-13 name=__codelineno-228-13></a><span class=na>collection.min.size</span><span class=o>=</span><span class=s>2</span>
<a id=__codelineno-228-14 name=__codelineno-228-14></a><span class=na>collection.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-15 name=__codelineno-228-15></a><span class=na>double.max</span><span class=o>=</span><span class=s>10000</span>
<a id=__codelineno-228-16 name=__codelineno-228-16></a><span class=na>double.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-17 name=__codelineno-228-17></a><span class=na>double.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-18 name=__codelineno-228-18></a><span class=na>fail.on.error</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-19 name=__codelineno-228-19></a><span class=na>fill.type</span><span class=o>=</span><span class=s>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</span>
<a id=__codelineno-228-20 name=__codelineno-228-20></a><span class=na>float.max</span><span class=o>=</span><span class=s>10000</span>
<a id=__codelineno-228-21 name=__codelineno-228-21></a><span class=na>float.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-22 name=__codelineno-228-22></a><span class=na>float.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-23 name=__codelineno-228-23></a><span class=na>ignore.field.name.regexes</span><span class=o>=</span><span class=s>foo.*,bar.*</span>
<a id=__codelineno-228-24 name=__codelineno-228-24></a><span class=na>instancio.source.samples</span><span class=o>=</span><span class=s>100</span>
<a id=__codelineno-228-25 name=__codelineno-228-25></a><span class=na>integer.max</span><span class=o>=</span><span class=s>10000</span>
<a id=__codelineno-228-26 name=__codelineno-228-26></a><span class=na>integer.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-27 name=__codelineno-228-27></a><span class=na>integer.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-28 name=__codelineno-228-28></a><span class=na>jpa.enabled</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-29 name=__codelineno-228-29></a><span class=na>long.max</span><span class=o>=</span><span class=s>10000</span>
<a id=__codelineno-228-30 name=__codelineno-228-30></a><span class=na>long.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-31 name=__codelineno-228-31></a><span class=hll><span class=na>long.nullable</span><span class=o>=</span><span class=s>false</span>
</span><a id=__codelineno-228-32 name=__codelineno-228-32></a><span class=hll><span class=na>map.keys.nullable</span><span class=o>=</span><span class=s>false</span>
</span><a id=__codelineno-228-33 name=__codelineno-228-33></a><span class=na>map.values.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-34 name=__codelineno-228-34></a><span class=na>map.max.size</span><span class=o>=</span><span class=s>6</span>
<a id=__codelineno-228-35 name=__codelineno-228-35></a><span class=na>map.min.size</span><span class=o>=</span><span class=s>2</span>
<a id=__codelineno-228-36 name=__codelineno-228-36></a><span class=na>map.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-37 name=__codelineno-228-37></a><span class=na>max.depth</span><span class=o>=</span><span class=s>8</span>
<a id=__codelineno-228-38 name=__codelineno-228-38></a><span class=hll><span class=na>max.generation.attempts</span><span class=o>=</span><span class=s>1000</span>
</span><a id=__codelineno-228-39 name=__codelineno-228-39></a><span class=na>mode</span><span class=o>=</span><span class=s>STRICT</span>
<a id=__codelineno-228-40 name=__codelineno-228-40></a><span class=na>hint.after.generate</span><span class=o>=</span><span class=s>POPULATE_NULLS_AND_DEFAULT_PRIMITIVES</span>
<a id=__codelineno-228-41 name=__codelineno-228-41></a><span class=na>overwrite.existing.values</span><span class=o>=</span><span class=s>true</span>
<a id=__codelineno-228-42 name=__codelineno-228-42></a><span class=na>assignment.type</span><span class=o>=</span><span class=s>FIELD</span>
<a id=__codelineno-228-43 name=__codelineno-228-43></a><span class=na>on.feed.property.unmatched</span><span class=o>=</span><span class=s>FAIL</span>
<a id=__codelineno-228-44 name=__codelineno-228-44></a><span class=na>on.set.field.error</span><span class=o>=</span><span class=s>IGNORE</span>
<a id=__codelineno-228-45 name=__codelineno-228-45></a><span class=na>on.set.method.error</span><span class=o>=</span><span class=s>ASSIGN_FIELD</span>
<a id=__codelineno-228-46 name=__codelineno-228-46></a><span class=na>on.set.method.not.found</span><span class=o>=</span><span class=s>ASSIGN_FIELD</span>
<a id=__codelineno-228-47 name=__codelineno-228-47></a><span class=na>on.set.method.unmatched</span><span class=o>=</span><span class=s>IGNORE</span>
<a id=__codelineno-228-48 name=__codelineno-228-48></a><span class=na>setter.style</span><span class=o>=</span><span class=s>SET</span>
<a id=__codelineno-228-49 name=__codelineno-228-49></a><span class=hll><span class=na>seed</span><span class=o>=</span><span class=s>12345</span>
</span><a id=__codelineno-228-50 name=__codelineno-228-50></a><span class=na>set.back.references</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-51 name=__codelineno-228-51></a><span class=na>short.max</span><span class=o>=</span><span class=s>10000</span>
<a id=__codelineno-228-52 name=__codelineno-228-52></a><span class=na>short.min</span><span class=o>=</span><span class=s>1</span>
<a id=__codelineno-228-53 name=__codelineno-228-53></a><span class=na>short.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-54 name=__codelineno-228-54></a><span class=na>string.allow.empty</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-55 name=__codelineno-228-55></a><span class=na>string.field.prefix.enabled</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-56 name=__codelineno-228-56></a><span class=na>string.max.length</span><span class=o>=</span><span class=s>10</span>
<a id=__codelineno-228-57 name=__codelineno-228-57></a><span class=na>string.min.length</span><span class=o>=</span><span class=s>3</span>
<a id=__codelineno-228-58 name=__codelineno-228-58></a><span class=na>string.nullable</span><span class=o>=</span><span class=s>false</span>
<a id=__codelineno-228-59 name=__codelineno-228-59></a><span class=na>string.case</span><span class=o>=</span><span class=s>UPPER</span>
<a id=__codelineno-228-60 name=__codelineno-228-60></a><span class=na>string.type</span><span class=o>=</span><span class=s>ALPHABETIC</span>
<a id=__codelineno-228-61 name=__codelineno-228-61></a><span class=hll><span class=na>subtype.java.util.Collection</span><span class=o>=</span><span class=s>java.util.ArrayList</span>
</span><a id=__codelineno-228-62 name=__codelineno-228-62></a><span class=na>subtype.java.util.List</span><span class=o>=</span><span class=s>java.util.ArrayList</span>
<a id=__codelineno-228-63 name=__codelineno-228-63></a><span class=na>subtype.java.util.Map</span><span class=o>=</span><span class=s>java.util.HashMap</span>
<a id=__codelineno-228-64 name=__codelineno-228-64></a><span class=na>subtype.java.util.SortedMap</span><span class=o>=</span><span class=s>java.util.TreeMap</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>1,11,31-32</lnum> The <code>*.elements.nullable</code>, <code>map.keys.nullable</code>, <code>map.values.nullable</code> specify whether Instancio can generate <code>null</code> values for array/collection elements and map keys and values.<br> <lnum>4</lnum> The other <code>*.nullable</code> properties specifies whether Instancio can generate <code>null</code> values for a given type.<br> <lnum>38</lnum> Specifies the mode, either <code>STRICT</code> (default) or <code>LENIENT</code>. See <a href=#selector-strictness>Selector Strictness</a>.<br> <lnum>49</lnum> Specifies a global seed value.<br> <lnum>61</lnum> Properties prefixed with <code>subtype</code> are used to specify default implementations for abstract types, or map types to subtypes in general. This is the same mechanism as <a href=#subtype-mapping>subtype mapping</a>, but configured via properties.</div><h2 id=settings-precedence>Settings Precedence<a title="Permanent link" class=headerlink href=#settings-precedence>¶</a></h2><p>Instancio layers settings on top of each other, each layer overriding the previous ones. This is done in the following order:<ol><li><code>Settings.defaults()</code><li>Settings from <code>instancio.properties</code><li>Settings injected using <code>@WithSettings</code> annotation when using <code>InstancioExtension</code> (see <a href=#settings-injection>Settings Injection</a>)<li>Settings supplied using the builder API's <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSettings(org.instancio.settings.Settings) target=_blank>withSettings(Settings)</a> method</ol><p>In the absence of any other configuration, Instancio uses defaults as returned by <code>Settings.defaults()</code>. If <code>instancio.properties</code> is found at the root of the classpath, it will override the defaults. Finally, settings can also be overridden at runtime using <code>@WithSettings</code> annotation or <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSettings(org.instancio.settings.Settings) target=_blank>withSettings(Settings)</a> method. The latter takes precedence over everything else.<h1 id=instancio-service-provider-interface>Instancio Service Provider Interface<a title="Permanent link" class=headerlink href=#instancio-service-provider-interface>¶</a></h1><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/spi/InstancioServiceProvider.html target=_blank>InstancioServiceProvider</a> interface allows customising how objects are created and populated. It defines the following methods, which return <code>null</code> by default and can be overridden as needed:<ul><li><code>GeneratorProvider getGeneratorProvider()</code><li><code>AnnotationProcessor getAnnotationProcessor()</code><li><code>SetterMethodResolver getSetterMethodResolver()</code><li><code>TypeResolver getTypeResolver()</code><li><code>TypeInstantiator getTypeInstantiator()</code></ul><p>An implementation of <code>InstancioServiceProvider</code> can be registered by creating a file named <code>org.instancio.spi.InstancioServiceProvider</code> under <code>/META-INF/services/</code>. The file should contain the fully-qualified name of the implementation class, for example:<div class=highlight><span class=filename>/META-INF/services/org.instancio.spi.InstancioServiceProvider</span><pre><span></span><code><a href=#__codelineno-229-1 id=__codelineno-229-1 name=__codelineno-229-1></a>org.example.InstancioServiceProviderImpl
</code></pre></div><h2 id=generatorprovider><code>GeneratorProvider</code><a title="Permanent link" class=headerlink href=#generatorprovider>¶</a></h2><p>This interface allows mapping a <code>Node</code> to a <code>GeneratorSpec</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-230-1 id=__codelineno-230-1 name=__codelineno-230-1></a><span class=kd>interface</span> <span class=nc>GeneratorProvider</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-230-2 id=__codelineno-230-2 name=__codelineno-230-2></a><span class=w>    </span><span class=n>GeneratorSpec</span><span class=o>&LT?></span><span class=w> </span><span class=n>getGenerator</span><span class=p>(</span><span class=n>Node</span><span class=w> </span><span class=n>node</span><span class=p>,</span><span class=w> </span><span class=n>Generators</span><span class=w> </span><span class=n>gen</span><span class=p>);</span>
<a href=#__codelineno-230-3 id=__codelineno-230-3 name=__codelineno-230-3></a><span class=p>}</span>
</code></pre></div><p>The <code>Generators</code> parameter provides access to built-in generators. This is the same class that is provided to the <code>generate()</code> method.<p>The <code>Node</code> object represents a class and/or field in the node hierarchy, for example:<ul><li><code>Person.dateOfBirth</code> node will have the target class <code>LocalDate</code> and the <code>java.lang.reflect.Field</code> <code>dateOfBirth</code><li>the collection element node of <code>List&LTPhone></code> will have the target class <code>Phone</code> and a <code>null</code> field</ul><h3 id=use-case>Use Case<a title="Permanent link" class=headerlink href=#use-case>¶</a></h3><p>The main use case for implementing the <code>GeneratorProvider</code> is to have generators resolved automatically. For example, the following implementation generates maximum string length based on the <code>length</code> attribute of the JPA <code>@Column</code> annotation.<div class="admonition info"><p class=admonition-title>More on JPA<p>From version <code>3.3.0</code> Instancio supports this functionality out-of-the-box. See the <a href=#jpa>JPA section</a> for more details.</div><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-231-1> 1</a></span>
<span class=normal><a href=#__codelineno-231-2> 2</a></span>
<span class=normal><a href=#__codelineno-231-3> 3</a></span>
<span class=normal><a href=#__codelineno-231-4> 4</a></span>
<span class=normal><a href=#__codelineno-231-5> 5</a></span>
<span class=normal><a href=#__codelineno-231-6> 6</a></span>
<span class=normal><a href=#__codelineno-231-7> 7</a></span>
<span class=normal><a href=#__codelineno-231-8> 8</a></span>
<span class=normal><a href=#__codelineno-231-9> 9</a></span>
<span class=normal><a href=#__codelineno-231-10>10</a></span>
<span class=normal><a href=#__codelineno-231-11>11</a></span>
<span class=normal><a href=#__codelineno-231-12>12</a></span>
<span class=normal><a href=#__codelineno-231-13>13</a></span>
<span class=normal><a href=#__codelineno-231-14>14</a></span>
<span class=normal><a href=#__codelineno-231-15>15</a></span>
<span class=normal><a href=#__codelineno-231-16>16</a></span>
<span class=normal><a href=#__codelineno-231-17>17</a></span>
<span class=normal><a href=#__codelineno-231-18>18</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-231-1 name=__codelineno-231-1></a><span class=kn>import</span><span class=w> </span><span class=nn>javax.persistence.Column</span><span class=p>;</span>
<a id=__codelineno-231-2 name=__codelineno-231-2></a>
<a id=__codelineno-231-3 name=__codelineno-231-3></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>GeneratorProviderImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>GeneratorProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-231-4 name=__codelineno-231-4></a>
<a id=__codelineno-231-5 name=__codelineno-231-5></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-231-6 name=__codelineno-231-6></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>GeneratorSpec</span><span class=o>&LT?></span><span class=w> </span><span class=n>getGenerator</span><span class=p>(</span><span class=kd>final</span><span class=w> </span><span class=n>Node</span><span class=w> </span><span class=n>node</span><span class=p>,</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Generators</span><span class=w> </span><span class=n>gen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-231-7 name=__codelineno-231-7></a><span class=w>        </span><span class=n>Field</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>node</span><span class=p>.</span><span class=na>getField</span><span class=p>();</span>
<a id=__codelineno-231-8 name=__codelineno-231-8></a><span class=w>        </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>targetClass</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>node</span><span class=p>.</span><span class=na>getTargetClass</span><span class=p>();</span>
<a id=__codelineno-231-9 name=__codelineno-231-9></a>
<a id=__codelineno-231-10 name=__codelineno-231-10></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>targetClass</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=w> </span><span class=o>&&</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-231-11 name=__codelineno-231-11></a><span class=w>            </span><span class=n>Column</span><span class=w> </span><span class=n>column</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=na>getDeclaredAnnotation</span><span class=p>(</span><span class=n>Column</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-231-12 name=__codelineno-231-12></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-231-13 name=__codelineno-231-13></a><span class=hll><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>string</span><span class=p>().</span><span class=na>maxLength</span><span class=p>(</span><span class=n>column</span><span class=p>.</span><span class=na>length</span><span class=p>());</span>
</span><a id=__codelineno-231-14 name=__codelineno-231-14></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-231-15 name=__codelineno-231-15></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-231-16 name=__codelineno-231-16></a><span class=hll><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span>
</span><a id=__codelineno-231-17 name=__codelineno-231-17></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-231-18 name=__codelineno-231-18></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>13</lnum> Set maximum string length based on the <code>length</code> attribute.<br> <lnum>16</lnum> Returning <code>null</code> means a value will be generated using built-in generators.<br></div><p>Assuming the following entity:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-232-1>1</a></span>
<span class=normal><a href=#__codelineno-232-2>2</a></span>
<span class=normal><a href=#__codelineno-232-3>3</a></span>
<span class=normal><a href=#__codelineno-232-4>4</a></span>
<span class=normal><a href=#__codelineno-232-5>5</a></span>
<span class=normal><a href=#__codelineno-232-6>6</a></span>
<span class=normal><a href=#__codelineno-232-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-232-1 name=__codelineno-232-1></a><span class=kd>class</span> <span class=nc>Phone</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-232-2 name=__codelineno-232-2></a><span class=w>    </span><span class=nd>@Column</span><span class=p>(</span><span class=n>length</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-232-3 name=__codelineno-232-3></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>countryCode</span><span class=p>;</span>
<a id=__codelineno-232-4 name=__codelineno-232-4></a>
<a id=__codelineno-232-5 name=__codelineno-232-5></a><span class=w>    </span><span class=nd>@Column</span><span class=p>(</span><span class=n>length</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>15</span><span class=p>)</span>
<a id=__codelineno-232-6 name=__codelineno-232-6></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>;</span>
<a id=__codelineno-232-7 name=__codelineno-232-7></a><span class=p>}</span>
</code></pre></div></table></div><p>Calling <code>Instancio.create()</code> should produce string lengths that conform to the schema:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-233-1>1</a></span>
<span class=normal><a href=#__codelineno-233-2>2</a></span>
<span class=normal><a href=#__codelineno-233-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-233-1 name=__codelineno-233-1></a><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-233-2 name=__codelineno-233-2></a><span class=n>assertThat</span><span class=p>(</span><span class=n>phone</span><span class=p>.</span><span class=na>getCountryCode</span><span class=p>()).</span><span class=na>hasSizeLessThanOrEqualTo</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-233-3 name=__codelineno-233-3></a><span class=n>assertThat</span><span class=p>(</span><span class=n>phone</span><span class=p>.</span><span class=na>getNumber</span><span class=p>()).</span><span class=na>hasSizeLessThanOrEqualTo</span><span class=p>(</span><span class=mi>15</span><span class=p>);</span>
</code></pre></div></table></div><p>Using the API methods <code>set()</code>, <code>supply()</code>, or <code>generate()</code> it is still possible to override values using the API if needed:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-234-1>1</a></span>
<span class=normal><a href=#__codelineno-234-2>2</a></span>
<span class=normal><a href=#__codelineno-234-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-234-1 name=__codelineno-234-1></a><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-234-2 name=__codelineno-234-2></a><span class=w>    </span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>field</span><span class=p>(</span><span class=n>Phone</span><span class=p>::</span><span class=n>getNumber</span><span class=p>),</span><span class=w> </span><span class=n>gen</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>gen</span><span class=p>.</span><span class=na>string</span><span class=p>().</span><span class=na>length</span><span class=p>(</span><span class=mi>20</span><span class=p>))</span>
<a id=__codelineno-234-3 name=__codelineno-234-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><h2 id=annotationprocessor><code>AnnotationProcessor</code><a title="Permanent link" class=headerlink href=#annotationprocessor>¶</a></h2><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 4.5.0</code></div><p>This interface allows processing custom annotations:<div class=highlight><pre><span></span><code><a href=#__codelineno-235-1 id=__codelineno-235-1 name=__codelineno-235-1></a><span class=kd>interface</span> <span class=nc>AnnotationProcessor</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-235-2 id=__codelineno-235-2 name=__codelineno-235-2></a><span class=w>    </span><span class=c1>// no methods to implement</span>
<a href=#__codelineno-235-3 id=__codelineno-235-3 name=__codelineno-235-3></a><span class=p>}</span>
</code></pre></div><p>It has no methods to implement. Instead, it relies on user-defined methods marked with the <code>@AnnotationHandler</code> annotation. The accepted signatures for <code>@AnnotationHandler</code> methods are:<div class=highlight><pre><span></span><code><a href=#__codelineno-236-1 id=__codelineno-236-1 name=__codelineno-236-1></a><span class=nd>@AnnotationHandler</span>
<a href=#__codelineno-236-2 id=__codelineno-236-2 name=__codelineno-236-2></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>Annotation</span><span class=w> </span><span class=n>annotation</span><span class=p>,</span><span class=w> </span><span class=n>GeneratorSpec</span><span class=o>&LT?></span><span class=w> </span><span class=n>spec</span><span class=p>,</span><span class=w> </span><span class=n>Node</span><span class=w> </span><span class=n>node</span><span class=p>)</span>
<a href=#__codelineno-236-3 id=__codelineno-236-3 name=__codelineno-236-3></a>
<a href=#__codelineno-236-4 id=__codelineno-236-4 name=__codelineno-236-4></a><span class=nd>@AnnotationHandler</span>
<a href=#__codelineno-236-5 id=__codelineno-236-5 name=__codelineno-236-5></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>Annotation</span><span class=w> </span><span class=n>annotation</span><span class=p>,</span><span class=w> </span><span class=n>GeneratorSpec</span><span class=o>&LT?></span><span class=w> </span><span class=n>spec</span><span class=p>)</span>
</code></pre></div><p>The <code>annotation</code> and <code>spec</code> parameters can be subtypes <code>java.lang.annotation.Annotation</code> and <code>org.instancio.generator.GeneratorSpec</code>, respectively. The <code>node</code> parameter is optional, and can be omitted if it's not needed.<h3 id=use-case_1>Use Case<a title="Permanent link" class=headerlink href=#use-case_1>¶</a></h3><p>The main use case for implementing the <code>AnnotationProcessor</code> is to customise generated values based on custom annotations. Let's assume we have the following annotations and a POJO:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-237-1> 1</a></span>
<span class=normal><a href=#__codelineno-237-2> 2</a></span>
<span class=normal><a href=#__codelineno-237-3> 3</a></span>
<span class=normal><a href=#__codelineno-237-4> 4</a></span>
<span class=normal><a href=#__codelineno-237-5> 5</a></span>
<span class=normal><a href=#__codelineno-237-6> 6</a></span>
<span class=normal><a href=#__codelineno-237-7> 7</a></span>
<span class=normal><a href=#__codelineno-237-8> 8</a></span>
<span class=normal><a href=#__codelineno-237-9> 9</a></span>
<span class=normal><a href=#__codelineno-237-10>10</a></span>
<span class=normal><a href=#__codelineno-237-11>11</a></span>
<span class=normal><a href=#__codelineno-237-12>12</a></span>
<span class=normal><a href=#__codelineno-237-13>13</a></span>
<span class=normal><a href=#__codelineno-237-14>14</a></span>
<span class=normal><a href=#__codelineno-237-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-237-1 name=__codelineno-237-1></a><span class=nd>@Target</span><span class=p>({</span><span class=n>ElementType</span><span class=p>.</span><span class=na>FIELD</span><span class=p>,</span><span class=w> </span><span class=n>ElementType</span><span class=p>.</span><span class=na>TYPE_USE</span><span class=p>})</span>
<a id=__codelineno-237-2 name=__codelineno-237-2></a><span class=nd>@Retention</span><span class=p>(</span><span class=n>RetentionPolicy</span><span class=p>.</span><span class=na>RUNTIME</span><span class=p>)</span>
<a id=__codelineno-237-3 name=__codelineno-237-3></a><span class=kd>public</span><span class=w> </span><span class=nd>@interface</span><span class=w> </span><span class=n>Hex</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-237-4 name=__codelineno-237-4></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>length</span><span class=p>();</span>
<a id=__codelineno-237-5 name=__codelineno-237-5></a><span class=p>}</span>
<a id=__codelineno-237-6 name=__codelineno-237-6></a>
<a id=__codelineno-237-7 name=__codelineno-237-7></a><span class=nd>@Retention</span><span class=p>(</span><span class=n>RetentionPolicy</span><span class=p>.</span><span class=na>RUNTIME</span><span class=p>)</span>
<a id=__codelineno-237-8 name=__codelineno-237-8></a><span class=kd>public</span><span class=w> </span><span class=nd>@interface</span><span class=w> </span><span class=n>MapWithKeys</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-237-9 name=__codelineno-237-9></a><span class=w>    </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=nf>value</span><span class=p>();</span>
<a id=__codelineno-237-10 name=__codelineno-237-10></a><span class=p>}</span>
<a id=__codelineno-237-11 name=__codelineno-237-11></a>
<a id=__codelineno-237-12 name=__codelineno-237-12></a><span class=kd>class</span> <span class=nc>Pojo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-237-13 name=__codelineno-237-13></a><span class=hll><span class=w>    </span><span class=nd>@MapWithKeys</span><span class=p>({</span><span class=s>"foo"</span><span class=p>,</span><span class=w> </span><span class=s>"bar"</span><span class=p>})</span>
</span><a id=__codelineno-237-14 name=__codelineno-237-14></a><span class=hll><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Map</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=nd>@Hex</span><span class=p>(</span><span class=n>length</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=o>></span><span class=w> </span><span class=n>map</span><span class=p>;</span>
</span><a id=__codelineno-237-15 name=__codelineno-237-15></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"></div><p><lnum>13</lnum> The <code>@MapWithKeys</code> annotation specifies that a given <code>Map</code> must contain given keys.<br> <lnum>14</lnum> the <code>@Hex</code> annotation denotes that a string must be a hexadecimal value of the specified <code>length()</code>.<br><p>Our <code>Pojo</code> declares a <code>Map</code> that should contain hexadecimal strings as values. The keys can be arbitrary strings, but the map should contain <code>foo</code> and <code>bar</code>. To achieve this, we can implement an <code>AnnotationProcessor</code> as shown below.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-238-1> 1</a></span>
<span class=normal><a href=#__codelineno-238-2> 2</a></span>
<span class=normal><a href=#__codelineno-238-3> 3</a></span>
<span class=normal><a href=#__codelineno-238-4> 4</a></span>
<span class=normal><a href=#__codelineno-238-5> 5</a></span>
<span class=normal><a href=#__codelineno-238-6> 6</a></span>
<span class=normal><a href=#__codelineno-238-7> 7</a></span>
<span class=normal><a href=#__codelineno-238-8> 8</a></span>
<span class=normal><a href=#__codelineno-238-9> 9</a></span>
<span class=normal><a href=#__codelineno-238-10>10</a></span>
<span class=normal><a href=#__codelineno-238-11>11</a></span>
<span class=normal><a href=#__codelineno-238-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-238-1 name=__codelineno-238-1></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AnnotationProcessorImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>AnnotationProcessor</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-238-2 name=__codelineno-238-2></a>
<a id=__codelineno-238-3 name=__codelineno-238-3></a><span class=hll><span class=w>    </span><span class=nd>@AnnotationHandler</span>
</span><a id=__codelineno-238-4 name=__codelineno-238-4></a><span class=hll><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>withKeys</span><span class=p>(</span><span class=n>MapWithKeys</span><span class=w> </span><span class=n>annotation</span><span class=p>,</span><span class=w> </span><span class=n>MapGeneratorSpec</span><span class=o><</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=o>?></span><span class=w> </span><span class=n>mapSpec</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><a id=__codelineno-238-5 name=__codelineno-238-5></a><span class=w>        </span><span class=n>mapSpec</span><span class=p>.</span><span class=na>withKeys</span><span class=p>(</span><span class=n>annotation</span><span class=p>.</span><span class=na>values</span><span class=p>());</span>
<a id=__codelineno-238-6 name=__codelineno-238-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-238-7 name=__codelineno-238-7></a>
<a id=__codelineno-238-8 name=__codelineno-238-8></a><span class=hll><span class=w>    </span><span class=nd>@AnnotationHandler</span>
</span><a id=__codelineno-238-9 name=__codelineno-238-9></a><span class=hll><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>hexString</span><span class=p>(</span><span class=n>Hex</span><span class=w> </span><span class=n>annotation</span><span class=p>,</span><span class=w> </span><span class=n>StringGeneratorSpec</span><span class=w> </span><span class=n>stringSpec</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><a id=__codelineno-238-10 name=__codelineno-238-10></a><span class=w>        </span><span class=n>stringSpec</span><span class=p>.</span><span class=na>hex</span><span class=p>().</span><span class=na>length</span><span class=p>(</span><span class=n>annotation</span><span class=p>.</span><span class=na>length</span><span class=p>());</span>
<a id=__codelineno-238-11 name=__codelineno-238-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-238-12 name=__codelineno-238-12></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"></div><p><lnum>3,8</lnum> methods must be annotated with <code>@AnnotationHandler</code>.<br> <lnum>4,9</lnum> the third parameter (<code>Node</code>) is omitted as it's not needed in this example.<br><p>Instancio will use methods marked with <code>@AnnotationHandler</code> to process the annotations. The first argument must be the annotation, and the second is the <code>GeneratorSpec</code> applicable to the annotated type (to find the specific spec interface, see the <code>org.instancio.generator.specs</code> package <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/specs/package-summary.html>Javadoc</a> or the <code>org.instancio.generators.Generators</code> class).<p>Once the above is in place, the following snippet:<div class=highlight><pre><span></span><code><a href=#__codelineno-239-1 id=__codelineno-239-1 name=__codelineno-239-1></a><span class=n>Pojo</span><span class=w> </span><span class=n>pojo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</code></pre></div><p>should produce output similar to:<div class=highlight><pre><span></span><code><a href=#__codelineno-240-1 id=__codelineno-240-1 name=__codelineno-240-1></a>Pojo[map={bar=2F5E92847B, NGJKQBQ=25F845DB67, foo=824D732CAA, ODDVXUPESM=2EDB5EB46A}]
</code></pre></div><p>It should be noted that the <code>AnnotationProcessor</code> can only be used to customise existing generators. To define a custom <code>Generator</code> for a given annotation, use a custom <a href=#generatorprovider><code>GeneratorProvider</code></a>.<h2 id=settermethodresolver><code>SetterMethodResolver</code><a title="Permanent link" class=headerlink href=#settermethodresolver>¶</a></h2><p>This interface is for providing custom resolution of setter methods from fields when <code>Keys.ASSIGNMENT_TYPE</code> is set to <code>AssignmentType.METHOD</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-241-1 id=__codelineno-241-1 name=__codelineno-241-1></a><span class=kd>interface</span> <span class=nc>SetterMethodResolver</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-241-2 id=__codelineno-241-2 name=__codelineno-241-2></a><span class=w>    </span><span class=n>Method</span><span class=w> </span><span class=nf>getSetter</span><span class=p>(</span><span class=n>Node</span><span class=w> </span><span class=n>node</span><span class=p>);</span>
<a href=#__codelineno-241-3 id=__codelineno-241-3 name=__codelineno-241-3></a><span class=p>}</span>
</code></pre></div><h3 id=use-case_2>Use Case<a title="Permanent link" class=headerlink href=#use-case_2>¶</a></h3><p>Out of the box, Instancio can resolve setter methods from fields assuming method names follow standard naming conventions (see <a href=#assignment-settings>Assignment Settings</a> for details). A custom <code>SetterMethodResolver</code> implementation allows tests to use <code>AssignmentType.METHOD</code> with applications that follow non-standard naming conventions.<p>Consider the following example, where the POJO has a field prefixed with an underscore. The goal is to populate the POJO via the setter method as it contains some logic:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-242-1> 1</a></span>
<span class=normal><a href=#__codelineno-242-2> 2</a></span>
<span class=normal><a href=#__codelineno-242-3> 3</a></span>
<span class=normal><a href=#__codelineno-242-4> 4</a></span>
<span class=normal><a href=#__codelineno-242-5> 5</a></span>
<span class=normal><a href=#__codelineno-242-6> 6</a></span>
<span class=normal><a href=#__codelineno-242-7> 7</a></span>
<span class=normal><a href=#__codelineno-242-8> 8</a></span>
<span class=normal><a href=#__codelineno-242-9> 9</a></span>
<span class=normal><a href=#__codelineno-242-10>10</a></span>
<span class=normal><a href=#__codelineno-242-11>11</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-242-1 name=__codelineno-242-1></a><span class=kd>class</span> <span class=nc>Pojo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-242-2 name=__codelineno-242-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-242-3 name=__codelineno-242-3></a>
<a id=__codelineno-242-4 name=__codelineno-242-4></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getValue</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-242-5 name=__codelineno-242-5></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-242-6 name=__codelineno-242-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-242-7 name=__codelineno-242-7></a>
<a id=__codelineno-242-8 name=__codelineno-242-8></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setValue</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-242-9 name=__codelineno-242-9></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>_value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>.</span><span class=na>length</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>":"</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>value</span><span class=p>;</span>
<a id=__codelineno-242-10 name=__codelineno-242-10></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-242-11 name=__codelineno-242-11></a><span class=p>}</span>
</code></pre></div></table></div><p>However, the field name <code>_value</code> does not map to method name <code>setValue()</code>. Therefore, the setter will not be resolved, and the value will be populated via field assignment as a fallback. A custom <code>SetterMethodResolver</code> can be implemented to handle this case as shown below.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Resolves setter method names for fields prefixed with an underscore</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-243-1> 1</a></span>
<span class=normal><a href=#__codelineno-243-2> 2</a></span>
<span class=normal><a href=#__codelineno-243-3> 3</a></span>
<span class=normal><a href=#__codelineno-243-4> 4</a></span>
<span class=normal><a href=#__codelineno-243-5> 5</a></span>
<span class=normal><a href=#__codelineno-243-6> 6</a></span>
<span class=normal><a href=#__codelineno-243-7> 7</a></span>
<span class=normal><a href=#__codelineno-243-8> 8</a></span>
<span class=normal><a href=#__codelineno-243-9> 9</a></span>
<span class=normal><a href=#__codelineno-243-10>10</a></span>
<span class=normal><a href=#__codelineno-243-11>11</a></span>
<span class=normal><a href=#__codelineno-243-12>12</a></span>
<span class=normal><a href=#__codelineno-243-13>13</a></span>
<span class=normal><a href=#__codelineno-243-14>14</a></span>
<span class=normal><a href=#__codelineno-243-15>15</a></span>
<span class=normal><a href=#__codelineno-243-16>16</a></span>
<span class=normal><a href=#__codelineno-243-17>17</a></span>
<span class=normal><a href=#__codelineno-243-18>18</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-243-1 name=__codelineno-243-1></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SetterMethodResolverImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>SetterMethodResolver</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-243-2 name=__codelineno-243-2></a>
<a id=__codelineno-243-3 name=__codelineno-243-3></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-243-4 name=__codelineno-243-4></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Method</span><span class=w> </span><span class=nf>getSetter</span><span class=p>(</span><span class=n>Node</span><span class=w> </span><span class=n>node</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-243-5 name=__codelineno-243-5></a><span class=w>        </span><span class=n>Field</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>node</span><span class=p>.</span><span class=na>getField</span><span class=p>();</span>
<a id=__codelineno-243-6 name=__codelineno-243-6></a>
<a id=__codelineno-243-7 name=__codelineno-243-7></a><span class=w>        </span><span class=c1>// discard the '_' prefix</span>
<a id=__codelineno-243-8 name=__codelineno-243-8></a><span class=w>        </span><span class=kt>char</span><span class=o>[]</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>field</span><span class=p>.</span><span class=na>getName</span><span class=p>().</span><span class=na>substring</span><span class=p>(</span><span class=mi>1</span><span class=p>).</span><span class=na>toCharArray</span><span class=p>();</span>
<a id=__codelineno-243-9 name=__codelineno-243-9></a><span class=w>        </span><span class=n>ch</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Character</span><span class=p>.</span><span class=na>toUpperCase</span><span class=p>(</span><span class=n>ch</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>);</span>
<a id=__codelineno-243-10 name=__codelineno-243-10></a>
<a id=__codelineno-243-11 name=__codelineno-243-11></a><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>methodName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"set"</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>String</span><span class=p>(</span><span class=n>ch</span><span class=p>);</span>
<a id=__codelineno-243-12 name=__codelineno-243-12></a>
<a id=__codelineno-243-13 name=__codelineno-243-13></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>stream</span><span class=p>(</span><span class=n>field</span><span class=p>.</span><span class=na>getDeclaringClass</span><span class=p>().</span><span class=na>getDeclaredMethods</span><span class=p>())</span>
<a id=__codelineno-243-14 name=__codelineno-243-14></a><span class=hll><span class=w>                </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>m</span><span class=w> </span><span class=o>-></span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=na>getName</span><span class=p>().</span><span class=na>equals</span><span class=p>(</span><span class=n>methodName</span><span class=p>))</span>
</span><a id=__codelineno-243-15 name=__codelineno-243-15></a><span class=w>                </span><span class=p>.</span><span class=na>findFirst</span><span class=p>()</span>
<a id=__codelineno-243-16 name=__codelineno-243-16></a><span class=hll><span class=w>                </span><span class=p>.</span><span class=na>orElse</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span><a id=__codelineno-243-17 name=__codelineno-243-17></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-243-18 name=__codelineno-243-18></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>14</lnum> For brevity, matching is done by name only, ignoring parameter types.<br> <lnum>16</lnum> Returning <code>null</code> means built-in method resolvers will be used as a fallback.<br></div><p>With the above in place, the <code>Pojo</code> can be created as follows:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-244-1>1</a></span>
<span class=normal><a href=#__codelineno-244-2>2</a></span>
<span class=normal><a href=#__codelineno-244-3>3</a></span>
<span class=normal><a href=#__codelineno-244-4>4</a></span>
<span class=normal><a href=#__codelineno-244-5>5</a></span>
<span class=normal><a href=#__codelineno-244-6>6</a></span>
<span class=normal><a href=#__codelineno-244-7>7</a></span>
<span class=normal><a href=#__codelineno-244-8>8</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-244-1 name=__codelineno-244-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-244-2 name=__codelineno-244-2></a><span class=w>    </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>ASSIGNMENT_TYPE</span><span class=p>,</span><span class=w> </span><span class=n>AssignmentType</span><span class=p>.</span><span class=na>METHOD</span><span class=p>);</span>
<a id=__codelineno-244-3 name=__codelineno-244-3></a>
<a id=__codelineno-244-4 name=__codelineno-244-4></a><span class=n>Pojo</span><span class=w> </span><span class=n>pojo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-244-5 name=__codelineno-244-5></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-244-6 name=__codelineno-244-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-244-7 name=__codelineno-244-7></a>
<a id=__codelineno-244-8 name=__codelineno-244-8></a><span class=c1>// Sample output: Pojo[_value="5:EVHKT"]</span>
</code></pre></div></table></div><h2 id=typeresolver><code>TypeResolver</code><a title="Permanent link" class=headerlink href=#typeresolver>¶</a></h2><p>This interface allows mapping a type to a subtype:<div class=highlight><pre><span></span><code><a href=#__codelineno-245-1 id=__codelineno-245-1 name=__codelineno-245-1></a><span class=kd>interface</span> <span class=nc>TypeResolver</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-245-2 id=__codelineno-245-2 name=__codelineno-245-2></a><span class=w>    </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>getSubtype</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>type</span><span class=p>);</span>
<a href=#__codelineno-245-3 id=__codelineno-245-3 name=__codelineno-245-3></a><span class=p>}</span>
</code></pre></div><p>The subtype mapping uses the same mechanism as the <code>subtype()</code> API method.<h3 id=use-case_3>Use Case<a title="Permanent link" class=headerlink href=#use-case_3>¶</a></h3><p>The primary use case for implementing the <code>TypeResolver</code> is to resolve subtypes automatically. By default, Instancio does not resolve the implementation class if given an abstract type. Instead, the implementation class must be specified manually. This can be done either via the <code>subtype()</code> method:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-246-1>1</a></span>
<span class=normal><a href=#__codelineno-246-2>2</a></span>
<span class=normal><a href=#__codelineno-246-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-246-1 name=__codelineno-246-1></a><span class=n>Animal</span><span class=w> </span><span class=n>animal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-246-2 name=__codelineno-246-2></a><span class=w>    </span><span class=p>.</span><span class=na>subtype</span><span class=p>(</span><span class=n>all</span><span class=p>(</span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>),</span><span class=w> </span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-246-3 name=__codelineno-246-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>or via <code>Settings</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-247-1>1</a></span>
<span class=normal><a href=#__codelineno-247-2>2</a></span>
<span class=normal><a href=#__codelineno-247-3>3</a></span>
<span class=normal><a href=#__codelineno-247-4>4</a></span>
<span class=normal><a href=#__codelineno-247-5>5</a></span>
<span class=normal><a href=#__codelineno-247-6>6</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-247-1 name=__codelineno-247-1></a><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-247-2 name=__codelineno-247-2></a><span class=w>    </span><span class=p>.</span><span class=na>mapType</span><span class=p>(</span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-247-3 name=__codelineno-247-3></a>
<a id=__codelineno-247-4 name=__codelineno-247-4></a><span class=n>Animal</span><span class=w> </span><span class=n>animal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-247-5 name=__codelineno-247-5></a><span class=w>    </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-247-6 name=__codelineno-247-6></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Using <code>TypeResolver</code>, the subtype can be resolved automatically:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-248-1> 1</a></span>
<span class=normal><a href=#__codelineno-248-2> 2</a></span>
<span class=normal><a href=#__codelineno-248-3> 3</a></span>
<span class=normal><a href=#__codelineno-248-4> 4</a></span>
<span class=normal><a href=#__codelineno-248-5> 5</a></span>
<span class=normal><a href=#__codelineno-248-6> 6</a></span>
<span class=normal><a href=#__codelineno-248-7> 7</a></span>
<span class=normal><a href=#__codelineno-248-8> 8</a></span>
<span class=normal><a href=#__codelineno-248-9> 9</a></span>
<span class=normal><a href=#__codelineno-248-10>10</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-248-1 name=__codelineno-248-1></a><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TypeResolverImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>TypeResolver</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-248-2 name=__codelineno-248-2></a>
<a id=__codelineno-248-3 name=__codelineno-248-3></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-248-4 name=__codelineno-248-4></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>getSubtype</span><span class=p>(</span><span class=kd>final</span><span class=w> </span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-248-5 name=__codelineno-248-5></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>type</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-248-6 name=__codelineno-248-6></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>;</span>
<a id=__codelineno-248-7 name=__codelineno-248-7></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-248-8 name=__codelineno-248-8></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span>
<a id=__codelineno-248-9 name=__codelineno-248-9></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-248-10 name=__codelineno-248-10></a><span class=p>}</span>
</code></pre></div></table></div><p>Then calling <code>Instancio.create()</code> should use the specified subtype:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-249-1>1</a></span>
<span class=normal><a href=#__codelineno-249-2>2</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-249-1 name=__codelineno-249-1></a><span class=n>Animal</span><span class=w> </span><span class=n>animal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Animal</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-249-2 name=__codelineno-249-2></a><span class=n>assertThat</span><span class=p>(</span><span class=n>animal</span><span class=p>).</span><span class=na>isExactlyInstanceOf</span><span class=p>(</span><span class=n>Cat</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</code></pre></div></table></div><div class="admonition info"><p class=admonition-title>Scanning the Classpath<p>Using <code>TypeResolver</code> it is also possible to resolve implementation classes via classpath scanning, for example, using a third-party library. For a sample implementation, see <a href=https://github.com/instancio/instancio-samples><code>type-resolver-sample</code></a>.</div><h2 id=typeinstantiator><code>TypeInstantiator</code><a title="Permanent link" class=headerlink href=#typeinstantiator>¶</a></h2><p>This interface is for providing custom instantiation logic for classes that Instancio is unable to instantiate out-of-the-box:<div class=highlight><pre><span></span><code><a href=#__codelineno-250-1 id=__codelineno-250-1 name=__codelineno-250-1></a><span class=kd>interface</span> <span class=nc>TypeInstantiator</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-250-2 id=__codelineno-250-2 name=__codelineno-250-2></a><span class=w>    </span><span class=n>Object</span><span class=w> </span><span class=nf>instantiate</span><span class=p>(</span><span class=n>Class</span><span class=o>&LT?></span><span class=w> </span><span class=n>type</span><span class=p>);</span>
<a href=#__codelineno-250-3 id=__codelineno-250-3 name=__codelineno-250-3></a><span class=p>}</span>
</code></pre></div><p>By default, Instancio attempts to instantiate a class using the default constructor. If the default constructor is unavailable or fails (for example, the constructor throws an exception), Instancio will attempt to use a constructor with the least number of parameters and pass in default values. If the last option also fails, then it resorts to JDK-specific approaches, such as using <code>sun.misc.Unsafe</code>. There may be situations where all the listed options fail, which would result in <code>null</code> values being generated. Using <code>TypeInstantiator</code> allows plugging in custom instantiation logic.<h1 id=troubleshooting>Troubleshooting<a title="Permanent link" class=headerlink href=#troubleshooting>¶</a></h1><h2 id=debugging>Debugging<a title="Permanent link" class=headerlink href=#debugging>¶</a></h2><p>Instancio uses <a href=https://www.slf4j.org>SLF4J</a> for logging. Most of the messages are logged at <code>DEBUG</code> or <code>TRACE</code> level. Logging information can be useful when Instancio produces an error or does not generate expected values.<p>In addition to logging, the builder API provides the <code>verbose()</code> method that outputs current settings as well as the internal model containing the node hierarchy to standard output. For example:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-251-1>1</a></span>
<span class=normal><a href=#__codelineno-251-2>2</a></span>
<span class=normal><a href=#__codelineno-251-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-251-1 name=__codelineno-251-1></a><span class=n>List</span><span class=o><</span><span class=n>Phone</span><span class=o>></span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofList</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-251-2 name=__codelineno-251-2></a><span class=hll><span class=w>    </span><span class=p>.</span><span class=na>verbose</span><span class=p>()</span>
</span><a id=__codelineno-251-3 name=__codelineno-251-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>will produce (ignoring settings output for brevity):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-252-1> 1</a></span>
<span class=normal><a href=#__codelineno-252-2> 2</a></span>
<span class=normal><a href=#__codelineno-252-3> 3</a></span>
<span class=normal><a href=#__codelineno-252-4> 4</a></span>
<span class=normal><a href=#__codelineno-252-5> 5</a></span>
<span class=normal><a href=#__codelineno-252-6> 6</a></span>
<span class=normal><a href=#__codelineno-252-7> 7</a></span>
<span class=normal><a href=#__codelineno-252-8> 8</a></span>
<span class=normal><a href=#__codelineno-252-9> 9</a></span>
<span class=normal><a href=#__codelineno-252-10>10</a></span>
<span class=normal><a href=#__codelineno-252-11>11</a></span>
<span class=normal><a href=#__codelineno-252-12>12</a></span>
<span class=normal><a href=#__codelineno-252-13>13</a></span>
<span class=normal><a href=#__codelineno-252-14>14</a></span>
<span class=normal><a href=#__codelineno-252-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-252-1 name=__codelineno-252-1></a>// snip...
<a id=__codelineno-252-2 name=__codelineno-252-2></a>
<a id=__codelineno-252-3 name=__codelineno-252-3></a>### Node hierarchy
<a id=__codelineno-252-4 name=__codelineno-252-4></a>
<a id=__codelineno-252-5 name=__codelineno-252-5></a>Format: &LTdepth:class: field>
<a id=__codelineno-252-6 name=__codelineno-252-6></a>
<a id=__codelineno-252-7 name=__codelineno-252-7></a>&LT0:List>
<a id=__codelineno-252-8 name=__codelineno-252-8></a> └──&LT1:Phone>
<a id=__codelineno-252-9 name=__codelineno-252-9></a>     ├──&LT2:Phone: String countryCode>
<a id=__codelineno-252-10 name=__codelineno-252-10></a>     └──&LT2:Phone: String number>
<a id=__codelineno-252-11 name=__codelineno-252-11></a>
<a id=__codelineno-252-12 name=__codelineno-252-12></a> -> Node max depth ........: 2
<a id=__codelineno-252-13 name=__codelineno-252-13></a> -> Model max depth .......: 8
<a id=__codelineno-252-14 name=__codelineno-252-14></a> -> Total nodes ...........: 4
<a id=__codelineno-252-15 name=__codelineno-252-15></a> -> Seed ..................: 2699444350509138652
</code></pre></div></table></div><div class="admonition attention"><p><lnum>12</lnum> maximum depth of the object.<br> <lnum>13</lnum> configured maximum depth up to which values will be generated.<br> <lnum>14</lnum> total number of nodes the root type contains.<br> <lnum>15</lnum> seed that was used to populate the data.<br></div><p>The <code>verbose()</code> method can be particularly useful when working with deep, complex class hierarchies that contain many fields, collections, and cyclic relationships. For example, some APIs such as <code>assign()</code> and <code>emit()</code> require that a given selector matches exactly one target. The node hierarchy can be used to troubleshoot cases where the selector happens to match more than one target. The visual representation makes it easier to fine-tune the selector by specifying selector <a href=#selector-scopes>scope</a> or <a href=#selector-depth>depth</a>.<h2 id=error-handling>Error Handling<a title="Permanent link" class=headerlink href=#error-handling>¶</a></h2><p>The default behaviour of Instancio is to fully populate an object, up to a certain depth. In case of internal errors, Instancio will still attempt to return an object, though some fields or collections may not be fully populated.<p>Consider the following somewhat contrived example:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>An impossible Set</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-253-1>1</a></span>
<span class=normal><a href=#__codelineno-253-2>2</a></span>
<span class=normal><a href=#__codelineno-253-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-253-1 name=__codelineno-253-1></a><span class=n>Set</span><span class=o><</span><span class=n>Boolean</span><span class=o>></span><span class=w> </span><span class=n>set</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>ofSet</span><span class=p>(</span><span class=n>Boolean</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-253-2 name=__codelineno-253-2></a><span class=w>    </span><span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-253-3 name=__codelineno-253-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
</code></pre></div></table></div><p>Since it is not possible to create a <code>Set</code> of 10 booleans, Instancio will generate a set of size 2, containing values <code>true</code> and <code>false</code>. However, internally, this use case will produce an exception that is suppressed by default. At <code>DEBUG</code> log level, Instancio will report the following:<div class=highlight><pre><span></span><code><a href=#__codelineno-254-1 id=__codelineno-254-1 name=__codelineno-254-1></a>Suppressed error because Keys.FAIL_ON_ERROR (fail.on.error) is disabled.
<a href=#__codelineno-254-2 id=__codelineno-254-2 name=__codelineno-254-2></a>-> To propagate the error, set Keys.FAIL_ON_ERROR setting to true.
<a href=#__codelineno-254-3 id=__codelineno-254-3 name=__codelineno-254-3></a>-> To display the stack trace, run in verbose() mode or with TRACE logging.
<a href=#__codelineno-254-4 id=__codelineno-254-4 name=__codelineno-254-4></a>
<a href=#__codelineno-254-5 id=__codelineno-254-5 name=__codelineno-254-5></a>org.instancio.exception.InstancioException: Internal error occurred creating an object.
<a href=#__codelineno-254-6 id=__codelineno-254-6 name=__codelineno-254-6></a>
<a href=#__codelineno-254-7 id=__codelineno-254-7 name=__codelineno-254-7></a>Internal errors are suppressed by default and
<a href=#__codelineno-254-8 id=__codelineno-254-8 name=__codelineno-254-8></a>can be ignored if not applicable to the current test
<a href=#__codelineno-254-9 id=__codelineno-254-9 name=__codelineno-254-9></a> -> at com.example.ExampleTest(ExampleTest.java:123)
<a href=#__codelineno-254-10 id=__codelineno-254-10 name=__codelineno-254-10></a>
<a href=#__codelineno-254-11 id=__codelineno-254-11 name=__codelineno-254-11></a>Reason: unable to populate Collection of size 10: class Set&LTBoolean> (depth=0)
</code></pre></div><p>As the message suggests, the <code>Keys.FAIL_ON_ERROR</code> setting can be enabled to propagate internal errors. This can be done via the <code>Settings</code> API or configuration file:<div class=highlight><span class=filename>instancio.properties</span><pre><span></span><code><a href=#__codelineno-255-1 id=__codelineno-255-1 name=__codelineno-255-1></a><span class=na>fail.on.error</span><span class=o>=</span><span class=s>true</span>
</code></pre></div><h1 id=seed>Seed<a title="Permanent link" class=headerlink href=#seed>¶</a></h1><p>Before creating an object, Instancio initialises a random seed value. This seed value is used internally by the pseudorandom number generator, that is, <code>java.util.Random</code>. Instancio ensures that the same instance of the random number generator is used throughout object creation, from start to finish. This means that Instancio can reproduce the same object again by using the same seed. This feature allows reproducing failed tests (see the section on <a href=#reproducing-failed-tests>reproducing tests with JUnit</a>).<p>In addition, Instancio handles classes like <code>UUID</code> and <code>LocalDateTime</code>, where a minor difference in values can cause an object equality check to fail. These classes are generated in such a way, that for a given seed value, the generated values will be the same. To illustrate with an example, we will use the following <code>SamplePojo</code> class.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Sample POJO</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-256-1> 1</a></span>
<span class=normal><a href=#__codelineno-256-2> 2</a></span>
<span class=normal><a href=#__codelineno-256-3> 3</a></span>
<span class=normal><a href=#__codelineno-256-4> 4</a></span>
<span class=normal><a href=#__codelineno-256-5> 5</a></span>
<span class=normal><a href=#__codelineno-256-6> 6</a></span>
<span class=normal><a href=#__codelineno-256-7> 7</a></span>
<span class=normal><a href=#__codelineno-256-8> 8</a></span>
<span class=normal><a href=#__codelineno-256-9> 9</a></span>
<span class=normal><a href=#__codelineno-256-10>10</a></span>
<span class=normal><a href=#__codelineno-256-11>11</a></span>
<span class=normal><a href=#__codelineno-256-12>12</a></span>
<span class=normal><a href=#__codelineno-256-13>13</a></span>
<span class=normal><a href=#__codelineno-256-14>14</a></span>
<span class=normal><a href=#__codelineno-256-15>15</a></span>
<span class=normal><a href=#__codelineno-256-16>16</a></span>
<span class=normal><a href=#__codelineno-256-17>17</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-256-1 name=__codelineno-256-1></a><span class=kd>class</span> <span class=nc>SamplePojo</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-256-2 name=__codelineno-256-2></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UUID</span><span class=w> </span><span class=n>uuid</span><span class=p>;</span>
<a id=__codelineno-256-3 name=__codelineno-256-3></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>localDateTime</span><span class=p>;</span>
<a id=__codelineno-256-4 name=__codelineno-256-4></a>
<a id=__codelineno-256-5 name=__codelineno-256-5></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-256-6 name=__codelineno-256-6></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>equals</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-256-7 name=__codelineno-256-7></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
<a id=__codelineno-256-8 name=__codelineno-256-8></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>o</span><span class=w> </span><span class=k>instanceof</span><span class=w> </span><span class=n>SamplePojo</span><span class=p>))</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span>
<a id=__codelineno-256-9 name=__codelineno-256-9></a><span class=w>        </span><span class=n>SamplePojo</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>SamplePojo</span><span class=p>)</span><span class=w> </span><span class=n>o</span><span class=p>;</span>
<a id=__codelineno-256-10 name=__codelineno-256-10></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>uuid</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>uuid</span><span class=p>)</span><span class=w> </span><span class=o>&&</span><span class=w> </span><span class=n>localDateTime</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=na>localDateTime</span><span class=p>);</span>
<a id=__codelineno-256-11 name=__codelineno-256-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-256-12 name=__codelineno-256-12></a>
<a id=__codelineno-256-13 name=__codelineno-256-13></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-256-14 name=__codelineno-256-14></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>hashCode</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-256-15 name=__codelineno-256-15></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Objects</span><span class=p>.</span><span class=na>hash</span><span class=p>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>localDateTime</span><span class=p>);</span>
<a id=__codelineno-256-16 name=__codelineno-256-16></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-256-17 name=__codelineno-256-17></a><span class=p>}</span>
</code></pre></div></table></div><p>By supplying the same seed value, the same object is generated:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Generating two SamplePojo instances with the same seed</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-257-1> 1</a></span>
<span class=normal><a href=#__codelineno-257-2> 2</a></span>
<span class=normal><a href=#__codelineno-257-3> 3</a></span>
<span class=normal><a href=#__codelineno-257-4> 4</a></span>
<span class=normal><a href=#__codelineno-257-5> 5</a></span>
<span class=normal><a href=#__codelineno-257-6> 6</a></span>
<span class=normal><a href=#__codelineno-257-7> 7</a></span>
<span class=normal><a href=#__codelineno-257-8> 8</a></span>
<span class=normal><a href=#__codelineno-257-9> 9</a></span>
<span class=normal><a href=#__codelineno-257-10>10</a></span>
<span class=normal><a href=#__codelineno-257-11>11</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-257-1 name=__codelineno-257-1></a><span class=kd>final</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>seed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>123</span><span class=p>;</span>
<a id=__codelineno-257-2 name=__codelineno-257-2></a>
<a id=__codelineno-257-3 name=__codelineno-257-3></a><span class=n>SamplePojo</span><span class=w> </span><span class=n>pojo1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>SamplePojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-257-4 name=__codelineno-257-4></a><span class=w>    </span><span class=p>.</span><span class=na>withSeed</span><span class=p>(</span><span class=n>seed</span><span class=p>)</span>
<a id=__codelineno-257-5 name=__codelineno-257-5></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-257-6 name=__codelineno-257-6></a>
<a id=__codelineno-257-7 name=__codelineno-257-7></a><span class=n>SamplePojo</span><span class=w> </span><span class=n>pojo2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>SamplePojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-257-8 name=__codelineno-257-8></a><span class=w>    </span><span class=p>.</span><span class=na>withSeed</span><span class=p>(</span><span class=n>seed</span><span class=p>)</span>
<a id=__codelineno-257-9 name=__codelineno-257-9></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-257-10 name=__codelineno-257-10></a>
<a id=__codelineno-257-11 name=__codelineno-257-11></a><span class=n>assertThat</span><span class=p>(</span><span class=n>pojo1</span><span class=p>).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=n>pojo2</span><span class=p>);</span>
</code></pre></div></table></div><p>If the objects are printed, both produce the same output:<div class=highlight><pre><span></span><code><a href=#__codelineno-258-1 id=__codelineno-258-1 name=__codelineno-258-1></a>SamplePojo(
<a href=#__codelineno-258-2 id=__codelineno-258-2 name=__codelineno-258-2></a>  uuid=3bf992ad-1121-36a2-826d-94112bf1d82b,
<a href=#__codelineno-258-3 id=__codelineno-258-3 name=__codelineno-258-3></a>  localDateTime=2069-10-15T10:28:31.940
<a href=#__codelineno-258-4 id=__codelineno-258-4 name=__codelineno-258-4></a>)
</code></pre></div><div class="admonition warning"><p class=admonition-title>While the generated values are the same, it is not recommended to write assertions using hard-coded values.</div><h2 id=specifying-seed-value>Specifying Seed Value<a title="Permanent link" class=headerlink href=#specifying-seed-value>¶</a></h2><p>By default, if no custom seed is specified, Instancio generates a random seed value. Therefore, each execution results in different outputs. This behaviour can be overridden by specifying a custom seed using any of the options below. These are ranked from highest to lowest precedence:<ol><li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSeed(long) target=_blank>withSeed(long)</a> method of the builder API<li><a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSettings(org.instancio.settings.Settings) target=_blank>withSettings(Settings)</a> or <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSetting(org.instancio.settings.SettingKey,V) target=_blank>withSetting(SettingKey&LTT>, T)</a> method of the builder API using <code>Keys.SEED</code><li><code>@WithSettings</code> annotations (requires <a href=#junit-jupiter-integration><code>InstancioExtension</code></a>)<li><code>@Seed</code> annotation (requires <a href=#junit-jupiter-integration><code>InstancioExtension</code></a>)<li><code>instancio.properties</code> file (see <a href=#global-seed>Global Seed</a> for details)<li>random seed</ol><p>Precedence rules are summarised in the following table, where each number represents a seed value, and <code>R</code> represents a random seed.<table><thead><tr><th style=text-align:center>Random<br>seed<th style=text-align:center><code>.properties</code><th style=text-align:center><code>@Seed</code><th style=text-align:center><code>@WithSettings</code><th style=text-align:center><code>.withSettings()</code><th style=text-align:center><code>.withSeed()</code><th style=text-align:center>Actual<br>seed<tbody><tr><td style=text-align:center>R<td style=text-align:center>5<td style=text-align:center>4<td style=text-align:center>3<td style=text-align:center>2<td style=text-align:center><strong>1</strong><td style=text-align:center><strong>1</strong><tr><td style=text-align:center>R<td style=text-align:center>5<td style=text-align:center>4<td style=text-align:center>3<td style=text-align:center><strong>2</strong><td style=text-align:center>-<td style=text-align:center><strong>2</strong><tr><td style=text-align:center>R<td style=text-align:center>5<td style=text-align:center>4<td style=text-align:center><strong>3</strong><td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center><strong>3</strong><tr><td style=text-align:center>R<td style=text-align:center>5<td style=text-align:center><strong>4</strong><td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center><strong>4</strong><tr><td style=text-align:center>R<td style=text-align:center><strong>5</strong><td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center><strong>5</strong><tr><td style=text-align:center><strong>R</strong><td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center>-<td style=text-align:center><strong>R</strong></table><h3 id=withsettings-seed><code>@WithSettings</code> seed<a title="Permanent link" class=headerlink href=#withsettings-seed>¶</a></h3><p>When a seed is specified via <code>@WithSettings</code>, all objects generated within the test class are created using the given seed. For this reason, if two objects of the same type are created, both instances will be identical, for example:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-259-1> 1</a></span>
<span class=normal><a href=#__codelineno-259-2> 2</a></span>
<span class=normal><a href=#__codelineno-259-3> 3</a></span>
<span class=normal><a href=#__codelineno-259-4> 4</a></span>
<span class=normal><a href=#__codelineno-259-5> 5</a></span>
<span class=normal><a href=#__codelineno-259-6> 6</a></span>
<span class=normal><a href=#__codelineno-259-7> 7</a></span>
<span class=normal><a href=#__codelineno-259-8> 8</a></span>
<span class=normal><a href=#__codelineno-259-9> 9</a></span>
<span class=normal><a href=#__codelineno-259-10>10</a></span>
<span class=normal><a href=#__codelineno-259-11>11</a></span>
<span class=normal><a href=#__codelineno-259-12>12</a></span>
<span class=normal><a href=#__codelineno-259-13>13</a></span>
<span class=normal><a href=#__codelineno-259-14>14</a></span>
<span class=normal><a href=#__codelineno-259-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-259-1 name=__codelineno-259-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-259-2 name=__codelineno-259-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-259-3 name=__codelineno-259-3></a>
<a id=__codelineno-259-4 name=__codelineno-259-4></a><span class=w>    </span><span class=nd>@WithSettings</span>
<a id=__codelineno-259-5 name=__codelineno-259-5></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-259-6 name=__codelineno-259-6></a><span class=w>            </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SEED</span><span class=p>,</span><span class=w> </span><span class=mi>12345L</span><span class=p>);</span>
<a id=__codelineno-259-7 name=__codelineno-259-7></a>
<a id=__codelineno-259-8 name=__codelineno-259-8></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-259-9 name=__codelineno-259-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-259-10 name=__codelineno-259-10></a><span class=w>        </span><span class=n>Pojo</span><span class=w> </span><span class=n>pojo1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-259-11 name=__codelineno-259-11></a><span class=w>        </span><span class=n>Pojo</span><span class=w> </span><span class=n>pojo2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-259-12 name=__codelineno-259-12></a>
<a id=__codelineno-259-13 name=__codelineno-259-13></a><span class=w>        </span><span class=n>assertThat</span><span class=p>(</span><span class=n>pojo1</span><span class=p>).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=n>pojo2</span><span class=p>);</span>
<a id=__codelineno-259-14 name=__codelineno-259-14></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-259-15 name=__codelineno-259-15></a><span class=p>}</span>
</code></pre></div></table></div><p>This is because the above snippet is equivalent to:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-260-1> 1</a></span>
<span class=normal><a href=#__codelineno-260-2> 2</a></span>
<span class=normal><a href=#__codelineno-260-3> 3</a></span>
<span class=normal><a href=#__codelineno-260-4> 4</a></span>
<span class=normal><a href=#__codelineno-260-5> 5</a></span>
<span class=normal><a href=#__codelineno-260-6> 6</a></span>
<span class=normal><a href=#__codelineno-260-7> 7</a></span>
<span class=normal><a href=#__codelineno-260-8> 8</a></span>
<span class=normal><a href=#__codelineno-260-9> 9</a></span>
<span class=normal><a href=#__codelineno-260-10>10</a></span>
<span class=normal><a href=#__codelineno-260-11>11</a></span>
<span class=normal><a href=#__codelineno-260-12>12</a></span>
<span class=normal><a href=#__codelineno-260-13>13</a></span>
<span class=normal><a href=#__codelineno-260-14>14</a></span>
<span class=normal><a href=#__codelineno-260-15>15</a></span>
<span class=normal><a href=#__codelineno-260-16>16</a></span>
<span class=normal><a href=#__codelineno-260-17>17</a></span>
<span class=normal><a href=#__codelineno-260-18>18</a></span>
<span class=normal><a href=#__codelineno-260-19>19</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-260-1 name=__codelineno-260-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-260-2 name=__codelineno-260-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-260-3 name=__codelineno-260-3></a>
<a id=__codelineno-260-4 name=__codelineno-260-4></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-260-5 name=__codelineno-260-5></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-260-6 name=__codelineno-260-6></a><span class=w>        </span><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-260-7 name=__codelineno-260-7></a><span class=w>                </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>SEED</span><span class=p>,</span><span class=w> </span><span class=mi>12345L</span><span class=p>);</span>
<a id=__codelineno-260-8 name=__codelineno-260-8></a>
<a id=__codelineno-260-9 name=__codelineno-260-9></a><span class=w>        </span><span class=n>Pojo</span><span class=w> </span><span class=n>pojo1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-260-10 name=__codelineno-260-10></a><span class=w>                </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-260-11 name=__codelineno-260-11></a><span class=w>                </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-260-12 name=__codelineno-260-12></a>
<a id=__codelineno-260-13 name=__codelineno-260-13></a><span class=w>        </span><span class=n>Pojo</span><span class=w> </span><span class=n>pojo2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Pojo</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-260-14 name=__codelineno-260-14></a><span class=w>                </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>settings</span><span class=p>)</span>
<a id=__codelineno-260-15 name=__codelineno-260-15></a><span class=w>                </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-260-16 name=__codelineno-260-16></a>
<a id=__codelineno-260-17 name=__codelineno-260-17></a><span class=w>        </span><span class=n>assertThat</span><span class=p>(</span><span class=n>pojo1</span><span class=p>).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=n>pojo2</span><span class=p>);</span>
<a id=__codelineno-260-18 name=__codelineno-260-18></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-260-19 name=__codelineno-260-19></a><span class=p>}</span>
</code></pre></div></table></div><h3 id=global-seed>Global Seed<a title="Permanent link" class=headerlink href=#global-seed>¶</a></h3><p>A global seed can be specified in <code>instancio.properties</code> using the <code>seed</code> property key:<div class=highlight><pre><span></span><code><a href=#__codelineno-261-1 id=__codelineno-261-1 name=__codelineno-261-1></a><span class=na>seed</span><span class=o>=</span><span class=s>9283754</span>
</code></pre></div><p>There are some important differences in how the global seed works depending on whether tests declare the <code>InstancioExtension</code>.<h4 id=global-seed-without-the-instancioextension>Global Seed Without the <code>InstancioExtension</code><a title="Permanent link" class=headerlink href=#global-seed-without-the-instancioextension>¶</a></h4><p>When tests are run without the extension, the same <code>Random</code> instance is used across all test classes and methods. Therefore, generated data is affected by the order in which test methods are run.<p>Let's assume the configured seed in the properties file produces the following output if <code>test1</code> is run first:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-262-1> 1</a></span>
<span class=normal><a href=#__codelineno-262-2> 2</a></span>
<span class=normal><a href=#__codelineno-262-3> 3</a></span>
<span class=normal><a href=#__codelineno-262-4> 4</a></span>
<span class=normal><a href=#__codelineno-262-5> 5</a></span>
<span class=normal><a href=#__codelineno-262-6> 6</a></span>
<span class=normal><a href=#__codelineno-262-7> 7</a></span>
<span class=normal><a href=#__codelineno-262-8> 8</a></span>
<span class=normal><a href=#__codelineno-262-9> 9</a></span>
<span class=normal><a href=#__codelineno-262-10>10</a></span>
<span class=normal><a href=#__codelineno-262-11>11</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-262-1 name=__codelineno-262-1></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-262-2 name=__codelineno-262-2></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-262-3 name=__codelineno-262-3></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>test1</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-262-4 name=__codelineno-262-4></a><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w> </span><span class=c1>// Output: "FCGVRXSUU"</span>
<a id=__codelineno-262-5 name=__codelineno-262-5></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-262-6 name=__codelineno-262-6></a>
<a id=__codelineno-262-7 name=__codelineno-262-7></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-262-8 name=__codelineno-262-8></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>test2</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-262-9 name=__codelineno-262-9></a><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w> </span><span class=c1>// Output: "OCNVRBX"</span>
<a id=__codelineno-262-10 name=__codelineno-262-10></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-262-11 name=__codelineno-262-11></a><span class=p>}</span>
</code></pre></div></table></div><p>If <code>test2</code> were to run first, then <code>s2</code> will be <code>FCGVRXSUU</code> and <code>s1</code> will be <code>OCNVRBX</code>.<p>In short, when using the global seed <em>without</em> the <code>InstancioExtension</code>, the generated data is static for:<ul><li>a given test method, or<li>a set of test methods that are run in a particular order</ul><p>For this reason, using a global seed without the extension is not recommended, as it makes it harder to reproduce the data in case of test failure.<h4 id=global-seed-with-the-instancioextension>Global Seed With the <code>InstancioExtension</code><a title="Permanent link" class=headerlink href=#global-seed-with-the-instancioextension>¶</a></h4><p>When using the extension, each test method gets its own instance of <code>Random</code> initialised with the seed from the properties file. As a result, generated data is not affected by the order in which test methods are run.<p>For example, the following snippet will always produce the same output:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-263-1> 1</a></span>
<span class=normal><a href=#__codelineno-263-2> 2</a></span>
<span class=normal><a href=#__codelineno-263-3> 3</a></span>
<span class=normal><a href=#__codelineno-263-4> 4</a></span>
<span class=normal><a href=#__codelineno-263-5> 5</a></span>
<span class=normal><a href=#__codelineno-263-6> 6</a></span>
<span class=normal><a href=#__codelineno-263-7> 7</a></span>
<span class=normal><a href=#__codelineno-263-8> 8</a></span>
<span class=normal><a href=#__codelineno-263-9> 9</a></span>
<span class=normal><a href=#__codelineno-263-10>10</a></span>
<span class=normal><a href=#__codelineno-263-11>11</a></span>
<span class=normal><a href=#__codelineno-263-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-263-1 name=__codelineno-263-1></a><span class=hll><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-263-2 name=__codelineno-263-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-263-3 name=__codelineno-263-3></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-263-4 name=__codelineno-263-4></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>T1</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-263-5 name=__codelineno-263-5></a><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w> </span><span class=c1>// Output: "FCGVRXSUU"</span>
<a id=__codelineno-263-6 name=__codelineno-263-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-263-7 name=__codelineno-263-7></a>
<a id=__codelineno-263-8 name=__codelineno-263-8></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-263-9 name=__codelineno-263-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>T2</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-263-10 name=__codelineno-263-10></a><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w> </span><span class=c1>// Output: "FCGVRXSUU"</span>
<a id=__codelineno-263-11 name=__codelineno-263-11></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-263-12 name=__codelineno-263-12></a><span class=p>}</span>
</code></pre></div></table></div><h2 id=getting-the-seed-value>Getting the Seed Value<a title="Permanent link" class=headerlink href=#getting-the-seed-value>¶</a></h2><p>Sometimes it is necessary to get the seed value that was used to generate the data. One such example is for reproducing failed tests. If you are using JUnit 5, the seed value is reported automatically using the <code>InstancioExtension</code> (see <a href=#junit-jupiter-integration>JUnit Jupiter integration</a>). If you are using JUnit 4, TestNG, or Instancio standalone, the seed value can be obtained by calling the <code>asResult()</code> method of the builder API. This returns a <code>Result</code> containing the created object and the seed value that was used to populate its values.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Example of using asResult()</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-264-1>1</a></span>
<span class=normal><a href=#__codelineno-264-2>2</a></span>
<span class=normal><a href=#__codelineno-264-3>3</a></span>
<span class=normal><a href=#__codelineno-264-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-264-1 name=__codelineno-264-1></a><span class=n>Result</span><span class=o><</span><span class=n>Person</span><span class=o>></span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>asResult</span><span class=p>();</span>
<a id=__codelineno-264-2 name=__codelineno-264-2></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>get</span><span class=p>();</span>
<a id=__codelineno-264-3 name=__codelineno-264-3></a><span class=kt>long</span><span class=w> </span><span class=n>seed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getSeed</span><span class=p>();</span><span class=w> </span><span class=c1>// seed value that was used for populating the person</span>
<a id=__codelineno-264-4 name=__codelineno-264-4></a><span class=c1>// snip...</span>
</code></pre></div></table></div><p>In addition, seed values can be logged by setting the following class to <code>TRACE</code>:<div class=highlight><pre><span></span><code><a href=#__codelineno-265-1 id=__codelineno-265-1 name=__codelineno-265-1></a>org.instancio.support.Seeds
</code></pre></div><p>This will create a log message for every generated root object created via the API:<div class=highlight><pre><span></span><code><a href=#__codelineno-266-1 id=__codelineno-266-1 name=__codelineno-266-1></a>Generating org.example.Pojo with seed 1473150975436346185 (seed source: RANDOM)
</code></pre></div><h1 id=junit-jupiter-integration>JUnit Jupiter Integration<a title="Permanent link" class=headerlink href=#junit-jupiter-integration>¶</a></h1><p>Instancio supports JUnit 5 through the <a href=https://javadoc.io/doc/org.instancio/instancio-junit/latest/org/instancio/junit/InstancioExtension.html target=_blank>InstancioExtension</a>, which provides several useful features:<ul><li>Injection of fields and method parameters using the <code>@Given</code> annotation<li>Ability to use <code>@InstancioSource</code> with <code>@ParameterizedTest</code> methods<li>Injection of custom settings using the <code>@WithSettings</code> annotation<li>Support for reproducing failed tests using the <code>@Seed</code> annotation</ul><h2 id=given-injection><code>@Given</code> Injection<a title="Permanent link" class=headerlink href=#given-injection>¶</a></h2><div class="admonition info"><p class=admonition-title>Experimental API <code>@since 5.0.0</code></div><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-junit/latest/org/instancio/junit/Given.html target=_blank>@Given</a> annotation can be used to inject generated values into fields and method parameters:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-267-1> 1</a></span>
<span class=normal><a href=#__codelineno-267-2> 2</a></span>
<span class=normal><a href=#__codelineno-267-3> 3</a></span>
<span class=normal><a href=#__codelineno-267-4> 4</a></span>
<span class=normal><a href=#__codelineno-267-5> 5</a></span>
<span class=normal><a href=#__codelineno-267-6> 6</a></span>
<span class=normal><a href=#__codelineno-267-7> 7</a></span>
<span class=normal><a href=#__codelineno-267-8> 8</a></span>
<span class=normal><a href=#__codelineno-267-9> 9</a></span>
<span class=normal><a href=#__codelineno-267-10>10</a></span>
<span class=normal><a href=#__codelineno-267-11>11</a></span>
<span class=normal><a href=#__codelineno-267-12>12</a></span>
<span class=normal><a href=#__codelineno-267-13>13</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-267-1 name=__codelineno-267-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-267-2 name=__codelineno-267-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-267-3 name=__codelineno-267-3></a>
<a id=__codelineno-267-4 name=__codelineno-267-4></a><span class=hll><span class=w>    </span><span class=nd>@Given</span>
</span><a id=__codelineno-267-5 name=__codelineno-267-5></a><span class=hll><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=p>;</span>
</span><a id=__codelineno-267-6 name=__codelineno-267-6></a>
<a id=__codelineno-267-7 name=__codelineno-267-7></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-267-8 name=__codelineno-267-8></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-267-9 name=__codelineno-267-9></a><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>person</span><span class=p>);</span>
<a id=__codelineno-267-10 name=__codelineno-267-10></a><span class=w>        </span><span class=c1>// Sample output:</span>
<a id=__codelineno-267-11 name=__codelineno-267-11></a><span class=w>        </span><span class=c1>// Person[firstName=BVERADS, lastName=UYBQNZ]</span>
<a id=__codelineno-267-12 name=__codelineno-267-12></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-267-13 name=__codelineno-267-13></a><span class=p>}</span>
</code></pre></div></table></div><p>Under the hood, the extension will execute <code>Instancio.create(Person.class)</code> and inject the result into the annotated field.<p>The <code>@Given</code> annotation can also be used to add parameters to <code>@Test</code> methods:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-268-1>1</a></span>
<span class=normal><a href=#__codelineno-268-2>2</a></span>
<span class=normal><a href=#__codelineno-268-3>3</a></span>
<span class=normal><a href=#__codelineno-268-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-268-1 name=__codelineno-268-1></a><span class=nd>@Test</span>
<a id=__codelineno-268-2 name=__codelineno-268-2></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=nd>@Given</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=nd>@Given</span><span class=w> </span><span class=n>List</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>numbers</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-268-3 name=__codelineno-268-3></a><span class=w>    </span><span class=c1>// ...</span>
<a id=__codelineno-268-4 name=__codelineno-268-4></a><span class=p>}</span>
</code></pre></div></table></div><p>Additionally, the <code>@Given</code> annotation can supplement <code>@ParameterizedTest</code> methods with additional arguments. In the following example, the <code>value</code> parameter is provided by the <code>@ValueSource</code>, while the <code>number</code> is provided by Instancio:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-269-1>1</a></span>
<span class=normal><a href=#__codelineno-269-2>2</a></span>
<span class=normal><a href=#__codelineno-269-3>3</a></span>
<span class=normal><a href=#__codelineno-269-4>4</a></span>
<span class=normal><a href=#__codelineno-269-5>5</a></span>
<span class=normal><a href=#__codelineno-269-6>6</a></span>
<span class=normal><a href=#__codelineno-269-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-269-1 name=__codelineno-269-1></a><span class=nd>@ValueSource</span><span class=p>(</span><span class=n>strings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=s>"foo"</span><span class=p>,</span><span class=w> </span><span class=s>"bar"</span><span class=p>})</span>
<a id=__codelineno-269-2 name=__codelineno-269-2></a><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-269-3 name=__codelineno-269-3></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>value</span><span class=p>,</span><span class=w> </span><span class=nd>@Given</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>number</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-269-4 name=__codelineno-269-4></a><span class=w>    </span><span class=c1>// Sample output:</span>
<a id=__codelineno-269-5 name=__codelineno-269-5></a><span class=w>    </span><span class=c1>// [1] value=foo, number=167</span>
<a id=__codelineno-269-6 name=__codelineno-269-6></a><span class=w>    </span><span class=c1>// [2] value=bar, number=9873</span>
<a id=__codelineno-269-7 name=__codelineno-269-7></a><span class=p>}</span>
</code></pre></div></table></div><p>Moreover, the <code>@Given</code> annotation supports injecting <code>Supplier</code> and <code>Stream</code> objects:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-270-1> 1</a></span>
<span class=normal><a href=#__codelineno-270-2> 2</a></span>
<span class=normal><a href=#__codelineno-270-3> 3</a></span>
<span class=normal><a href=#__codelineno-270-4> 4</a></span>
<span class=normal><a href=#__codelineno-270-5> 5</a></span>
<span class=normal><a href=#__codelineno-270-6> 6</a></span>
<span class=normal><a href=#__codelineno-270-7> 7</a></span>
<span class=normal><a href=#__codelineno-270-8> 8</a></span>
<span class=normal><a href=#__codelineno-270-9> 9</a></span>
<span class=normal><a href=#__codelineno-270-10>10</a></span>
<span class=normal><a href=#__codelineno-270-11>11</a></span>
<span class=normal><a href=#__codelineno-270-12>12</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-270-1 name=__codelineno-270-1></a><span class=nd>@Test</span>
<a id=__codelineno-270-2 name=__codelineno-270-2></a><span class=kt>void</span><span class=w> </span><span class=nf>withSupplier</span><span class=p>(</span><span class=nd>@Given</span><span class=w> </span><span class=n>Supplier</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>supplier</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-270-3 name=__codelineno-270-3></a><span class=w>    </span><span class=c1>// Sample output:</span>
<a id=__codelineno-270-4 name=__codelineno-270-4></a><span class=w>    </span><span class=n>Integer</span><span class=w> </span><span class=n>i1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>supplier</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// 3463</span>
<a id=__codelineno-270-5 name=__codelineno-270-5></a><span class=w>    </span><span class=n>Integer</span><span class=w> </span><span class=n>i2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>supplier</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w> </span><span class=c1>// 935</span>
<a id=__codelineno-270-6 name=__codelineno-270-6></a><span class=p>}</span>
<a id=__codelineno-270-7 name=__codelineno-270-7></a>
<a id=__codelineno-270-8 name=__codelineno-270-8></a><span class=nd>@Test</span>
<a id=__codelineno-270-9 name=__codelineno-270-9></a><span class=kt>void</span><span class=w> </span><span class=nf>withStream</span><span class=p>(</span><span class=nd>@Given</span><span class=w> </span><span class=n>Stream</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>stream</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-270-10 name=__codelineno-270-10></a><span class=w>    </span><span class=n>List</span><span class=o><</span><span class=n>Integer</span><span class=o>></span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stream</span><span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=mi>3</span><span class=p>).</span><span class=na>toList</span><span class=p>();</span>
<a id=__codelineno-270-11 name=__codelineno-270-11></a><span class=w>    </span><span class=c1>// Sample output: [250, 7044, 3256]</span>
<a id=__codelineno-270-12 name=__codelineno-270-12></a><span class=p>}</span>
</code></pre></div></table></div><h3 id=using-custom-givenprovider>Using Custom <code>GivenProvider</code><a title="Permanent link" class=headerlink href=#using-custom-givenprovider>¶</a></h3><p>The <code>@Given</code> annotation can accept one or more <code>GivenProvider</code> classes to provide customised values. The <code>GivenProvider</code> interface is defined as follows:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-271-1>1</a></span>
<span class=normal><a href=#__codelineno-271-2>2</a></span>
<span class=normal><a href=#__codelineno-271-3>3</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-271-1 name=__codelineno-271-1></a><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>GivenProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-271-2 name=__codelineno-271-2></a><span class=w>    </span><span class=n>Object</span><span class=w> </span><span class=nf>provide</span><span class=p>(</span><span class=n>ElementContext</span><span class=w> </span><span class=n>context</span><span class=p>);</span>
<a id=__codelineno-271-3 name=__codelineno-271-3></a><span class=p>}</span>
</code></pre></div></table></div><p>The <code>ElementContext</code> class provides information about the annotated element (<code>java.lang.reflect.Field</code> or <code>java.lang.reflect.Parameter</code>) as well as an instance of <code>Random</code> for generating reproducible random values.<p>For example, to generate a product code consisting of 3 letters followed by 5 digits (e.g. <code>ABC12345</code>):<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-272-1>1</a></span>
<span class=normal><a href=#__codelineno-272-2>2</a></span>
<span class=normal><a href=#__codelineno-272-3>3</a></span>
<span class=normal><a href=#__codelineno-272-4>4</a></span>
<span class=normal><a href=#__codelineno-272-5>5</a></span>
<span class=normal><a href=#__codelineno-272-6>6</a></span>
<span class=normal><a href=#__codelineno-272-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-272-1 name=__codelineno-272-1></a><span class=kd>class</span> <span class=nc>ProductCodeProvider</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>GivenProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-272-2 name=__codelineno-272-2></a><span class=w>    </span><span class=nd>@Override</span>
<a id=__codelineno-272-3 name=__codelineno-272-3></a><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=nf>provide</span><span class=p>(</span><span class=n>ElementContext</span><span class=w> </span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-272-4 name=__codelineno-272-4></a><span class=w>        </span><span class=n>Random</span><span class=w> </span><span class=n>random</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>random</span><span class=p>();</span>
<a id=__codelineno-272-5 name=__codelineno-272-5></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>random</span><span class=p>.</span><span class=na>upperCaseAlphabetic</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>random</span><span class=p>.</span><span class=na>digits</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
<a id=__codelineno-272-6 name=__codelineno-272-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-272-7 name=__codelineno-272-7></a><span class=p>}</span>
</code></pre></div></table></div><p>You can use this class with the <code>@Given</code> annotation to generate product codes:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-273-1>1</a></span>
<span class=normal><a href=#__codelineno-273-2>2</a></span>
<span class=normal><a href=#__codelineno-273-3>3</a></span>
<span class=normal><a href=#__codelineno-273-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-273-1 name=__codelineno-273-1></a><span class=nd>@Test</span>
<a id=__codelineno-273-2 name=__codelineno-273-2></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=nd>@Given</span><span class=p>(</span><span class=n>ProductCodeProvider</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>productCode</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-273-3 name=__codelineno-273-3></a><span class=w>    </span><span class=c1>// ...</span>
<a id=__codelineno-273-4 name=__codelineno-273-4></a><span class=p>}</span>
</code></pre></div></table></div><p>If a provider is widely used across many tests, consider defining a custom annotation:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-274-1>1</a></span>
<span class=normal><a href=#__codelineno-274-2>2</a></span>
<span class=normal><a href=#__codelineno-274-3>3</a></span>
<span class=normal><a href=#__codelineno-274-4>4</a></span>
<span class=normal><a href=#__codelineno-274-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-274-1 name=__codelineno-274-1></a><span class=nd>@Target</span><span class=p>({</span><span class=n>ElementType</span><span class=p>.</span><span class=na>FIELD</span><span class=p>,</span><span class=w> </span><span class=n>ElementType</span><span class=p>.</span><span class=na>PARAMETER</span><span class=p>})</span>
<a id=__codelineno-274-2 name=__codelineno-274-2></a><span class=nd>@Retention</span><span class=p>(</span><span class=n>RetentionPolicy</span><span class=p>.</span><span class=na>RUNTIME</span><span class=p>)</span>
<a id=__codelineno-274-3 name=__codelineno-274-3></a><span class=hll><span class=nd>@Given</span><span class=p>(</span><span class=n>ProductCodeProvider</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
</span><a id=__codelineno-274-4 name=__codelineno-274-4></a><span class=hll><span class=nd>@interface</span><span class=w> </span><span class=n>GivenProductCode</span><span class=w> </span><span class=p>{</span>
</span><a id=__codelineno-274-5 name=__codelineno-274-5></a><span class=p>}</span>
</code></pre></div></table></div><p>Sample usage:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-275-1>1</a></span>
<span class=normal><a href=#__codelineno-275-2>2</a></span>
<span class=normal><a href=#__codelineno-275-3>3</a></span>
<span class=normal><a href=#__codelineno-275-4>4</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-275-1 name=__codelineno-275-1></a><span class=nd>@Test</span>
<a id=__codelineno-275-2 name=__codelineno-275-2></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=nd>@GivenProductCode</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>productCode</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-275-3 name=__codelineno-275-3></a><span class=w>    </span><span class=c1>// ...</span>
<a id=__codelineno-275-4 name=__codelineno-275-4></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition note"><p class=admonition-title>Using multiple providers<p>When multiple providers are specified, e.g. <code>@Given({Provider1.class, Provider2.class})</code> Instancio will choose providers randomly from the specified classes.</div><h2 id=parameterized-tests-with-instanciosource>Parameterized Tests with <code>@InstancioSource</code><a title="Permanent link" class=headerlink href=#parameterized-tests-with-instanciosource>¶</a></h2><p>The <a href=https://javadoc.io/doc/org.instancio/instancio-junit/latest/org/instancio/junit/InstancioSource.html target=_blank>@InstancioSource</a> annotation allows you to provide arguments directly to a <code>@ParameterizedTest</code> method. This works for both single and multiple arguments, with each class representing one argument.<div class="admonition warning"><p class=admonition-title>Using <code>@ParameterizedTest</code> requires the <code>junit-jupiter-params</code> dependency.<p>See <a href=https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests-setup target=_blank>JUnit documentation for details</a>.</div><div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Using @InstancioSource with @ParameterizedTest</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-276-1> 1</a></span>
<span class=normal><a href=#__codelineno-276-2> 2</a></span>
<span class=normal><a href=#__codelineno-276-3> 3</a></span>
<span class=normal><a href=#__codelineno-276-4> 4</a></span>
<span class=normal><a href=#__codelineno-276-5> 5</a></span>
<span class=normal><a href=#__codelineno-276-6> 6</a></span>
<span class=normal><a href=#__codelineno-276-7> 7</a></span>
<span class=normal><a href=#__codelineno-276-8> 8</a></span>
<span class=normal><a href=#__codelineno-276-9> 9</a></span>
<span class=normal><a href=#__codelineno-276-10>10</a></span>
<span class=normal><a href=#__codelineno-276-11>11</a></span>
<span class=normal><a href=#__codelineno-276-12>12</a></span>
<span class=normal><a href=#__codelineno-276-13>13</a></span>
<span class=normal><a href=#__codelineno-276-14>14</a></span>
<span class=normal><a href=#__codelineno-276-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-276-1 name=__codelineno-276-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-276-2 name=__codelineno-276-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-276-3 name=__codelineno-276-3></a>
<a id=__codelineno-276-4 name=__codelineno-276-4></a><span class=w>    </span><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-276-5 name=__codelineno-276-5></a><span class=w>    </span><span class=nd>@InstancioSource</span>
<a id=__codelineno-276-6 name=__codelineno-276-6></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>singleArgument</span><span class=p>(</span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-276-7 name=__codelineno-276-7></a><span class=w>        </span><span class=c1>// snip...</span>
<a id=__codelineno-276-8 name=__codelineno-276-8></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-276-9 name=__codelineno-276-9></a>
<a id=__codelineno-276-10 name=__codelineno-276-10></a><span class=w>    </span><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-276-11 name=__codelineno-276-11></a><span class=w>    </span><span class=nd>@InstancioSource</span>
<a id=__codelineno-276-12 name=__codelineno-276-12></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>multipleArguments</span><span class=p>(</span><span class=n>Foo</span><span class=w> </span><span class=n>foo</span><span class=p>,</span><span class=w> </span><span class=n>Bar</span><span class=w> </span><span class=n>bar</span><span class=p>,</span><span class=w> </span><span class=n>Baz</span><span class=w> </span><span class=n>baz</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-276-13 name=__codelineno-276-13></a><span class=w>        </span><span class=c1>// snip...</span>
<a id=__codelineno-276-14 name=__codelineno-276-14></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-276-15 name=__codelineno-276-15></a><span class=p>}</span>
</code></pre></div></table></div><p><code>@InstancioSource</code> can also be used with <a href=#data-feeds>data feeds</a>. For example, assuming we have a custom <code>PersonFeed</code>:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-277-1>1</a></span>
<span class=normal><a href=#__codelineno-277-2>2</a></span>
<span class=normal><a href=#__codelineno-277-3>3</a></span>
<span class=normal><a href=#__codelineno-277-4>4</a></span>
<span class=normal><a href=#__codelineno-277-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-277-1 name=__codelineno-277-1></a><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-277-2 name=__codelineno-277-2></a><span class=nd>@InstancioSource</span>
<a id=__codelineno-277-3 name=__codelineno-277-3></a><span class=kt>void</span><span class=w> </span><span class=nf>feedExample</span><span class=p>(</span><span class=n>PersonFeed</span><span class=w> </span><span class=n>feed</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-277-4 name=__codelineno-277-4></a><span class=w>    </span><span class=c1>// snip...</span>
<a id=__codelineno-277-5 name=__codelineno-277-5></a><span class=p>}</span>
</code></pre></div></table></div><p>Methods annotated with <code>@InstancioSource</code> will execute multiple times, each time with a new set of random inputs to ensure better test coverage. The number of iterations can be configured using the <code>Keys.INSTANCIO_SOURCE_SAMPLES</code> setting, which defaults to <code>100</code>. In the following example, all test methods annotated with <code>@InstancioSource</code> in this test class will run <code>500</code> times:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-278-1> 1</a></span>
<span class=normal><a href=#__codelineno-278-2> 2</a></span>
<span class=normal><a href=#__codelineno-278-3> 3</a></span>
<span class=normal><a href=#__codelineno-278-4> 4</a></span>
<span class=normal><a href=#__codelineno-278-5> 5</a></span>
<span class=normal><a href=#__codelineno-278-6> 6</a></span>
<span class=normal><a href=#__codelineno-278-7> 7</a></span>
<span class=normal><a href=#__codelineno-278-8> 8</a></span>
<span class=normal><a href=#__codelineno-278-9> 9</a></span>
<span class=normal><a href=#__codelineno-278-10>10</a></span>
<span class=normal><a href=#__codelineno-278-11>11</a></span>
<span class=normal><a href=#__codelineno-278-12>12</a></span>
<span class=normal><a href=#__codelineno-278-13>13</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-278-1 name=__codelineno-278-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-278-2 name=__codelineno-278-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-278-3 name=__codelineno-278-3></a>
<a id=__codelineno-278-4 name=__codelineno-278-4></a><span class=w>    </span><span class=nd>@WithSettings</span>
<a id=__codelineno-278-5 name=__codelineno-278-5></a><span class=hll><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
</span><a id=__codelineno-278-6 name=__codelineno-278-6></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>INSTANCIO_SOURCE_SAMPLES</span><span class=p>,</span><span class=w> </span><span class=mi>500</span><span class=p>);</span>
<a id=__codelineno-278-7 name=__codelineno-278-7></a>
<a id=__codelineno-278-8 name=__codelineno-278-8></a><span class=w>    </span><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-278-9 name=__codelineno-278-9></a><span class=w>    </span><span class=nd>@InstancioSource</span>
<a id=__codelineno-278-10 name=__codelineno-278-10></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-278-11 name=__codelineno-278-11></a><span class=w>        </span><span class=c1>// ...</span>
<a id=__codelineno-278-12 name=__codelineno-278-12></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-278-13 name=__codelineno-278-13></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition warning"><p class=admonition-title>New behaviour since version <code>5.0.0</code>. In prior versions, <code>@InstancioSource</code> methods executed only once.</div><p>Additionally, this can be overridden for a specific test method using the annotation's <code>samples</code> attribute:<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-279-1>1</a></span>
<span class=normal><a href=#__codelineno-279-2>2</a></span>
<span class=normal><a href=#__codelineno-279-3>3</a></span>
<span class=normal><a href=#__codelineno-279-4>4</a></span>
<span class=normal><a href=#__codelineno-279-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-279-1 name=__codelineno-279-1></a><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-279-2 name=__codelineno-279-2></a><span class=hll><span class=nd>@InstancioSource</span><span class=p>(</span><span class=n>samples</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>250</span><span class=p>)</span>
</span><a id=__codelineno-279-3 name=__codelineno-279-3></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-279-4 name=__codelineno-279-4></a><span class=w>    </span><span class=c1>// will run this test method 250 times</span>
<a id=__codelineno-279-5 name=__codelineno-279-5></a><span class=p>}</span>
</code></pre></div></table></div><h4 id=using-given-with-instanciosource>Using <code>@Given</code> with <code>@InstancioSource</code><a title="Permanent link" class=headerlink href=#using-given-with-instanciosource>¶</a></h4><p>Methods annotated with <code>@InstancioSource</code> support the <code>@Given</code> annotation. Since <code>@InstancioSource</code> generates random arguments by default, the <code>@Given</code> annotation is only necessary when specifying a custom <code>GivenProvider</code> attribute.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-280-1>1</a></span>
<span class=normal><a href=#__codelineno-280-2>2</a></span>
<span class=normal><a href=#__codelineno-280-3>3</a></span>
<span class=normal><a href=#__codelineno-280-4>4</a></span>
<span class=normal><a href=#__codelineno-280-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-280-1 name=__codelineno-280-1></a><span class=nd>@ParameterizedTest</span>
<a id=__codelineno-280-2 name=__codelineno-280-2></a><span class=nd>@InstancioSource</span>
<a id=__codelineno-280-3 name=__codelineno-280-3></a><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>randomString</span><span class=p>,</span><span class=w> </span><span class=nd>@Given</span><span class=p>(</span><span class=n>CustomStringProvider</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=n>customString</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-280-4 name=__codelineno-280-4></a><span class=w>    </span><span class=c1>// ...</span>
<a id=__codelineno-280-5 name=__codelineno-280-5></a><span class=p>}</span>
</code></pre></div></table></div><p>In this example, <code>randomString</code> is generated randomly, while <code>customString</code> is provided by <code>CustomStringProvider</code>.<h2 id=settings-injection>Settings Injection<a title="Permanent link" class=headerlink href=#settings-injection>¶</a></h2><p>The <code>InstancioExtension</code> also adds support for injecting <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/settings/Settings.html target=_blank>Settings</a> into a test class. The injected settings will be used by every test method within the class. This can be done using the <a href=https://javadoc.io/doc/org.instancio/instancio-junit/latest/org/instancio/junit/WithSettings.html target=_blank>@WithSettings</a> annotation.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Injecting Settings into a test class</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-281-1> 1</a></span>
<span class=normal><a href=#__codelineno-281-2> 2</a></span>
<span class=normal><a href=#__codelineno-281-3> 3</a></span>
<span class=normal><a href=#__codelineno-281-4> 4</a></span>
<span class=normal><a href=#__codelineno-281-5> 5</a></span>
<span class=normal><a href=#__codelineno-281-6> 6</a></span>
<span class=normal><a href=#__codelineno-281-7> 7</a></span>
<span class=normal><a href=#__codelineno-281-8> 8</a></span>
<span class=normal><a href=#__codelineno-281-9> 9</a></span>
<span class=normal><a href=#__codelineno-281-10>10</a></span>
<span class=normal><a href=#__codelineno-281-11>11</a></span>
<span class=normal><a href=#__codelineno-281-12>12</a></span>
<span class=normal><a href=#__codelineno-281-13>13</a></span>
<span class=normal><a href=#__codelineno-281-14>14</a></span>
<span class=normal><a href=#__codelineno-281-15>15</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-281-1 name=__codelineno-281-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-281-2 name=__codelineno-281-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-281-3 name=__codelineno-281-3></a>
<a id=__codelineno-281-4 name=__codelineno-281-4></a><span class=hll><span class=w>    </span><span class=nd>@WithSettings</span>
</span><a id=__codelineno-281-5 name=__codelineno-281-5></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-281-6 name=__codelineno-281-6></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>COLLECTION_MIN_SIZE</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span>
<a id=__codelineno-281-7 name=__codelineno-281-7></a>
<a id=__codelineno-281-8 name=__codelineno-281-8></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-281-9 name=__codelineno-281-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-281-10 name=__codelineno-281-10></a><span class=hll><span class=w>        </span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</span><a id=__codelineno-281-11 name=__codelineno-281-11></a>
<a id=__codelineno-281-12 name=__codelineno-281-12></a><span class=w>        </span><span class=n>assertThat</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getPhoneNumbers</span><span class=p>())</span>
<a id=__codelineno-281-13 name=__codelineno-281-13></a><span class=w>            </span><span class=p>.</span><span class=na>hasSizeGreaterThanOrEqualTo</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
<a id=__codelineno-281-14 name=__codelineno-281-14></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-281-15 name=__codelineno-281-15></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>4</lnum> Inject custom settings to be used by every test method within the class.<br> <lnum>10</lnum> Every object will be created using the injected settings.</div><div class="admonition warning"><p class=admonition-title>There can be only one field annotated <code>@WithSettings</code> per test class.</div><p>Instancio also supports overriding the injected settings using the <code>withSettings</code> method as shown below. The settings provided via the method take precedence over the injected settings (see <a href=#settings-precedence>Settings Precedence</a> for further information).<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Overriding injecting Settings</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-282-1> 1</a></span>
<span class=normal><a href=#__codelineno-282-2> 2</a></span>
<span class=normal><a href=#__codelineno-282-3> 3</a></span>
<span class=normal><a href=#__codelineno-282-4> 4</a></span>
<span class=normal><a href=#__codelineno-282-5> 5</a></span>
<span class=normal><a href=#__codelineno-282-6> 6</a></span>
<span class=normal><a href=#__codelineno-282-7> 7</a></span>
<span class=normal><a href=#__codelineno-282-8> 8</a></span>
<span class=normal><a href=#__codelineno-282-9> 9</a></span>
<span class=normal><a href=#__codelineno-282-10>10</a></span>
<span class=normal><a href=#__codelineno-282-11>11</a></span>
<span class=normal><a href=#__codelineno-282-12>12</a></span>
<span class=normal><a href=#__codelineno-282-13>13</a></span>
<span class=normal><a href=#__codelineno-282-14>14</a></span>
<span class=normal><a href=#__codelineno-282-15>15</a></span>
<span class=normal><a href=#__codelineno-282-16>16</a></span>
<span class=normal><a href=#__codelineno-282-17>17</a></span>
<span class=normal><a href=#__codelineno-282-18>18</a></span>
<span class=normal><a href=#__codelineno-282-19>19</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-282-1 name=__codelineno-282-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-282-2 name=__codelineno-282-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-282-3 name=__codelineno-282-3></a>
<a id=__codelineno-282-4 name=__codelineno-282-4></a><span class=w>    </span><span class=nd>@WithSettings</span>
<a id=__codelineno-282-5 name=__codelineno-282-5></a><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Settings</span><span class=w> </span><span class=n>settings</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
<a id=__codelineno-282-6 name=__codelineno-282-6></a><span class=w>        </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>COLLECTION_MIN_SIZE</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span>
<a id=__codelineno-282-7 name=__codelineno-282-7></a>
<a id=__codelineno-282-8 name=__codelineno-282-8></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-282-9 name=__codelineno-282-9></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>overrideInjectedSettings</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-282-10 name=__codelineno-282-10></a><span class=w>        </span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-282-11 name=__codelineno-282-11></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>withSettings</span><span class=p>(</span><span class=n>Settings</span><span class=p>.</span><span class=na>create</span><span class=p>()</span>
</span><a id=__codelineno-282-12 name=__codelineno-282-12></a><span class=w>                </span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>Keys</span><span class=p>.</span><span class=na>COLLECTION_MAX_SIZE</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>))</span>
<a id=__codelineno-282-13 name=__codelineno-282-13></a><span class=w>            </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-282-14 name=__codelineno-282-14></a>
<a id=__codelineno-282-15 name=__codelineno-282-15></a><span class=w>        </span><span class=n>assertThat</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getPhoneNumbers</span><span class=p>())</span>
<a id=__codelineno-282-16 name=__codelineno-282-16></a><span class=w>            </span><span class=p>.</span><span class=na>as</span><span class=p>(</span><span class=s>"Injected settings can be overridden"</span><span class=p>)</span>
<a id=__codelineno-282-17 name=__codelineno-282-17></a><span class=w>            </span><span class=p>.</span><span class=na>hasSizeLessThanOrEqualTo</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
<a id=__codelineno-282-18 name=__codelineno-282-18></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-282-19 name=__codelineno-282-19></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>11</lnum> Settings passed to the builder method take precedence over the injected settings.</div><p>Instancio supports <code>@WithSettings</code> placed on static and non-static fields. However, if the test class contains a <code>@ParameterizedTest</code> method, then the settings field <em>must be static</em>.<h2 id=reproducing-failed-tests>Reproducing Failed Tests<a title="Permanent link" class=headerlink href=#reproducing-failed-tests>¶</a></h2><p>Since using Instancio in your tests runs your code against different inputs on each execution, the ability to reproduce failed tests with previously generated data becomes essential. Instancio supports this by reporting the seed value of a failed test in the failure message.<h3 id=data-guarantees>Data Guarantees<a title="Permanent link" class=headerlink href=#data-guarantees>¶</a></h3><p>The library guarantees that identical data is generated for a given seed <strong>and</strong> version of the library. This applies to all APIs except those marked with the <code>@NonDeterministic</code> annotation. An example of non-deterministic APIs are the <code>past()</code> and <code>future()</code> methods for generating temporal types. These methods depend on the current date as a reference point, which changes over time. Consequently, the same seed value might produce different results at different times.<p>Hard-coding generated values in assertions is also highly discouraged to avoid breaking changes. For example, the following test suffers from tight coupling with the random number generator implementation and may break when upgrading to a newer version of Instancio.<div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-283-1>1</a></span>
<span class=normal><a href=#__codelineno-283-2>2</a></span>
<span class=normal><a href=#__codelineno-283-3>3</a></span>
<span class=normal><a href=#__codelineno-283-4>4</a></span>
<span class=normal><a href=#__codelineno-283-5>5</a></span>
<span class=normal><a href=#__codelineno-283-6>6</a></span>
<span class=normal><a href=#__codelineno-283-7>7</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-283-1 name=__codelineno-283-1></a><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-283-2 name=__codelineno-283-2></a><span class=w>    </span><span class=p>.</span><span class=na>withSeed</span><span class=p>(</span><span class=mi>1234</span><span class=p>)</span>
<a id=__codelineno-283-3 name=__codelineno-283-3></a><span class=w>    </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-283-4 name=__codelineno-283-4></a>
<a id=__codelineno-283-5 name=__codelineno-283-5></a><span class=hll><span class=c1>// Not recommended!</span>
</span><a id=__codelineno-283-6 name=__codelineno-283-6></a><span class=hll><span class=n>assertThat</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getName</span><span class=p>()).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=s>"VEONRGF"</span><span class=p>);</span>
</span><a id=__codelineno-283-7 name=__codelineno-283-7></a><span class=hll><span class=n>assertThat</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getPhoneNumbers</span><span class=p>()).</span><span class=na>hasSize</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></code></pre></div></table></div><h3 id=seed-lifecycle-in-a-junit-jupiter-test>Seed Lifecycle in a JUnit Jupiter Test<a title="Permanent link" class=headerlink href=#seed-lifecycle-in-a-junit-jupiter-test>¶</a></h3><p>Instancio initialises a seed value before each test method. This seed value is used for creating all objects during the test method's execution unless another seed is specified explicitly using the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSeed(long) target=_blank>withSeed(long)</a> method.<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Seed Lifecycle in a JUnit Test</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-284-1> 1</a></span>
<span class=normal><a href=#__codelineno-284-2> 2</a></span>
<span class=normal><a href=#__codelineno-284-3> 3</a></span>
<span class=normal><a href=#__codelineno-284-4> 4</a></span>
<span class=normal><a href=#__codelineno-284-5> 5</a></span>
<span class=normal><a href=#__codelineno-284-6> 6</a></span>
<span class=normal><a href=#__codelineno-284-7> 7</a></span>
<span class=normal><a href=#__codelineno-284-8> 8</a></span>
<span class=normal><a href=#__codelineno-284-9> 9</a></span>
<span class=normal><a href=#__codelineno-284-10>10</a></span>
<span class=normal><a href=#__codelineno-284-11>11</a></span>
<span class=normal><a href=#__codelineno-284-12>12</a></span>
<span class=normal><a href=#__codelineno-284-13>13</a></span>
<span class=normal><a href=#__codelineno-284-14>14</a></span>
<span class=normal><a href=#__codelineno-284-15>15</a></span>
<span class=normal><a href=#__codelineno-284-16>16</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-284-1 name=__codelineno-284-1></a><span class=nd>@ExtendWith</span><span class=p>(</span><span class=n>InstancioExtension</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-284-2 name=__codelineno-284-2></a><span class=kd>class</span> <span class=nc>ExampleTest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-284-3 name=__codelineno-284-3></a>
<a id=__codelineno-284-4 name=__codelineno-284-4></a><span class=w>    </span><span class=nd>@Test</span>
<a id=__codelineno-284-5 name=__codelineno-284-5></a><span class=hll><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>example</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><a id=__codelineno-284-6 name=__codelineno-284-6></a>
<a id=__codelineno-284-7 name=__codelineno-284-7></a><span class=hll><span class=w>        </span><span class=n>Person</span><span class=w> </span><span class=n>person1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</span><a id=__codelineno-284-8 name=__codelineno-284-8></a>
<a id=__codelineno-284-9 name=__codelineno-284-9></a><span class=w>        </span><span class=n>Person</span><span class=w> </span><span class=n>person2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<a id=__codelineno-284-10 name=__codelineno-284-10></a><span class=hll><span class=w>            </span><span class=p>.</span><span class=na>withSeed</span><span class=p>(</span><span class=mi>123</span><span class=p>)</span>
</span><a id=__codelineno-284-11 name=__codelineno-284-11></a><span class=w>            </span><span class=p>.</span><span class=na>create</span><span class=p>();</span>
<a id=__codelineno-284-12 name=__codelineno-284-12></a>
<a id=__codelineno-284-13 name=__codelineno-284-13></a><span class=hll><span class=w>        </span><span class=n>Person</span><span class=w> </span><span class=n>person3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</span><a id=__codelineno-284-14 name=__codelineno-284-14></a>
<a id=__codelineno-284-15 name=__codelineno-284-15></a><span class=hll><span class=w>    </span><span class=p>}</span>
</span><a id=__codelineno-284-16 name=__codelineno-284-16></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>5</lnum> Instancio initialises a random seed value, for example, <code>8276</code>.<br> <lnum>7</lnum> Uses seed value <code>8276</code>.<br> <lnum>10</lnum> Uses the supplied seed value <code>123</code>.<br> <lnum>13</lnum> Uses seed value <code>8276</code>.<br> <lnum>15</lnum> Seed value <code>8276</code> goes out of scope.</div><p>Even though <code>person1</code> and <code>person3</code> are created using the same seed value of <code>8276</code>, they are actually distinct objects, each containing different values. This is because the same instance of the random number generator is used throughout the test method.<p>It should be noted that if the test fails, only the seed generated internally is reported (<code>8276</code> in the above example). Seeds specified via <code>withSeed()</code> or <code>Settings</code> are not reported since the value is already known.<h3 id=test-failure-reporting>Test Failure Reporting<a title="Permanent link" class=headerlink href=#test-failure-reporting>¶</a></h3><p>When a test method fails, Instancio adds a message containing the seed value to the failed test's output. Using the following failing test as an example:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Test failure example</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-285-1> 1</a></span>
<span class=normal><a href=#__codelineno-285-2> 2</a></span>
<span class=normal><a href=#__codelineno-285-3> 3</a></span>
<span class=normal><a href=#__codelineno-285-4> 4</a></span>
<span class=normal><a href=#__codelineno-285-5> 5</a></span>
<span class=normal><a href=#__codelineno-285-6> 6</a></span>
<span class=normal><a href=#__codelineno-285-7> 7</a></span>
<span class=normal><a href=#__codelineno-285-8> 8</a></span>
<span class=normal><a href=#__codelineno-285-9> 9</a></span>
<span class=normal><a href=#__codelineno-285-10>10</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-285-1 name=__codelineno-285-1></a><span class=nd>@Test</span>
<a id=__codelineno-285-2 name=__codelineno-285-2></a><span class=kt>void</span><span class=w> </span><span class=nf>verifyShippingAddress</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-285-3 name=__codelineno-285-3></a><span class=w>    </span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Instancio</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
<a id=__codelineno-285-4 name=__codelineno-285-4></a>
<a id=__codelineno-285-5 name=__codelineno-285-5></a><span class=w>    </span><span class=c1>// Some method under test</span>
<a id=__codelineno-285-6 name=__codelineno-285-6></a><span class=w>    </span><span class=n>Address</span><span class=w> </span><span class=n>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>shippingService</span><span class=p>.</span><span class=na>getShippingAddress</span><span class=p>(</span><span class=n>person</span><span class=p>);</span>
<a id=__codelineno-285-7 name=__codelineno-285-7></a>
<a id=__codelineno-285-8 name=__codelineno-285-8></a><span class=w>    </span><span class=c1>// A failing assertion</span>
<a id=__codelineno-285-9 name=__codelineno-285-9></a><span class=w>    </span><span class=n>assertThat</span><span class=p>(</span><span class=n>address</span><span class=p>).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=n>person</span><span class=p>.</span><span class=na>getAddress</span><span class=p>());</span>
<a id=__codelineno-285-10 name=__codelineno-285-10></a><span class=p>}</span>
</code></pre></div></table></div><p>The failed test output will include the following message:<div class=highlight><pre><span></span><code><a href=#__codelineno-286-1 id=__codelineno-286-1 name=__codelineno-286-1></a>Test method 'verifyShippingAddress' failed with seed: 8532 (seed source: random seed)
</code></pre></div><p>The <em>seed source</em> indicates whether the Instancio extension generated a random seed or used a seed provided by the user. The possible seed sources are listed below (see also <a href=#specifying-seed-value>Specifying seed value</a>):<ul><li>seed specified via <code>Settings</code> annotated with <code>@WithSettings</code><li>seed specified using the <code>@Seed</code> annotation<li>random seed (default behaviour when an explicit seed is not specified)</ul><div class="admonition warning"><p class=admonition-title>Seeds specified using <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSeed(long) target=_blank>withSeed(long)</a> or <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/InstancioApi.html#withSettings(org.instancio.settings.Settings) target=_blank>withSettings(Settings)</a> methods are not reported by the Instancio extension.</div><p>The failed test can be reproduced by using the seed reported in the failure message. This can be done by placing the <a href=https://javadoc.io/doc/org.instancio/instancio-junit/latest/org/instancio/junit/Seed.html target=_blank>@Seed</a> annotation on the test method:<div class=highlight><table class=highlighttable><tr><th class=filename colspan=2><span class=filename>Reproducing a failed test</span><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-287-1>1</a></span>
<span class=normal><a href=#__codelineno-287-2>2</a></span>
<span class=normal><a href=#__codelineno-287-3>3</a></span>
<span class=normal><a href=#__codelineno-287-4>4</a></span>
<span class=normal><a href=#__codelineno-287-5>5</a></span></pre></div><td class=code><div><pre><span></span><code><a id=__codelineno-287-1 name=__codelineno-287-1></a><span class=nd>@Test</span>
<a id=__codelineno-287-2 name=__codelineno-287-2></a><span class=hll><span class=nd>@Seed</span><span class=p>(</span><span class=mi>8532</span><span class=p>)</span>
</span><a id=__codelineno-287-3 name=__codelineno-287-3></a><span class=kt>void</span><span class=w> </span><span class=nf>verifyShippingAddress</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-287-4 name=__codelineno-287-4></a><span class=w>    </span><span class=c1>// snip ... same test code as above</span>
<a id=__codelineno-287-5 name=__codelineno-287-5></a><span class=p>}</span>
</code></pre></div></table></div><div class="admonition attention"><p><lnum>2</lnum> Specifying the seed will reproduce previously generated values.</div><p>With the <code>@Seed</code> annotation in place, the data becomes effectively static. This allows the root cause to be established and fixed. Once the test is passing, the <code>@Seed</code> annotation can be removed so that new data will be generated on each subsequent test run.<hr><h1 id=appendix>Appendix<a title="Permanent link" class=headerlink href=#appendix>¶</a></h1><h2 id=default-string-conversion>Default String Conversion<a title="Permanent link" class=headerlink href=#default-string-conversion>¶</a></h2><table><thead><tr><th>Type<th>Conversion Function<th>Sample Input<tbody><tr><td><code>String</code><td><code>Function.identity()</code><td>-<tr><td><code>Enum</code><td><code>Enum::valueOf</code><td>-<tr><td><code>Character</code><td><code>s -> s.charAt(0)</code><td><code>"Example"</code> -> <code>'E'</code><tr><td><code>Boolean</code><td><code>Boolean::valueOf</code><td><code>"true"</code> or <code>"false"</code><tr><td><code>Integer</code><td><code>Integer::valueOf</code><td><code>"123"</code><tr><td><code>Long</code><td><code>Long::valueOf</code><td><code>"123"</code><tr><td><code>Byte</code><td><code>Byte::valueOf</code><td><code>"123"</code><tr><td><code>Short</code><td><code>Short::valueOf</code><td><code>"123"</code><tr><td><code>Float</code><td><code>Float::valueOf</code><td><code>"123.5"</code><tr><td><code>Double</code><td><code>Double::valueOf</code><td><code>"123.5"</code><tr><td><code>BigInteger</code><td><code>BigInteger::new</code><td><code>"123"</code><tr><td><code>BigDecimal</code><td><code>BigDecimal::new</code><td><code>"123.5"</code><tr><td><code>Instant</code><td><code>Instant::parse</code><td><code>"2071-10-04T08:48:21.499609989Z"</code><tr><td><code>LocalTime</code><td><code>LocalTime::parse</code><td><code>"06:50:07.871441943"</code><tr><td><code>LocalDate</code><td><code>LocalDate::parse</code><td><code>"2048-12-24"</code><tr><td><code>LocalDateTime</code><td><code>LocalDateTime::parse</code><td><code>"2036-03-19T19:18:52.725994144"</code><tr><td><code>OffsetTime</code><td><code>OffsetTime::parse</code><td><code>"18:16:16.814320739Z"</code><tr><td><code>OffsetDateTime</code><td><code>OffsetDateTime::parse</code><td><code>"1975-12-04T07:34:43.807103492Z"</code><tr><td><code>ZonedDateTime</code><td><code>ZonedDateTime::parse</code><td><code>"2003-07-23T23:16:10.568513867Z"</code><tr><td><code>YearMonth</code><td><code>YearMonth::parse</code><td><code>"2045-05"</code><tr><td><code>Year</code><td><code>Year::parse</code><td><code>"1991"</code><tr><td><code>UUID</code><td><code>UUID::fromString</code><td><code>"5d418896-acf5-439e-902d-86a6c6fca4ae"</code></table><h2 id=built-in-generators>Built-in Generators<a title="Permanent link" class=headerlink href=#built-in-generators>¶</a></h2><p>The list of generators provided below is available via the <a href=#using-generate><code>generate()</code></a> method. Most of these generators are also available via <a href=#creating-simple-values><code>Instancio.gen()</code></a> class. Each one offers customisation options relevant to the class it generates, for example <code>bigDecimal().scale(5)</code>.<div class="admonition tip"><p class=admonition-title>Tip<p>See the <a href=https://javadoc.io/doc/org.instancio/instancio-core/latest/org/instancio/generator/specs/package-summary.html target=_blank> <code>org.instancio.generator.specs</code> package Javadocs</a> for methods offered by the built-in generators below.</div><div class=highlight><pre><span></span><code><a href=#__codelineno-288-1 id=__codelineno-288-1 name=__codelineno-288-1></a><span class=nt>Generators</span>
<a href=#__codelineno-288-2 id=__codelineno-288-2 name=__codelineno-288-2></a><span class=err>│</span>
<a href=#__codelineno-288-3 id=__codelineno-288-3 name=__codelineno-288-3></a><span class=err>├──</span><span class=w> </span><span class=nt>booleans</span><span class=o>()</span>
<a href=#__codelineno-288-4 id=__codelineno-288-4 name=__codelineno-288-4></a><span class=err>├──</span><span class=w> </span><span class=nt>chars</span><span class=o>()</span>
<a href=#__codelineno-288-5 id=__codelineno-288-5 name=__codelineno-288-5></a><span class=err>├──</span><span class=w> </span><span class=nt>bytes</span><span class=o>()</span>
<a href=#__codelineno-288-6 id=__codelineno-288-6 name=__codelineno-288-6></a><span class=err>├──</span><span class=w> </span><span class=nt>shorts</span><span class=o>()</span>
<a href=#__codelineno-288-7 id=__codelineno-288-7 name=__codelineno-288-7></a><span class=err>├──</span><span class=w> </span><span class=nt>ints</span><span class=o>()</span>
<a href=#__codelineno-288-8 id=__codelineno-288-8 name=__codelineno-288-8></a><span class=err>├──</span><span class=w> </span><span class=nt>longs</span><span class=o>()</span>
<a href=#__codelineno-288-9 id=__codelineno-288-9 name=__codelineno-288-9></a><span class=err>├──</span><span class=w> </span><span class=nt>floats</span><span class=o>()</span>
<a href=#__codelineno-288-10 id=__codelineno-288-10 name=__codelineno-288-10></a><span class=err>├──</span><span class=w> </span><span class=nt>doubles</span><span class=o>()</span>
<a href=#__codelineno-288-11 id=__codelineno-288-11 name=__codelineno-288-11></a><span class=err>├──</span><span class=w> </span><span class=nt>string</span><span class=o>()</span>
<a href=#__codelineno-288-12 id=__codelineno-288-12 name=__codelineno-288-12></a><span class=err>│</span>
<a href=#__codelineno-288-13 id=__codelineno-288-13 name=__codelineno-288-13></a><span class=err>├──</span><span class=w> </span><span class=nt>array</span><span class=o>()</span>
<a href=#__codelineno-288-14 id=__codelineno-288-14 name=__codelineno-288-14></a><span class=err>├──</span><span class=w> </span><span class=nt>collection</span><span class=o>()</span>
<a href=#__codelineno-288-15 id=__codelineno-288-15 name=__codelineno-288-15></a><span class=err>├──</span><span class=w> </span><span class=nt>map</span><span class=o>()</span>
<a href=#__codelineno-288-16 id=__codelineno-288-16 name=__codelineno-288-16></a><span class=err>├──</span><span class=w> </span><span class=nt>emit</span><span class=o>()</span>
<a href=#__codelineno-288-17 id=__codelineno-288-17 name=__codelineno-288-17></a><span class=err>├──</span><span class=w> </span><span class=nt>enumOf</span><span class=o>(</span><span class=nt>Class</span><span class=o><</span><span class=nt>E</span><span class=o>>)</span>
<a href=#__codelineno-288-18 id=__codelineno-288-18 name=__codelineno-288-18></a><span class=err>├──</span><span class=w> </span><span class=nt>enumSet</span><span class=o>(</span><span class=nt>Class</span><span class=o><</span><span class=nt>E</span><span class=o>>)</span>
<a href=#__codelineno-288-19 id=__codelineno-288-19 name=__codelineno-288-19></a><span class=err>│</span>
<a href=#__codelineno-288-20 id=__codelineno-288-20 name=__codelineno-288-20></a><span class=err>├──</span><span class=w> </span><span class=nt>oneOf</span><span class=o>(</span><span class=nt>Collection</span><span class=o><</span><span class=nt>T</span><span class=o>>)</span>
<a href=#__codelineno-288-21 id=__codelineno-288-21 name=__codelineno-288-21></a><span class=err>├──</span><span class=w> </span><span class=nt>oneOf</span><span class=o>(</span><span class=nt>T</span><span class=o>...)</span>
<a href=#__codelineno-288-22 id=__codelineno-288-22 name=__codelineno-288-22></a><span class=err>│</span>
<a href=#__codelineno-288-23 id=__codelineno-288-23 name=__codelineno-288-23></a><span class=err>├──</span><span class=w> </span><span class=nt>optional</span><span class=o>()</span>
<a href=#__codelineno-288-24 id=__codelineno-288-24 name=__codelineno-288-24></a><span class=err>│</span>
<a href=#__codelineno-288-25 id=__codelineno-288-25 name=__codelineno-288-25></a><span class=err>├──</span><span class=w> </span><span class=nt>math</span><span class=o>()</span>
<a href=#__codelineno-288-26 id=__codelineno-288-26 name=__codelineno-288-26></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>bigInteger</span><span class=o>()</span>
<a href=#__codelineno-288-27 id=__codelineno-288-27 name=__codelineno-288-27></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>bigDecimal</span><span class=o>()</span>
<a href=#__codelineno-288-28 id=__codelineno-288-28 name=__codelineno-288-28></a><span class=err>│</span>
<a href=#__codelineno-288-29 id=__codelineno-288-29 name=__codelineno-288-29></a><span class=err>├──</span><span class=w> </span><span class=nt>net</span><span class=o>()</span>
<a href=#__codelineno-288-30 id=__codelineno-288-30 name=__codelineno-288-30></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>email</span><span class=o>()</span>
<a href=#__codelineno-288-31 id=__codelineno-288-31 name=__codelineno-288-31></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>ip4</span><span class=o>()</span>
<a href=#__codelineno-288-32 id=__codelineno-288-32 name=__codelineno-288-32></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>uri</span><span class=o>()</span>
<a href=#__codelineno-288-33 id=__codelineno-288-33 name=__codelineno-288-33></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>url</span><span class=o>()</span>
<a href=#__codelineno-288-34 id=__codelineno-288-34 name=__codelineno-288-34></a><span class=err>│</span>
<a href=#__codelineno-288-35 id=__codelineno-288-35 name=__codelineno-288-35></a><span class=err>├──</span><span class=w> </span><span class=nt>intervalStarting</span><span class=o>(</span><span class=nt>T</span><span class=o>)</span>
<a href=#__codelineno-288-36 id=__codelineno-288-36 name=__codelineno-288-36></a><span class=err>│</span>
<a href=#__codelineno-288-37 id=__codelineno-288-37 name=__codelineno-288-37></a><span class=err>├──</span><span class=w> </span><span class=nt>io</span><span class=o>()</span>
<a href=#__codelineno-288-38 id=__codelineno-288-38 name=__codelineno-288-38></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>file</span><span class=o>()</span>
<a href=#__codelineno-288-39 id=__codelineno-288-39 name=__codelineno-288-39></a><span class=err>│</span>
<a href=#__codelineno-288-40 id=__codelineno-288-40 name=__codelineno-288-40></a><span class=err>├──</span><span class=w> </span><span class=nt>nio</span><span class=o>()</span>
<a href=#__codelineno-288-41 id=__codelineno-288-41 name=__codelineno-288-41></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>path</span><span class=o>()</span>
<a href=#__codelineno-288-42 id=__codelineno-288-42 name=__codelineno-288-42></a><span class=err>│</span>
<a href=#__codelineno-288-43 id=__codelineno-288-43 name=__codelineno-288-43></a><span class=err>├──</span><span class=w> </span><span class=nt>atomic</span><span class=o>()</span>
<a href=#__codelineno-288-44 id=__codelineno-288-44 name=__codelineno-288-44></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>atomicInteger</span><span class=o>()</span>
<a href=#__codelineno-288-45 id=__codelineno-288-45 name=__codelineno-288-45></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>atomicLong</span><span class=o>()</span>
<a href=#__codelineno-288-46 id=__codelineno-288-46 name=__codelineno-288-46></a><span class=err>│</span>
<a href=#__codelineno-288-47 id=__codelineno-288-47 name=__codelineno-288-47></a><span class=err>├──</span><span class=w> </span><span class=nt>temporal</span><span class=o>()</span>
<a href=#__codelineno-288-48 id=__codelineno-288-48 name=__codelineno-288-48></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>calendar</span><span class=o>()</span>
<a href=#__codelineno-288-49 id=__codelineno-288-49 name=__codelineno-288-49></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>date</span><span class=o>()</span>
<a href=#__codelineno-288-50 id=__codelineno-288-50 name=__codelineno-288-50></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>duration</span><span class=o>()</span>
<a href=#__codelineno-288-51 id=__codelineno-288-51 name=__codelineno-288-51></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>instant</span><span class=o>()</span>
<a href=#__codelineno-288-52 id=__codelineno-288-52 name=__codelineno-288-52></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>localDate</span><span class=o>()</span>
<a href=#__codelineno-288-53 id=__codelineno-288-53 name=__codelineno-288-53></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>localDateTime</span><span class=o>()</span>
<a href=#__codelineno-288-54 id=__codelineno-288-54 name=__codelineno-288-54></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>localTime</span><span class=o>()</span>
<a href=#__codelineno-288-55 id=__codelineno-288-55 name=__codelineno-288-55></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>offsetDateTime</span><span class=o>()</span>
<a href=#__codelineno-288-56 id=__codelineno-288-56 name=__codelineno-288-56></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>offsetTime</span><span class=o>()</span>
<a href=#__codelineno-288-57 id=__codelineno-288-57 name=__codelineno-288-57></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>period</span><span class=o>()</span>
<a href=#__codelineno-288-58 id=__codelineno-288-58 name=__codelineno-288-58></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>sqlDate</span><span class=o>()</span>
<a href=#__codelineno-288-59 id=__codelineno-288-59 name=__codelineno-288-59></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>timestamp</span><span class=o>()</span>
<a href=#__codelineno-288-60 id=__codelineno-288-60 name=__codelineno-288-60></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>year</span><span class=o>()</span>
<a href=#__codelineno-288-61 id=__codelineno-288-61 name=__codelineno-288-61></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>yearMonth</span><span class=o>()</span>
<a href=#__codelineno-288-62 id=__codelineno-288-62 name=__codelineno-288-62></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>zonedDateTime</span><span class=o>()</span>
<a href=#__codelineno-288-63 id=__codelineno-288-63 name=__codelineno-288-63></a><span class=err>│</span>
<a href=#__codelineno-288-64 id=__codelineno-288-64 name=__codelineno-288-64></a><span class=err>├──</span><span class=w> </span><span class=nt>text</span><span class=o>()</span>
<a href=#__codelineno-288-65 id=__codelineno-288-65 name=__codelineno-288-65></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>csv</span><span class=o>()</span>
<a href=#__codelineno-288-66 id=__codelineno-288-66 name=__codelineno-288-66></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>loremIpsum</span><span class=o>()</span>
<a href=#__codelineno-288-67 id=__codelineno-288-67 name=__codelineno-288-67></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>pattern</span><span class=o>(</span><span class=nt>String</span><span class=o>)</span>
<a href=#__codelineno-288-68 id=__codelineno-288-68 name=__codelineno-288-68></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>uuid</span><span class=o>()</span>
<a href=#__codelineno-288-69 id=__codelineno-288-69 name=__codelineno-288-69></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>word</span><span class=o>()</span>
<a href=#__codelineno-288-70 id=__codelineno-288-70 name=__codelineno-288-70></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>wordTemplate</span><span class=o>(</span><span class=nt>String</span><span class=o>)</span>
<a href=#__codelineno-288-71 id=__codelineno-288-71 name=__codelineno-288-71></a><span class=err>│</span>
<a href=#__codelineno-288-72 id=__codelineno-288-72 name=__codelineno-288-72></a><span class=err>├──</span><span class=w> </span><span class=nt>checksum</span><span class=o>()</span>
<a href=#__codelineno-288-73 id=__codelineno-288-73 name=__codelineno-288-73></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>luhn</span><span class=o>()</span>
<a href=#__codelineno-288-74 id=__codelineno-288-74 name=__codelineno-288-74></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>mod10</span><span class=o>()</span>
<a href=#__codelineno-288-75 id=__codelineno-288-75 name=__codelineno-288-75></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>mod11</span><span class=o>()</span>
<a href=#__codelineno-288-76 id=__codelineno-288-76 name=__codelineno-288-76></a><span class=err>│</span>
<a href=#__codelineno-288-77 id=__codelineno-288-77 name=__codelineno-288-77></a><span class=err>├──</span><span class=w> </span><span class=nt>finance</span><span class=o>()</span>
<a href=#__codelineno-288-78 id=__codelineno-288-78 name=__codelineno-288-78></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>creditCard</span><span class=o>()</span>
<a href=#__codelineno-288-79 id=__codelineno-288-79 name=__codelineno-288-79></a><span class=err>│</span>
<a href=#__codelineno-288-80 id=__codelineno-288-80 name=__codelineno-288-80></a><span class=err>├──</span><span class=w> </span><span class=nt>id</span><span class=o>()</span>
<a href=#__codelineno-288-81 id=__codelineno-288-81 name=__codelineno-288-81></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>ean</span><span class=o>()</span>
<a href=#__codelineno-288-82 id=__codelineno-288-82 name=__codelineno-288-82></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>isbn</span><span class=o>()</span>
<a href=#__codelineno-288-83 id=__codelineno-288-83 name=__codelineno-288-83></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>bra</span><span class=o>()</span>
<a href=#__codelineno-288-84 id=__codelineno-288-84 name=__codelineno-288-84></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>cpf</span><span class=o>()</span>
<a href=#__codelineno-288-85 id=__codelineno-288-85 name=__codelineno-288-85></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>cnpj</span><span class=o>()</span>
<a href=#__codelineno-288-86 id=__codelineno-288-86 name=__codelineno-288-86></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>tituloEleitoral</span><span class=o>()</span>
<a href=#__codelineno-288-87 id=__codelineno-288-87 name=__codelineno-288-87></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>can</span><span class=o>()</span>
<a href=#__codelineno-288-88 id=__codelineno-288-88 name=__codelineno-288-88></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>sin</span><span class=o>()</span>
<a href=#__codelineno-288-89 id=__codelineno-288-89 name=__codelineno-288-89></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>pol</span><span class=o>()</span>
<a href=#__codelineno-288-90 id=__codelineno-288-90 name=__codelineno-288-90></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>nip</span><span class=o>()</span>
<a href=#__codelineno-288-91 id=__codelineno-288-91 name=__codelineno-288-91></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>pesel</span><span class=o>()</span>
<a href=#__codelineno-288-92 id=__codelineno-288-92 name=__codelineno-288-92></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>regon</span><span class=o>()</span>
<a href=#__codelineno-288-93 id=__codelineno-288-93 name=__codelineno-288-93></a><span class=err>│</span><span class=w>   </span><span class=err>├──</span><span class=w> </span><span class=nt>rus</span><span class=o>()</span>
<a href=#__codelineno-288-94 id=__codelineno-288-94 name=__codelineno-288-94></a><span class=err>│</span><span class=w>   </span><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>inn</span><span class=o>()</span>
<a href=#__codelineno-288-95 id=__codelineno-288-95 name=__codelineno-288-95></a><span class=err>│</span><span class=w>   </span><span class=err>└──</span><span class=w> </span><span class=nt>usa</span><span class=o>()</span>
<a href=#__codelineno-288-96 id=__codelineno-288-96 name=__codelineno-288-96></a><span class=err>│</span><span class=w>       </span><span class=err>└──</span><span class=w> </span><span class=nt>ssn</span><span class=o>()</span>
<a href=#__codelineno-288-97 id=__codelineno-288-97 name=__codelineno-288-97></a><span class=err>│</span>
<a href=#__codelineno-288-98 id=__codelineno-288-98 name=__codelineno-288-98></a><span class=err>├──</span><span class=w> </span><span class=nt>shuffle</span><span class=o>(</span><span class=nt>T</span><span class=o>...)</span>
<a href=#__codelineno-288-99 id=__codelineno-288-99 name=__codelineno-288-99></a><span class=err>├──</span><span class=w> </span><span class=nt>shuffle</span><span class=o>(</span><span class=nt>Collection</span><span class=o><</span><span class=nt>T</span><span class=o>>)</span>
<a href=#__codelineno-288-100 id=__codelineno-288-100 name=__codelineno-288-100></a><span class=err>│</span>
<a href=#__codelineno-288-101 id=__codelineno-288-101 name=__codelineno-288-101></a><span class=err>└──</span><span class=w> </span><span class=nt>spatial</span><span class=o>()</span>
<a href=#__codelineno-288-102 id=__codelineno-288-102 name=__codelineno-288-102></a><span class=w>    </span><span class=err>└──</span><span class=w> </span><span class=nt>coordinate</span><span class=o>()</span>
<a href=#__codelineno-288-103 id=__codelineno-288-103 name=__codelineno-288-103></a><span class=w>        </span><span class=err>├──</span><span class=w> </span><span class=nt>lat</span><span class=o>()</span>
<a href=#__codelineno-288-104 id=__codelineno-288-104 name=__codelineno-288-104></a><span class=w>        </span><span class=err>└──</span><span class=w> </span><span class=nt>lon</span><span class=o>()</span>
</code></pre></div><div class="admonition info"><p class=admonition-title>The <code>io().file()</code> and <code>nio().path()</code> generators can save files on the filesystem.</div></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div></main><footer class=md-footer><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-footer-copyright><div class=md-footer-copyright__highlight>© Instancio 2022-2025</div> powered by <a href=https://www.mkdocs.org target=_blank title=MkDocs>MkDocs</a> and <a title="Material for MkDocs" href=https://squidfunk.github.io/mkdocs-material/ target=_blank> Material for MkDocs</a></div><div class=md-social></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "icons", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script><script src=../assets/javascripts/bundle.83f73b43.min.js></script>